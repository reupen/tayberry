{"version":3,"file":"tayberry.js","sources":["base.js","helpers/utils.js","axis.js","helpers/colour.js","constants.js","renderer.base.js","helpers/rect.js","renderer.bar.js","renderer.line.js","core.js","drawing.js","events.js","defaults.js","sizing.js","legend.js","animation.js","tayberry.js"],"sourcesContent":["export class Tayberry {\r\n    constructor() {\r\n        this.selectedItem = {};\r\n        this.containerElement = null;\r\n        this.labelsCanvas = null;\r\n        this.labelsCtx = null;\r\n        this.options = null;\r\n        this.scaleFactor = null;\r\n        this.titleFont = null;\r\n        this.plotArea = null;\r\n        this.categories = [];\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.legendFont = null;\r\n        this.renderers = [];\r\n        this.onClickReal = null;\r\n        this.onMouseLeaveReal = null;\r\n        this.onMouseMoveReal = null;\r\n        this.onWindowResizeReal = null;\r\n        this.pendingAnimations = [];\r\n        this.callbacks = {\r\n            onResize: [],\r\n            onInit: []\r\n        }\r\n    }\r\n\r\n    get seriesCount() {\r\n        return this.options.series.length;\r\n    }\r\n\r\n    get categoryCount() {\r\n        return this.options.series.length ? this.options.series[0].data.length : 0;\r\n    }\r\n}\r\n\r\n\r\n","'use strict';\r\n\r\nexport function identity(obj) {\r\n    return obj;\r\n}\r\n\r\nexport function isMissingValue(n) {\r\n    return n === null || typeof n === 'undefined' || (isNaN(n) && typeof n === 'number');\r\n}\r\n\r\nexport function coalesce(...vals) {\r\n    for (let i = 0; i < vals.length; i++) {\r\n        if (!isMissingValue(vals[i])) {\r\n            return vals[i];\r\n        }\r\n    }\r\n}\r\n\r\nexport function reduce(array, func, getter, ignoreMissing = false) {\r\n    var ret, i;\r\n    if (array.reduce && !getter && !ignoreMissing) {\r\n        ret = array.reduce(function (a, b) {\r\n            return func(a, b);\r\n        });\r\n    } else {\r\n        let retInitialised = false;\r\n        getter = getter || identity;\r\n        for (i = 0; i < array.length; i++) {\r\n            const value = getter(array[i], i);\r\n            if (!ignoreMissing || !isMissingValue(value)) {\r\n                ret = retInitialised ? func(ret, value) : value;\r\n                retInitialised = true;\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n\r\nexport function sign(n) {\r\n    return n > 0 ? 1 : (n < 0 ? -1 : 0);\r\n}\r\n\r\nvar innerAssign = function (deepAssign, targetObject, sourceObjects) {\r\n    if (!Array.isArray(sourceObjects))\r\n        sourceObjects = [sourceObjects];\r\n    if (!deepAssign && Object.assign) {\r\n        return Object.assign.apply(Object, [targetObject].concat(sourceObjects));\r\n    } else {\r\n        if (targetObject === undefined || targetObject === null) {\r\n            throw new TypeError('Cannot convert first argument to object');\r\n        }\r\n\r\n        var to = Object(targetObject);\r\n        for (let i = 0; i < sourceObjects.length; i++) {\r\n            let currentSourceObject = sourceObjects[i];\r\n            if (currentSourceObject === undefined || currentSourceObject === null) {\r\n                continue;\r\n            }\r\n            currentSourceObject = Object(currentSourceObject);\r\n\r\n            const keysArray = Object.keys(currentSourceObject);\r\n            for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                const nextKey = keysArray[nextIndex];\r\n                const nextValue = currentSourceObject[nextKey];\r\n                const desc = Object.getOwnPropertyDescriptor(currentSourceObject, nextKey);\r\n                if (desc !== undefined && desc.enumerable) {\r\n                    if (deepAssign && !Array.isArray(nextValue) && typeof nextValue === 'object' && nextValue !== null)\r\n                        to[nextKey] = innerAssign(true, {}, [to[nextKey], nextValue]);\r\n                    else\r\n                        to[nextKey] = nextValue;\r\n                }\r\n            }\r\n        }\r\n        return to;\r\n    }\r\n}\r\n\r\nexport function none(array) {\r\n    return array.every(elem => !elem);\r\n}\r\n\r\nexport function assign(targetObject, sourceObjects) {\r\n    return innerAssign(false, targetObject, sourceObjects);\r\n}\r\n\r\nexport function deepAssign(targetObject, sourceObjects) {\r\n    return innerAssign(true, targetObject, sourceObjects);\r\n}\r\n\r\nexport function formatString(formatString, formatValues, escapeAsHtml) {\r\n    return formatString.replace(/{(\\w+)}/g, function (match, placeholder) {\r\n        const value = formatValues[placeholder];\r\n        return typeof value !== 'undefined' ? (escapeAsHtml ? stringToHtml(value) : value) : match;\r\n    });\r\n}\r\n\r\nexport function locateDecimalPoint(number) {\r\n    return Math.floor(Math.log(number) / Math.log(10));\r\n}\r\n\r\nexport function formatNumberThousands(number, decimalPlaces = 0) {\r\n    var parts = number.toFixed(decimalPlaces).split(\".\");\r\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n    return parts.join(\".\");\r\n}\r\n\r\nexport function createAutoNumberFormatter(scale, prefix = '', suffix = '', precision = 2) {\r\n    let decimalPlaces = locateDecimalPoint(scale);\r\n    decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n    return x => prefix + formatNumberThousands(x, decimalPlaces) + suffix;\r\n}\r\n\r\nexport function createFixedNumberFormatter(scale, prefix = '', suffix = '', decimalPlaces = 2) {\r\n    return x => prefix + formatNumberThousands(x, decimalPlaces) + suffix;\r\n}\r\n\r\nexport function createPercentageFormatter(scale, prefix = '', suffix = '%', precision = 2) {\r\n    let decimalPlaces = locateDecimalPoint(scale * 100);\r\n    decimalPlaces = decimalPlaces < precision ? -decimalPlaces + precision - 1 : 0;\r\n    return x => prefix + formatNumberThousands(x * 100, decimalPlaces) + suffix;\r\n}\r\n\r\nexport function stringToHtml(str) {\r\n    var div = document.createElement('div');\r\n    div.appendChild(document.createTextNode(str));\r\n    return div.innerHTML;\r\n}\r\n\r\nexport function throttle(fn, threshold) {\r\n    var last,\r\n        deferTimer;\r\n    return function () {\r\n        var context = this;\r\n\r\n        var now = Date.now(),\r\n            args = arguments;\r\n        if (last && now < last + threshold) {\r\n            clearTimeout(deferTimer);\r\n            deferTimer = setTimeout(function () {\r\n                last = now;\r\n                fn.apply(context, args);\r\n            }, threshold);\r\n        } else {\r\n            last = now;\r\n            fn.apply(context, args);\r\n        }\r\n    }\r\n}\r\n\r\n","'use strict';\r\nimport * as Utils from './helpers/utils.js';\r\n\r\nexport class Axis {\r\n    static create(tayberry, options, index, axisType, xYSwapped) {\r\n        const isHorizontal = (axisType === 'x' && !xYSwapped) || (axisType === 'y' && xYSwapped);\r\n        if (options.type === 'linear')\r\n            return new LinearAxis(tayberry, index, options, axisType, isHorizontal);\r\n        else\r\n            return new CategorialAxis(tayberry, index, options, axisType, isHorizontal);\r\n    }\r\n\r\n    constructor(tayberry, index, options, axisType, isHorizontal) {\r\n        this.tayberry = tayberry;\r\n        this.options = options;\r\n        this.axisType = axisType;\r\n        this.isHorizontal = isHorizontal;\r\n        this.index = index;\r\n        this.tickStep = null;\r\n        this.min = null;\r\n        this.max = null;\r\n        this.tickStart = null;\r\n        this.tickEnd = null;\r\n        this.calculatedSize = 0;\r\n        this.topAdjustment = 0;\r\n        this.rightAdjustment = 0;\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.numLabelLines = 1;\r\n\r\n        this.setPlacement();\r\n    }\r\n\r\n    updateFonts() {\r\n        this.labelFont = this.tayberry.createFontString(this.options.font);\r\n        this.titleFont = this.tayberry.createFontString(this.options.title.font);\r\n    }\r\n\r\n    setPlacement() {\r\n        const validAndSpecificPlacements = ['left', 'right', 'top', 'bottom', 'start', 'end'];\r\n        if (validAndSpecificPlacements.indexOf(this.options.placement) === -1) {\r\n            this.options.placement = this.isVertical ^ (this.index > 0) ? 'start' : 'end';\r\n        }\r\n    }\r\n\r\n    get isPlacedAtStart() {\r\n        return this.options.placement === \"left\" || this.options.placement === \"bottom\" || this.options.placement === \"start\";\r\n    }\r\n\r\n    get isYAxis() {\r\n        return this.axisType === 'y';\r\n    }\r\n\r\n    get isVertical() {\r\n        return !this.isHorizontal;\r\n    }\r\n\r\n    maxLabelSize() {\r\n        let tb = this.tayberry;\r\n        let ticks = this.getTicks();\r\n        return Utils.reduce(ticks, Math.max, x => tb.getTextWidth(this.options.labelFormatter(x.value), this.labelFont));\r\n    }\r\n\r\n    mapLogicalXOrYUnit(x) {\r\n        return this.isVertical ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    mapLogicalYOrXUnit(x) {\r\n        return !this.isVertical ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    adjustSize(plotArea, fixedOnly, reset) {\r\n        let size = 0,\r\n            tb = this.tayberry,\r\n            ret;\r\n\r\n        const titleFontHeight = tb.getFontHeight(this.options.title.font);\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n\r\n        if (reset) {\r\n            this.calculatedSize = 0;\r\n            this.topAdjustment = 0;\r\n            this.rightAdjustment = 0;\r\n            this.numLabelLines = 1;\r\n        }\r\n\r\n        size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        if (this.options.title.text) {\r\n            size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) + titleFontHeight;\r\n        }\r\n\r\n        if (!fixedOnly) {\r\n            let ticks = this.getTicks(false);\r\n            if (this.isVertical) {\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const lastTickYStart = lastTick.y - fontHeight / 2;\r\n                    if (lastTickYStart < plotArea.top - this.topAdjustment) {\r\n                        const adjustment = plotArea.top - lastTickYStart - this.topAdjustment + 1;\r\n                        plotArea.top += adjustment;\r\n                        this.topAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += this.maxLabelSize()\r\n            } else {\r\n                {\r\n                    let lastXEnd;\r\n                    for (let i = 0; i < ticks.length; i++) {\r\n                        let tick = ticks[i];\r\n                        const textWidth = tb.getTextWidth(this.options.labelFormatter(tick.value), this.labelFont);\r\n                        const xStart = tick.x - textWidth / 2;\r\n                        const xEnd = tick.x + textWidth / 2;\r\n                        if (typeof lastXEnd !== 'undefined' && xStart <= lastXEnd + 1) {\r\n                            this.numLabelLines = 2;\r\n                            break;\r\n                        }\r\n                        lastXEnd = xEnd;\r\n                    }\r\n                }\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const textWidth = tb.getTextWidth(this.options.labelFormatter(lastTick.value), this.labelFont);\r\n                    const lastTickXEnd = lastTick.x + textWidth / 2;\r\n                    if (lastTickXEnd >= plotArea.right + this.rightAdjustment) {\r\n                        const adjustment = lastTickXEnd - plotArea.right - this.rightAdjustment + 1;\r\n                        plotArea.right -= adjustment;\r\n                        this.rightAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += fontHeight * this.numLabelLines;\r\n            }\r\n        }\r\n\r\n        if (this.isPlacedAtStart) {\r\n            if (this.isVertical) {\r\n                plotArea.left += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.top += size - this.calculatedSize;\r\n            }\r\n        } else {\r\n            size *= -1;\r\n            if (this.isVertical) {\r\n                plotArea.right += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.bottom += size - this.calculatedSize;\r\n            }\r\n        }\r\n\r\n        ret = this.calculatedSize !== size;\r\n        this.calculatedSize = size;\r\n\r\n        return ret;\r\n    }\r\n\r\n    calculateExtent() {\r\n    }\r\n\r\n    getCategoryLabel() {\r\n    }\r\n\r\n    draw(offsetRect) {\r\n        this.drawTicksAndLabels(offsetRect);\r\n        this.drawTitle(offsetRect);\r\n    }\r\n\r\n    drawTicksAndLabels(offsetRect) {\r\n        let tb = this.tayberry;\r\n        const labelPadding = this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        const labelPaddingX = this.isVertical ? labelPadding * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const labelPaddingY = !this.isVertical ? labelPadding * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n        const xOffset = this.isVertical ? offsetRect[this.startProperty] : 0;\r\n        const yOffset = !this.isVertical ? offsetRect[this.startProperty] : 0;\r\n\r\n        tb.labelsCtx.save();\r\n        tb.labelsCtx.font = this.labelFont;\r\n        tb.labelsCtx.fillStyle = this.options.font.colour;\r\n        tb.labelsCtx.textAlign = this.isVertical ? (this.isPlacedAtStart ? 'right' : 'left') : 'center';\r\n        tb.labelsCtx.textBaseline = this.isVertical ? 'middle' : this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n        let lastXEnds = [],\r\n            tickIndex = 0,\r\n            maxWidth = 0;\r\n\r\n        this.enumerateTicks((tick) => {\r\n            let xStart, xEnd;\r\n            const formattedValue = this.options.labelFormatter(tick.value);\r\n            const row = tickIndex % this.numLabelLines;\r\n            const rowOffset = this.isVertical ? 0 : fontHeight * row;\r\n            const textWidth = tb.getTextWidth(formattedValue, this.labelFont);\r\n            if (!this.isVertical) {\r\n                xStart = tick.x - textWidth / 2;\r\n                xEnd = tick.x + textWidth / 2;\r\n            }\r\n\r\n            if (this.isVertical || (typeof lastXEnds[row] === 'undefined' || xStart > lastXEnds[row] + 1) && xStart >= 0 && xEnd < tb.labelsCanvas.width) {\r\n                maxWidth = Math.max(maxWidth, textWidth);\r\n                tb.labelsCtx.fillText(formattedValue, tick.x + labelPaddingX + xOffset, tick.y + labelPaddingY + rowOffset + yOffset);\r\n                lastXEnds[row] = xEnd;\r\n            }\r\n            if (this.options.gridLines.colour)\r\n                tb.drawLine(tick.x1, tick.y1, tick.x2, tick.y2, this.options.gridLines.colour);\r\n            tickIndex++;\r\n        });\r\n\r\n        this.adjustOffsetRect(offsetRect, this.isVertical ? maxWidth + labelPadding : fontHeight + labelPadding);\r\n\r\n        tb.labelsCtx.restore();\r\n    }\r\n\r\n    adjustOffsetRect(offsetRect, displacement) {\r\n        offsetRect[this.startProperty] += this.isPlacedAtStart ? -displacement : displacement;\r\n    }\r\n\r\n    get startProperty() {\r\n        if (this.isVertical)\r\n            return this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    get endProperty() {\r\n        if (this.isVertical)\r\n            return !this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return !this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    drawTitle(offsetRect) {\r\n        if (this.options.title.text) {\r\n            let tb = this.tayberry;\r\n            tb.labelsCtx.save();\r\n            tb.labelsCtx.font = this.titleFont;\r\n            tb.labelsCtx.fillStyle = this.options.title.font.colour;\r\n            tb.labelsCtx.textAlign = 'center';\r\n\r\n            const labelPaddingSize = this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n            const labelPadding = labelPaddingSize * (this.isPlacedAtStart ? -1 : 1);\r\n            const xOffset = this.isVertical ? offsetRect[this.startProperty] : 0;\r\n            const yOffset = !this.isVertical ? offsetRect[this.startProperty] : 0;\r\n            const fontHeight = tb.getFontHeight(this.options.title.font);\r\n\r\n            if (this.isVertical) {\r\n                tb.labelsCtx.textBaseline = 'bottom';\r\n                const x = tb.plotArea[this.startProperty] + xOffset + labelPadding;\r\n                const y = tb.plotArea.yMidpoint + yOffset;\r\n                tb.labelsCtx.translate(x, y);\r\n                tb.labelsCtx.rotate((this.isPlacedAtStart ? -1 : 1)*Math.PI / 2);\r\n                tb.labelsCtx.fillText(this.options.title.text, 0, 0);\r\n            } else {\r\n                tb.labelsCtx.textBaseline = this.isPlacedAtStart ? 'bottom' : 'top';\r\n                const x = tb.plotArea.xMidpoint + xOffset;\r\n                const y = tb.plotArea[this.startProperty] + labelPadding + yOffset;\r\n                //tb.mapLogicalYOrXUnit(tb.options.font.size * 2 + tb.options.elementSmallPadding + tb.options.elementLargePadding)\r\n                tb.labelsCtx.fillText(this.options.title.text, x, y);\r\n            }\r\n            this.adjustOffsetRect(offsetRect, fontHeight + labelPaddingSize);\r\n            tb.labelsCtx.restore();\r\n        }\r\n    }\r\n\r\n    getTicks(visibleOnly = true) {\r\n        let ret = [];\r\n        this.enumerateTicks(function (tick) {\r\n            ret.push(tick)\r\n        }, visibleOnly);\r\n        return ret;\r\n    }\r\n\r\n    getOrigin() {\r\n    }\r\n\r\n    updateFormatter() {\r\n    }\r\n\r\n    get valueOrigin() {\r\n        return this.min <= 0 && 0 <= this.max ? 0 : (this.min > 0 ? this.min : this.max)\r\n    }\r\n}\r\n\r\nclass CategorialAxis extends Axis {\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const categoryCount = this.options.categories.length;\r\n        let plotArea = tb.plotArea.clone();\r\n        if (this.isVertical)\r\n            plotArea.swapXY();\r\n        const categoryWidth = (plotArea.width / tb.categoryCount);\r\n        let factor = 0.5;\r\n\r\n        if (!this.isVertical) {\r\n            switch (this.options.labelPosition) {\r\n                case 'left':\r\n                    factor = 0;\r\n                    break;\r\n                case 'right':\r\n                    factor = 1;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < categoryCount; i++) {\r\n            const value = this.options.categories[i];\r\n            let y1 = (this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let y2 = (!this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let x1 = plotArea.left + Math.floor(i * categoryWidth);\r\n            let x2 = x1;\r\n            let x = plotArea.left + Math.floor(i * categoryWidth + categoryWidth * factor);\r\n            let y = y1;\r\n            if (this.isVertical)\r\n                [x1, y1, x2, y2, x, y] = [y1, x1, y2, x2, y, x];\r\n\r\n            callback({\r\n                value: value,\r\n                x1: x1,\r\n                y1: y1,\r\n                x2: x2,\r\n                y2: y2,\r\n                x: x,\r\n                y: y\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            this.options.labelFormatter = Utils.identity;\r\n        }\r\n    }\r\n\r\n    getCategoryLabel(index) {\r\n        return this.options.labelFormatter(this.options.categories[index]);\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isVertical ? (-this.tayberry.plotArea.height) : (this.tayberry.plotArea.width);\r\n    }\r\n\r\n    getOrigin() {\r\n        return this.tayberry.plotArea[this.isVertical ? 'bottom' : 'left'];\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() + this.plotDisplacement * (value + 0.5) / this.options.categories.length;\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nclass LinearAxis extends Axis {\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            if (this.options.labelFormat === 'percentage') {\r\n                this.options.labelFormatter = Utils.createPercentageFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n            else if (this.options.labelFormat === 'currency') {\r\n                this.options.labelFormatter = Utils.createFixedNumberFormatter(this.max - this.min, this.options.labelPrefix || this.options.currencySymbol, this.options.labelSuffix);\r\n            }\r\n            else {\r\n                this.options.labelFormatter = Utils.createAutoNumberFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n        }\r\n    }\r\n\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const start = this.startProperty,\r\n            end = this.endProperty;\r\n\r\n        for (let yValue = this.tickStart; yValue <= this.tickEnd && this.tickStep;) {\r\n            let y = this.getValueDisplacement(yValue);\r\n            if (this.isVertical) {\r\n                if (callback({\r\n                        value: yValue,\r\n                        x1: tb.plotArea[start],\r\n                        y1: y,\r\n                        x2: tb.plotArea[end],\r\n                        y2: y,\r\n                        x: tb.plotArea[start],\r\n                        y: y\r\n\r\n                    }))\r\n                    break;\r\n            } else {\r\n                if (callback({\r\n                        value: yValue,\r\n                        y1: tb.plotArea[start],\r\n                        x1: y,\r\n                        y2: tb.plotArea[end],\r\n                        x2: y,\r\n                        y: tb.plotArea[start],\r\n                        x: y\r\n                    }))\r\n                    break;\r\n            }\r\n            yValue = this.tickStart + Math.round((yValue + this.tickStep - this.tickStart) / this.tickStep) * this.tickStep;\r\n        }\r\n    }\r\n\r\n    static snapScaledValue(scaledStep) {\r\n        if (scaledStep < 1)\r\n            scaledStep = 1;\r\n        else if (scaledStep < 2)\r\n            scaledStep = 2;\r\n        else if (scaledStep < 2.5)\r\n            scaledStep = 2.5;\r\n        else if (scaledStep < 5)\r\n            scaledStep = 5;\r\n        else\r\n            scaledStep = 10;\r\n        return scaledStep;\r\n    }\r\n\r\n    calculateExtent() {\r\n        let targetTicks, approxStep, scale;\r\n\r\n        let targetStart = this.options.min;\r\n        let targetEnd = this.options.max;\r\n        const overriddenStart = !Utils.isMissingValue(targetStart);\r\n        const overriddenEnd = !Utils.isMissingValue(targetEnd);\r\n\r\n        if (!overriddenStart || !overriddenEnd) {\r\n            const [dataMin, dataMax] = this.isYAxis ? this.tayberry.getDataMinMax(this) : this.tayberry.getDataXMinMax(this);\r\n            const dataRange = dataMax - dataMin;\r\n            if (!overriddenStart) {\r\n                targetStart = dataMin;\r\n                if (this.isYAxis) {\r\n                    targetStart = targetStart - dataRange * 0.1;\r\n                    if (dataMin >= 0 && targetStart < 0)\r\n                        targetStart = 0;\r\n                }\r\n            }\r\n            if (!overriddenEnd) {\r\n                targetEnd = dataMax;\r\n                if (this.isYAxis) {\r\n                    targetEnd = dataMax + dataRange * 0.1;\r\n                    if (dataMax <= 0 && targetStart > 0)\r\n                        targetEnd = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.options.tickStepValue) {\r\n            this.tickStep = this.options.tickStepValue;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        } else {\r\n            const targetRange = targetEnd - targetStart;\r\n            targetTicks = this.plotLength / this.mapLogicalYOrXUnit(this.options.tickStep);\r\n            approxStep = targetRange / targetTicks;\r\n            scale = Math.pow(10, Math.floor(Math.log(approxStep) / Math.log(10)));\r\n            let scaledStep = LinearAxis.snapScaledValue(Math.ceil(approxStep / scale));\r\n            this.tickStep = scaledStep * scale;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        }\r\n        this.tickStart = this.options.tickStepValue && overriddenStart ? this.min : Math.floor(this.min / this.tickStep) * this.tickStep;\r\n        this.tickEnd = this.options.tickStepValue && overriddenEnd ? this.max : Math.ceil(this.max / this.tickStep) * this.tickStep;\r\n        if (!overriddenStart && this.isYAxis)\r\n            this.min = this.tickStart;\r\n        if (!overriddenEnd && this.isYAxis)\r\n            this.max = this.tickEnd;\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isVertical ? (this.tayberry.plotArea.height - 1) : -(this.tayberry.plotArea.width - 1);\r\n    }\r\n\r\n    get plotLength() {\r\n        return Math.abs(this.plotDisplacement);\r\n    }\r\n\r\n    getOrigin() {\r\n        let ret = this.tayberry.plotArea[this.isVertical ? 'bottom' : 'left'] - (0 - this.min) * this.plotDisplacement / (this.max - this.min);\r\n        if (this.isVertical) ret--;\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() - value * this.plotDisplacement / (this.max - this.min);\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getCategoryLabel(index, totalCategories, isRange) {\r\n        if (isRange) {\r\n            const start = index / totalCategories;\r\n            const end = (index + 1) / totalCategories;\r\n            const axisRange = this.max - this.min;\r\n            return Utils.formatString('{0} \\u2264 x < {1}', [this.options.labelFormatter(this.min + start * axisRange), this.options.labelFormatter(this.min + end * axisRange)]);\r\n        } else {\r\n            return this.options.labelFormatter(index);\r\n        }\r\n    }\r\n}\r\n","'use strict';\r\n\r\nimport * as Utils from './utils';\r\n\r\nexport class Colour {\r\n    /**\r\n     * Constructs a Colour object.\r\n     *\r\n     * @param colourCode    an HTML colour code in hex or integer (rgb) form\r\n     */\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            let arg1 = arguments[0];\r\n            if (typeof arg1 === 'string')\r\n                this.parseString(arg1);\r\n            else {\r\n                this.r = arg1.r;\r\n                this.g = arg1.g;\r\n                this.b = arg1.b;\r\n                this.a = arg1.a;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses an HTML colour code\r\n     * @param str\r\n     * @returns {Colour}\r\n     */\r\n    parseString(str) {\r\n        let regExHex = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;\r\n        let regExInt = /^rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*)?\\)$/i;\r\n        const groupsHex = regExHex.exec(str);\r\n        const groupsInt = regExInt.exec(str);\r\n        if (groupsHex) {\r\n            let parseHex = function (value) {\r\n                let ret = parseInt(value, 16);\r\n                ret = ret * 0x10 + ret;\r\n                return ret;\r\n            };\r\n            this.r = groupsHex[1] ? parseInt(groupsHex[1], 16) : parseHex(groupsHex[4]);\r\n            this.g = groupsHex[2] ? parseInt(groupsHex[2], 16) : parseHex(groupsHex[5]);\r\n            this.b = groupsHex[3] ? parseInt(groupsHex[3], 16) : parseHex(groupsHex[6]);\r\n            this.a = 1.0;\r\n        }\r\n        else if (groupsInt) {\r\n            this.r = parseInt(groupsInt[1]);\r\n            this.g = parseInt(groupsInt[2]);\r\n            this.b = parseInt(groupsInt[3]);\r\n            this.a = groupsInt[5] ? parseFloat(groupsInt[5]) : 1.0;\r\n        } else {\r\n            throw new RangeError(str + \" is not a valid HTML colour\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips a colour component to be in the range [0, 255], and round it them to\r\n     * the nearest integer\r\n     * @param component\r\n     * @returns {Colour}\r\n     */\r\n    clipComponent(component) {\r\n        this[component] = Math.round(this[component]);\r\n        this[component] = Math.min(this[component], 255);\r\n        this[component] = Math.max(this[component], 0);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips r,g,b colour components to be in the range [0, 255], and rounds them to\r\n     * the nearest integer\r\n     * @returns {Colour}\r\n     */\r\n    clip() {\r\n        this.clipComponent('r');\r\n        this.clipComponent('g');\r\n        this.clipComponent('b');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a number to each colour component\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    increaseBy(number) {\r\n        this.r += number;\r\n        this.g += number;\r\n        this.b += number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    multiplyAlpha(multiplier) {\r\n        this.a *= multiplier;\r\n        return this;\r\n    }\r\n\r\n    get sum() {\r\n        return this.r + this.g + this.b;\r\n    }\r\n\r\n    /**\r\n     * Formats this colour as a string\r\n     * @returns {String}\r\n     */\r\n    toString() {\r\n        var ret;\r\n        if (!Utils.isMissingValue(this.a) && this.a !== 1.0) {\r\n            ret = Utils.formatString('rgba({r},{g},{b},{a})', this);\r\n        } else {\r\n            ret = Utils.formatString('rgb({r},{g},{b})', this);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    static createFromBlend(colour1, colour2, blendPosition) {\r\n        const blender = (c1, c2) => (c1 + blendPosition * (c2 - c1));\r\n        return new Colour({\r\n            r: blender(colour1.r, colour2.r),\r\n            g: blender(colour1.g, colour2.g),\r\n            b: blender(colour1.b, colour2.b),\r\n            a: blender(Utils.coalesce(colour1.a, 1), Utils.coalesce(colour2.a, 1))\r\n        }).clip();\r\n    }\r\n\r\n}\r\n","'use strict';\r\n\r\nexport const visibilityState = {\r\n    visible: 1 << 0,\r\n    hidden: 1 << 1,\r\n    transitioning: 1 << 2\r\n};\r\n","'use strict';\r\nimport * as Utils from './helpers/utils.js';\r\nimport * as constants from './constants';\r\nimport {Colour} from './helpers/colour';\r\nimport {Tayberry} from './base';\r\n\r\nexport class Renderer {\r\n    constructor(ctx, tayberry, series) {\r\n        this.ctx = ctx;\r\n        this.tb = tayberry;\r\n        this.series = null;\r\n        this.setSeries(series);\r\n    }\r\n\r\n    setSeries(series) {\r\n        var seriesIndex;\r\n        this.series = series;\r\n\r\n        for (seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n            const series = this.series[seriesIndex];\r\n            series.renderer = this;\r\n        }\r\n    }\r\n\r\n    getVisibleSeriesCount(excludeSeries) {\r\n        let ret = 0;\r\n        for (let index=0; index<this.series.length; index++) {\r\n            if (index !== excludeSeries) {\r\n                const series = this.series[index];\r\n                if (series.visible & (constants.visibilityState.visible))\r\n                    ret++;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    onToggleSeriesAnimationFrame() {\r\n    }\r\n\r\n    onAnimationFrame() {\r\n        this.onToggleSeriesAnimationFrame();\r\n    }\r\n\r\n    drawLegendIndicator(ctx, series, rect, highlighted) {\r\n        ctx.fillStyle = highlighted ? series.highlightColour : series.colour;\r\n        if (!(series.visible & constants.visibilityState.visible))\r\n            ctx.fillStyle = (new Colour(ctx.fillStyle)).multiplyAlpha(this.tb.options.legend.hiddenAlphaMultiplier).toString();\r\n        ctx.fillRect(rect.left, rect.top, rect.width, rect.height);\r\n    }\r\n\r\n    drawLabel(sign, text, rect) {\r\n        if (this.tb.options.swapAxes)\r\n            rect = rect.clone().swapXY();\r\n        let x = (rect.left + rect.right) / 2;\r\n        let y;\r\n        if (this.tb.options.labels.verticalAlignment === 'top')\r\n            y = rect.top;\r\n        else if (this.tb.options.labels.verticalAlignment === 'bottom')\r\n            y = rect.bottom;\r\n        else\r\n            y = (rect.top + rect.bottom) / 2;\r\n        let baseline = 'middle';\r\n        let align = 'center';\r\n        if (this.tb.options.swapAxes) {\r\n            [x, y] = [y, x];\r\n            if (this.tb.options.labels.verticalPosition === 'outside')\r\n                align = 'left';\r\n            else if (this.tb.options.labels.verticalPosition === 'inside')\r\n                align = 'right';\r\n        } else {\r\n            baseline = Tayberry.mapVerticalPosition(sign, this.tb.options.labels.verticalPosition);\r\n        }\r\n        if (this.tb.plotArea.containsPoint(x, y)) {\r\n            this.ctx.save();\r\n            this.ctx.textAlign = align;\r\n            this.ctx.textBaseline = baseline;\r\n            this.ctx.fillText(text, x, y);\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n    drawPlot() {\r\n    }\r\n\r\n    drawLabels() {\r\n    }\r\n\r\n    hitTest() {\r\n    }\r\n\r\n}\r\n\r\nexport class Enumerator {\r\n    constructor(renderer, startCategoryIndex = 0) {\r\n        this.renderer = renderer;\r\n        this.tb = renderer.tb;\r\n\r\n        this.categoryCount = this.renderer.series[0].data.length;\r\n        this.categoryIndex = 0;\r\n        this.seriesIndex = 0;\r\n        this.seriesCount = this.renderer.series.length;\r\n        if (this.categoryCount) {\r\n            this.isHorizontal = this.tb.options.swapAxes;\r\n            this.plotArea = this.tb.plotArea.clone();\r\n            if (this.isHorizontal)\r\n                this.plotArea.swapXY();\r\n            this.startCategoryIndex = Math.max(startCategoryIndex, 0);\r\n            this.startCategoryIndex = Math.min(this.startCategoryIndex, this.categoryCount - 1);\r\n            this.categoryIndex = this.startCategoryIndex;\r\n        }\r\n    }\r\n\r\n    nextValue() {\r\n    }\r\n}\r\n\r\nexport class ByCategoryEnumerator extends Enumerator {\r\n    nextValue() {\r\n\r\n        let value;\r\n        do {\r\n            if (this.seriesIndex + 1 === this.seriesCount) {\r\n                this.seriesIndex = 0;\r\n                this.categoryIndex++;\r\n                if (this.categoryIndex >= this.categoryCount)\r\n                    break;\r\n            } else {\r\n                this.seriesIndex++;\r\n            }\r\n            value = Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]);\r\n        } while (Utils.isMissingValue(value));\r\n\r\n    }\r\n}\r\n\r\nexport class BySeriesEnumerator extends Enumerator {\r\n    nextValue() {\r\n\r\n        let value;\r\n        do {\r\n            if (this.categoryIndex + 1 === this.categoryCount) {\r\n                this.categoryIndex = this.startCategoryIndex;\r\n                this.seriesIndex++;\r\n                if (this.seriesIndex >= this.seriesCount)\r\n                    break;\r\n            } else {\r\n                this.categoryIndex++;\r\n            }\r\n            value = Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]);\r\n        } while (Utils.isMissingValue(value));\r\n\r\n    }\r\n}\r\n","'use strict';\r\n\r\nexport class Rect {\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            if (typeof arguments[0] === 'object') {\r\n                const rect = arguments[0];\r\n                this.left = rect.left;\r\n                this.top = rect.top;\r\n                this.right = rect.right;\r\n                this.bottom = rect.bottom;\r\n            } else {\r\n                const val = arguments[0];\r\n                this.left = val;\r\n                this.top = val;\r\n                this.right = val;\r\n                this.bottom = val;\r\n            }\r\n        } else if (arguments.length === 4) {\r\n            this.left = arguments[0];\r\n            this.top = arguments[1];\r\n            this.right = arguments[2];\r\n            this.bottom = arguments[3];\r\n        }\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get maxY() {\r\n        return Math.max(this.bottom, this.top);\r\n    }\r\n\r\n    get minY() {\r\n        return Math.min(this.bottom, this.top);\r\n    }\r\n\r\n    get minX() {\r\n        return Math.min(this.left, this.right);\r\n    }\r\n\r\n    get maxX() {\r\n        return Math.max(this.left, this.right);\r\n    }\r\n\r\n    get xMidpoint() {\r\n        return (this.left + this.right) / 2;\r\n    }\r\n\r\n    get yMidpoint() {\r\n        return (this.top + this.bottom) / 2;\r\n    }\r\n\r\n    get area() {\r\n        return Math.abs(this.width) * Math.abs(this.height);\r\n    }\r\n\r\n    containsPoint(x, y) {\r\n        return this.containsX(x) && this.containsY(y);\r\n    }\r\n\r\n    containsY(y) {\r\n        return (y >= this.top && y < this.bottom) || (y >= this.bottom && y < this.top);\r\n    }\r\n\r\n    containsX(x) {\r\n        return (x >= this.left && x < this.right) || (x >= this.right && x < this.left);\r\n    }\r\n\r\n    inflate(val) {\r\n        this.left -= val;\r\n        this.top -= val;\r\n        this.right += val;\r\n        this.bottom += val;\r\n        return this;\r\n    }\r\n\r\n    clip(clipRect) {\r\n        //FIXME: In theory, we should be more careful about how we handle rects where right < left or bottom < top\r\n        if (this.left < clipRect.minX) this.left = clipRect.minX;\r\n        else if (this.left > clipRect.maxX) this.left = clipRect.maxX;\r\n\r\n        if (this.right < clipRect.minX) this.right = clipRect.minX;\r\n        else if (this.right > clipRect.maxX) this.right = clipRect.maxX;\r\n\r\n        if (this.top < clipRect.minY)\r\n            this.top = clipRect.minY;\r\n        else if (this.top > clipRect.maxY)\r\n            this.top = clipRect.maxY;\r\n\r\n        if (this.bottom > clipRect.maxY)\r\n            this.bottom = clipRect.maxY;\r\n        else if (this.bottom < clipRect.minY)\r\n            this.bottom = clipRect.minY;\r\n\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Rect(this);\r\n    }\r\n\r\n    swapXY() {\r\n        [this.left, this.top] = [this.top, this.left];\r\n        [this.bottom, this.right] = [this.right, this.bottom];\r\n        return this;\r\n    }\r\n}\r\n","'use strict';\r\nimport {Rect} from './helpers/rect';\r\nimport * as Utils from './helpers/utils.js';\r\nimport {Colour} from './helpers/colour';\r\nimport * as renderer from './renderer.base';\r\nimport * as constants from './constants';\r\nimport {Tayberry} from './base';\r\n\r\nexport class BarRenderer extends renderer.Renderer {\r\n    constructor(ctx, tayberry, series) {\r\n        super(ctx, tayberry, series);\r\n\r\n        this.barPositions = null;\r\n\r\n        this.tb.registerCallback('onResize', this.updateBarWidths.bind(this));\r\n        this.tb.registerCallback('onInit', this.updateBarWidths.bind(this));\r\n    }\r\n\r\n    updateBarWidths() {\r\n        const categoryCount = this.series[0].data.length;\r\n        const isStacked = this.tb.options.barPlot.mode === 'stacked';\r\n        const isOverlaid = this.tb.options.barPlot.mode === 'overlaid';\r\n        const isNormal = !isStacked && !isOverlaid;\r\n        const seriesCount = this.series.length;\r\n        const plotArea = this.tb.options.swapAxes ? this.tb.plotArea.clone().swapXY() : this.tb.plotArea;\r\n        const categoryWidth = (plotArea.width / categoryCount);\r\n        let animatingSeriesCount = 0;\r\n        let totalMultiplier = 0;\r\n\r\n        for (let seriesIndex = 0; seriesIndex < seriesCount; seriesIndex++) {\r\n            const series = this.series[seriesIndex];\r\n            const rState = series.rState;\r\n            if (series.animationState) {\r\n                if (!series.animationState.subtype) {\r\n                    const visibleSeriesCount = this.getVisibleSeriesCount(seriesIndex);\r\n                    if (isNormal && visibleSeriesCount > 0) {\r\n                        series.animationState.subtype = 'width';\r\n                    } else if (isStacked  && visibleSeriesCount > 0) {\r\n                        series.animationState.subtype = 'height';\r\n                    } else {\r\n                        series.animationState.subtype = 'fade';\r\n                    }\r\n\r\n                    rState.colour = series.colour;\r\n                }\r\n\r\n                const isShow = series.animationState.type === 'show';\r\n                if (series.animationState.subtype === 'width') {\r\n                    rState.multiplier = isShow ? series.animationState.stage : 1 - series.animationState.stage;\r\n                    rState.yMultiplier = 1;\r\n                } else if (series.animationState.subtype === 'height') {\r\n                    rState.yMultiplier = isShow ? series.animationState.stage : 1 - series.animationState.stage;\r\n                    rState.multiplier = 1;\r\n                } else {\r\n                    let transColour = new Colour(series.colour);\r\n                    transColour.a = 0;\r\n                    if (isShow)\r\n                        rState.colour = Colour.createFromBlend(transColour, new Colour(series.colour), series.animationState.stage).toString();\r\n                    else\r\n                        rState.colour = Colour.createFromBlend(new Colour(series.colour), transColour, series.animationState.stage).toString();\r\n\r\n                    rState.yMultiplier = 1;\r\n                    rState.multiplier = 1;\r\n                }\r\n                ++animatingSeriesCount;\r\n            } else if (series.visible & constants.visibilityState.visible) {\r\n                rState.multiplier = 1;\r\n                rState.yMultiplier = 1;\r\n            } else {\r\n                rState.multiplier = 0;\r\n                rState.yMultiplier = 0;\r\n            }\r\n            totalMultiplier += rState.multiplier;\r\n        }\r\n\r\n        const totalBarsPerCategory = (isStacked || isOverlaid) ? 1 : totalMultiplier;\r\n        const yOrigin = this.series[0].yAxis.getOrigin();\r\n\r\n        this.barPositions = [];\r\n\r\n        for (let categoryIndex = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n            let yBottomPositive = yOrigin;\r\n            let yBottomNegative = yOrigin;\r\n            let yRunningTotalPositive = 0;\r\n            let yRunningTotalNegative = 0;\r\n\r\n            const categoryXStart = plotArea.left + Math.floor(categoryIndex * categoryWidth);\r\n            const categoryXEnd = plotArea.left + Math.floor((categoryIndex + 1) * categoryWidth);\r\n            // FIXME: Need to map this.tb.options.barPlot.categorySpacing\r\n            const barXStart = categoryXStart + Math.ceil(categoryWidth * this.tb.options.barPlot.categorySpacing / 2);\r\n            const barXEnd = categoryXEnd - Math.floor(categoryWidth * this.tb.options.barPlot.categorySpacing / 2);\r\n\r\n            let categoryPositions = [];\r\n            let barIndex = 0;\r\n\r\n            let runningBarWidth = 0;\r\n\r\n            for (let seriesIndex = 0; seriesIndex < seriesCount; seriesIndex++) {\r\n                const series = this.series[seriesIndex];\r\n                const rState = series.rState;\r\n                const value = Tayberry.getDataValue(series.data[categoryIndex])*rState.yMultiplier;\r\n\r\n                let barWidth = Math.floor(rState.multiplier * Math.floor((barXEnd - barXStart) / totalBarsPerCategory));\r\n\r\n                const xStart = Math.floor(barXStart + runningBarWidth) + Math.ceil(series.xAxis.mapLogicalXOrYUnit(this.tb.options.barPlot.barPadding) / 2);\r\n                const xEnd = Math.ceil(barXStart + runningBarWidth + barWidth) - Math.floor(series.xAxis.mapLogicalXOrYUnit(this.tb.options.barPlot.barPadding) / 2);\r\n                const yTop = series.yAxis.getValueDisplacement(value + (value > 0 ? yRunningTotalPositive : yRunningTotalNegative));\r\n                const yBottom = isStacked ? (value > 0 ? yBottomPositive : yBottomNegative) : yOrigin;\r\n\r\n                categoryPositions.push([xStart, yTop, xEnd, yBottom]);\r\n\r\n                if (isStacked) {\r\n                    if (value > 0) {\r\n                        yRunningTotalPositive += value;\r\n                        yBottomPositive = yTop;\r\n                    } else {\r\n                        yRunningTotalNegative += value;\r\n                        yBottomNegative = yTop;\r\n                    }\r\n                } else if (isNormal) {\r\n                    barIndex++;\r\n                    runningBarWidth += barWidth;\r\n                }\r\n\r\n            }\r\n\r\n            this.barPositions.push(categoryPositions);\r\n        }\r\n    }\r\n\r\n    onToggleSeriesAnimationFrame() {\r\n        this.updateBarWidths();\r\n    }\r\n\r\n    drawPlot() {\r\n        this.ctx.save();\r\n        let barEnumerator = new BarEnumerator(this);\r\n        let bar;\r\n        while ((bar = barEnumerator.next())) {\r\n            if (bar.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)) {\r\n                this.ctx.fillStyle = bar.selected ? bar.series.rState.highlightColour : bar.series.rState.colour;\r\n                this.ctx.fillRect(bar.rect.left, bar.rect.top, bar.rect.width, bar.rect.height);\r\n            }\r\n        }\r\n        this.ctx.restore();\r\n    }\r\n\r\n    drawLabels() {\r\n        if (this.tb.options.labels.enabled) {\r\n            this.ctx.save();\r\n            let barEnumerator = new BarEnumerator(this);\r\n            let bar;\r\n            while ((bar = barEnumerator.next())) {\r\n                if ((bar.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)) === constants.visibilityState.visible) {\r\n                    this.ctx.font = this.tb.labelFont;\r\n                    this.ctx.fillStyle = this.tb.options.labels.font.colour;\r\n                    this.drawLabel(bar.value, bar.series.yAxis.options.labelFormatter(bar.value), bar.rect);\r\n                }\r\n            }\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n    hitTest(x, y) {\r\n        // TODO: Optimise\r\n        let ret = {\r\n            found: false,\r\n            plotType: 'bar',\r\n            type: 'plotItem',\r\n            isXRange: true\r\n        };\r\n\r\n        const categoryCount = this.series[0].data.length;\r\n        const isHorizontal = this.tb.options.swapAxes;\r\n        let plotArea = this.tb.plotArea.clone();\r\n        if (isHorizontal)\r\n            plotArea.swapXY();\r\n        const categoryIndex = Math.floor(categoryCount * ((isHorizontal ? y : x) - plotArea.left) / plotArea.width);\r\n\r\n        let matches = [];\r\n\r\n        let barEnumerator = new BarEnumerator(this, categoryIndex);\r\n        let bar;\r\n        while ((bar = barEnumerator.next())) {\r\n            if (bar.categoryIndex > categoryIndex)\r\n                break;\r\n            if (!(bar.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)))\r\n                continue;\r\n\r\n            let sortDistance, priority, realDistance;\r\n            if (bar.rect.containsPoint(x, y)) {\r\n                sortDistance = 0;\r\n                priority = 0;\r\n            }\r\n            else if (bar.rect.containsX(x)) {\r\n                sortDistance = y < bar.rect.top ? bar.rect.top - y : y - bar.rect.bottom;\r\n                priority = isHorizontal ? 2 : 1;\r\n            }\r\n            else if (bar.rect.containsY(y)) {\r\n                sortDistance = x < bar.rect.left ? bar.rect.left - x : x - bar.rect.right;\r\n                priority = isHorizontal ? 1 : 2;\r\n            }\r\n            else {\r\n                const xDist = Math.min(Math.abs(x - bar.rect.left), Math.abs(x - bar.rect.right));\r\n                const yDist = Math.min(Math.abs(y - bar.rect.top), Math.abs(y - bar.rect.bottom));\r\n                realDistance = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2));\r\n                sortDistance = isHorizontal ? yDist : xDist;\r\n                priority = 3;\r\n            }\r\n\r\n            if (typeof realDistance === 'undefined')\r\n                realDistance = sortDistance;\r\n\r\n            if (!Utils.isMissingValue(realDistance)) {\r\n                matches.push({\r\n                    sortDistance: sortDistance,\r\n                    distance: realDistance,\r\n                    priority: priority,\r\n                    data: {\r\n                        categoryIndex: bar.categoryIndex,\r\n                        seriesIndex: bar.seriesIndex,\r\n                        rect: bar.rect,\r\n                        series: bar.series,\r\n                        value: Tayberry.getDataValue(this.series[bar.seriesIndex].data[bar.categoryIndex])\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        if (matches.length) {\r\n            matches.sort((a, b) => {\r\n                let ret = a.priority - b.priority;\r\n                if (!ret) ret = a.sortDistance - b.sortDistance;\r\n                if (!ret) ret = a.data.rect.height - b.data.rect.height;\r\n                return ret;\r\n            });\r\n            ret.found = true;\r\n            ret.normalisedDistance = matches[0].distance + Math.sqrt(matches[0].data.rect.area);\r\n            if (ret.normalisedDistance < 0) {\r\n                ret.normalisedDistance = 0;\r\n            }\r\n            ret = Utils.assign(ret, matches[0].data);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport class BarEnumerator extends renderer.ByCategoryEnumerator {\r\n    next() {\r\n        let ret;\r\n\r\n        if (this.categoryIndex < this.categoryCount) {\r\n            const [xStart, yTop, xEnd, yBottom] = this.renderer.barPositions[this.categoryIndex][this.seriesIndex];\r\n\r\n            let rect = new Rect(xStart, yTop, xEnd, yBottom);\r\n\r\n            if (rect.right < rect.left)\r\n                rect.right = rect.left;\r\n            if (this.isHorizontal)\r\n                rect.swapXY();\r\n            rect.clip(this.tb.plotArea);\r\n\r\n            ret = {\r\n                seriesIndex: this.seriesIndex,\r\n                categoryIndex: this.categoryIndex,\r\n                series: this.renderer.series[this.seriesIndex],\r\n                value: Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]),\r\n                rect: rect,\r\n                selected: this.tb.selectedItem.type === 'plotItem' && this.tb.selectedItem.categoryIndex === this.categoryIndex && (this.tb.options.tooltips.shared || this.tb.selectedItem.series === this.renderer.series[this.seriesIndex])\r\n            };\r\n\r\n            this.nextValue();\r\n\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\n","'use strict';\r\nimport * as Utils from './helpers/utils.js';\r\nimport {Rect} from './helpers/rect';\r\nimport * as renderer from './renderer.base';\r\nimport * as constants from './constants';\r\nimport {Tayberry} from './base';\r\n\r\nvar autoMarkerIndex = 0;\r\nconst markers = ['square', 'diamond', 'circle', 'triangle', 'triangle-inversed'];\r\n\r\nexport class LineRenderer extends renderer.Renderer {\r\n    constructor(ctx, tayberry, series) {\r\n        super(ctx, tayberry, series);\r\n\r\n        this.pointPositions = null;\r\n\r\n        this.tb.registerCallback('onResize', this.updatPointPositions.bind(this));\r\n        this.tb.registerCallback('onInit', this.updatPointPositions.bind(this));\r\n    }\r\n\r\n    updatPointPositions() {\r\n        const seriesCount = this.series.length;\r\n\r\n        this.pointPositions = [];\r\n\r\n        for (let seriesIndex = 0; seriesIndex < seriesCount; seriesIndex++) {\r\n            const series = this.series[seriesIndex];\r\n            const rState = series.rState;\r\n            if (series.animationState) {\r\n                if (!series.animationState.subtype) {\r\n                    series.animationState.subtype = 'height';\r\n                }\r\n\r\n                const isShow = series.animationState.type === 'show';\r\n                if (series.animationState.subtype === 'height') {\r\n                    rState.yMultiplier = isShow ? series.animationState.stage : 1 - series.animationState.stage;\r\n                    rState.xMultiplier = 1;\r\n                }\r\n\r\n            } else if (series.visible & constants.visibilityState.visible) {\r\n                rState.xMultiplier = 1;\r\n                rState.yMultiplier = 1;\r\n            } else {\r\n                rState.xMultiplier = 1;\r\n                rState.yMultiplier = 0;\r\n            }\r\n        }\r\n\r\n        for (let seriesIndex = 0; seriesIndex < seriesCount; seriesIndex++) {\r\n            const series = this.series[seriesIndex];\r\n            const rState = series.rState;\r\n            const valueCount = series.data.length;\r\n            const yOrigin = series.yAxis.valueOrigin;\r\n            let seriesPositions = [];\r\n\r\n            for (let valueIndex = 0; valueIndex < valueCount; valueIndex++) {\r\n                const value = Tayberry.getDataValue(series.data[valueIndex]);\r\n                const xValue = Tayberry.getDataXValue(series.data, valueIndex);\r\n\r\n                const rValue = yOrigin + (rState.yMultiplier)*(value-yOrigin);\r\n                let x = series.xAxis.getValueDisplacement(xValue)*rState.xMultiplier;\r\n                let y = series.yAxis.getValueDisplacement(rValue);\r\n\r\n                seriesPositions.push([x, y]);\r\n            }\r\n\r\n            this.pointPositions.push(seriesPositions);\r\n        }\r\n    }\r\n\r\n    setSeries(series) {\r\n        let totalPoints = 0;\r\n        for (var i = 0; i < series.length; i++) {\r\n            if (!series[i].markerType) {\r\n                series[i].markerType = markers[autoMarkerIndex % markers.length];\r\n                autoMarkerIndex++;\r\n            }\r\n            totalPoints += series[i].data.length;\r\n        }\r\n        const showMarkers = this.tb.options.linePlot.showMarkers;\r\n        this.showMarkers = showMarkers === 'auto' ? totalPoints < this.tb.options.linePlot.noMarkersThreshold : showMarkers;\r\n        super.setSeries(series);\r\n    }\r\n\r\n    drawMarker(type, x, y, size, ctx = this.ctx) {\r\n        if (type === 'square') {\r\n            ctx.fillRect(x - size / 2, y - size / 2, size, size);\r\n        } else if (type === 'diamond') {\r\n            ctx.save();\r\n            ctx.translate(x, y);\r\n            ctx.rotate(-Math.PI / 4);\r\n            ctx.fillRect(0 - size / 2, 0 - size / 2, size, size);\r\n            ctx.restore();\r\n        } else if (type === 'circle') {\r\n            size = Math.round(size * 1.2);\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, size / 2, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n        } else if (type === 'triangle' || (type === 'triangle-inversed' && (size = -size))) {\r\n            size = Math.round(size * 1.2);\r\n            ctx.beginPath();\r\n            ctx.moveTo(x - size / 2, y + size / 2);\r\n            ctx.lineTo(x, y - size / 2);\r\n            ctx.lineTo(x + size / 2, y + size / 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n    }\r\n\r\n    onToggleSeriesAnimationFrame() {\r\n        this.updatPointPositions();\r\n    }\r\n\r\n    drawPlot() {\r\n        this.ctx.save();\r\n        let pointEnumerator = new PointEnumerator(this);\r\n        let pt;\r\n        while ((pt = pointEnumerator.next())) {\r\n            if (!(pt.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)))\r\n                continue;\r\n\r\n            if (pt.firstPoint) {\r\n                this.ctx.lineWidth = pt.seriesSelected ? this.tb.options.linePlot.highlightedLineWidth : this.tb.options.linePlot.lineWidth;\r\n                this.ctx.strokeStyle = pt.seriesSelected ? pt.series.rState.highlightColour : pt.series.rState.colour;\r\n                this.ctx.beginPath();\r\n                this.ctx.moveTo(pt.x, pt.y);\r\n            } else {\r\n                this.ctx.lineTo(pt.x, pt.y);\r\n            }\r\n            if (pt.lastPoint) {\r\n                this.ctx.stroke();\r\n            }\r\n        }\r\n        if (this.showMarkers) {\r\n            pointEnumerator = new PointEnumerator(this);\r\n            while ((pt = pointEnumerator.next())) {\r\n                if (!(pt.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)))\r\n                    continue;\r\n\r\n                if (pt.selected) {\r\n                    this.ctx.fillStyle = pt.series.rState.glowColour;\r\n                    this.drawMarker(pt.series.markerType, pt.x, pt.y, this.tb.options.linePlot.highlightedMarkerSize);\r\n                }\r\n                this.ctx.fillStyle = pt.series.rState.colour;\r\n                this.drawMarker(pt.series.markerType, pt.x, pt.y, this.tb.options.linePlot.markerSize);\r\n            }\r\n        }\r\n        this.ctx.restore();\r\n    }\r\n\r\n    drawLegendIndicator(ctx, series, rect, highlighted) {\r\n        const colour = highlighted ? series.highlightColour : series.colour;\r\n        ctx.save();\r\n        ctx.lineWidth = 2;\r\n        ctx.strokeStyle = colour;\r\n        this.tb.drawLine(rect.left, rect.yMidpoint, rect.right, rect.yMidpoint);\r\n        ctx.fillStyle = colour;\r\n        this.drawMarker(series.markerType, rect.xMidpoint, rect.yMidpoint, this.tb.options.linePlot.markerSize, ctx);\r\n        ctx.restore();\r\n    }\r\n\r\n    drawLabels() {\r\n        if (this.tb.options.labels.enabled) {\r\n            this.ctx.save();\r\n            this.ctx.font = this.tb.labelFont;\r\n            this.ctx.fillStyle = this.tb.options.labels.font.colour;\r\n            let pointEnumerator = new PointEnumerator(this);\r\n            let pt;\r\n            while ((pt = pointEnumerator.next())) {\r\n                if (!(pt.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)))\r\n                    continue;\r\n\r\n                const rect = new Rect(pt.x, pt.y, pt.x, pt.y).inflate(this.tb.options.linePlot.markerSize / 2);\r\n                this.drawLabel(pt.value, pt.series.yAxis.options.labelFormatter(pt.value), rect);\r\n            }\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n\r\n    hitTest(x, y) {\r\n        // TODO: Optimise\r\n        let ret = {\r\n            found: false,\r\n            plotType: 'line',\r\n            type: 'plotItem',\r\n            isXRange: false\r\n        };\r\n\r\n        let matches = [];\r\n\r\n        let pointEnumerator = new PointEnumerator(this);\r\n        let pt;\r\n        while ((pt = pointEnumerator.next())) {\r\n            if (!(pt.series.visible & (constants.visibilityState.visible | constants.visibilityState.transitioning)))\r\n                continue;\r\n\r\n            const distance = Math.sqrt(Math.pow(pt.x - x, 2) + Math.pow(pt.y - y, 2));\r\n            const horizontalDistance = Math.abs(this.tb.options.swapAxes ? pt.y - y : pt.x - x);\r\n            matches.push({\r\n                distance: distance,\r\n                horizontalDistance: horizontalDistance,\r\n                priority: 0,\r\n                data: pt\r\n            });\r\n            //if (!pt.firstPoint) {\r\n            //    if (x >= lastPt.x && x < pt.x) {\r\n            //const alpha = Math.arctan((pt.y - lastPt.y) / (pt.x - lastPt.x));\r\n            //const yAtX = (x - lastPt.x) * Math.tan(alpha) + lastPt.y;\r\n            //if (yAtX - 2 <= y < yAtX + 2) {\r\n            //    matches.push({\r\n            //        categoryIndex: pt.categoryIndex,\r\n            //        seriesIndex: pt.seriesIndex,\r\n            //        x: bar.rect,\r\n            //        series: this.series[bar.seriesIndex],\r\n            //        dataPoint: this.series[bar.seriesIndex].data[bar.categoryIndex]\r\n            //\r\n            //    })\r\n            //}\r\n            //}\r\n            //}\r\n            //lastPt = pt;\r\n\r\n        }\r\n        if (matches.length) {\r\n            matches.sort((e1, e2) => {\r\n                return (e1.horizontalDistance - e2.horizontalDistance) || (e1.distance - e2.distance);\r\n            });\r\n            if (true || matches[0].distance <= 5) {\r\n                pt = matches[0].data;\r\n                const rect = new Rect(pt.x, pt.y, pt.x, pt.y).inflate(this.tb.options.linePlot.markerSize / 2);\r\n                Utils.assign(ret, [{\r\n                    found: true,\r\n                    rect: rect,\r\n                    normalisedDistance: matches[0].distance + Math.sqrt(rect.area)\r\n                }, pt]);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nexport class PointEnumerator extends renderer.BySeriesEnumerator {\r\n    next() {\r\n        let ret;\r\n\r\n        if (this.seriesIndex < this.seriesCount) {\r\n            let [x, y] = this.renderer.pointPositions[this.seriesIndex][this.categoryIndex];\r\n\r\n            if (this.isHorizontal)\r\n                [x, y] = [y, x];\r\n\r\n            ret = {\r\n                firstPoint: this.categoryIndex === 0,\r\n                lastPoint: this.categoryIndex + 1 === this.categoryCount,\r\n                seriesIndex: this.seriesIndex,\r\n                categoryIndex: this.categoryIndex,\r\n                series: this.renderer.series[this.seriesIndex],\r\n                value: Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]),\r\n                x: x,\r\n                y: y,\r\n                seriesSelected: this.tb.selectedItem.type === 'plotItem' && !this.tb.options.tooltips.shared && this.tb.selectedItem.series === this.renderer.series[this.seriesIndex],\r\n                selected: this.tb.selectedItem.type === 'plotItem' && this.tb.selectedItem.categoryIndex === this.categoryIndex && (this.tb.options.tooltips.shared || this.tb.selectedItem.series === this.renderer.series[this.seriesIndex])\r\n            };\r\n\r\n            this.nextValue();\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n","'use strict';\r\nimport {Colour} from './helpers/colour';\r\nimport * as Utils from './helpers/utils.js';\r\n\r\nimport {Tayberry} from './base';\r\nimport {Axis} from './axis';\r\nimport {BarRenderer} from './renderer.bar';\r\nimport {LineRenderer} from './renderer.line';\r\n\r\nvar currentAutoColourIndex = 0;\r\n\r\nTayberry.getAutoColour = function () {\r\n    let ret = Tayberry.defaultColours[currentAutoColourIndex % Tayberry.defaultColours.length];\r\n    currentAutoColourIndex++;\r\n    return ret;\r\n};\r\n\r\nTayberry.getDataValue = function (dataPoint) {\r\n    let ret;\r\n    if (Array.isArray(dataPoint)) {\r\n        ret = dataPoint[1];\r\n    } else {\r\n        ret = dataPoint;\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.getDataXValue = function (data, index) {\r\n    let ret;\r\n    if (Array.isArray(data[index])) {\r\n        ret = data[index][0];\r\n    } else {\r\n        ret = index;\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.setDataValue = function (data, index, newValue) {\r\n    if (Array.isArray(data[index])) {\r\n        data[index][1] = newValue;\r\n    } else {\r\n        data[index] = newValue;\r\n    }\r\n};\r\n\r\nTayberry.prototype.createCanvas = function () {\r\n    let ret = document.createElement('canvas');\r\n    // IE11 hack-fix - clientWidth sometimes incorrect on first access\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    ret.style.position = 'absolute';\r\n    this.containerElement.appendChild(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.create = function (containerElement) {\r\n    if (typeof containerElement == 'string') {\r\n        this.containerElement = document.getElementById(containerElement);\r\n    } else {\r\n        this.containerElement = containerElement;\r\n    }\r\n    this.labelsCanvas = this.createCanvas();\r\n    this.labelsCtx = this.labelsCanvas.getContext('2d');\r\n    this.plotCanvas = this.createCanvas();\r\n    this.plotCtx = this.plotCanvas.getContext('2d');\r\n    this.options = {};\r\n    this.yAxes = null;\r\n    this.xAxes = null;\r\n    this.initialise();\r\n};\r\n\r\nTayberry.prototype.destroy = function () {\r\n    this.labelsCanvas.parentNode.removeChild(this.labelsCanvas);\r\n    this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n    this.options = {};\r\n    this.plotCanvas.removeEventListener('click', this.onClickReal);\r\n    this.plotCanvas.removeEventListener('mousemove', this.onMouseMoveReal);\r\n    this.plotCanvas.removeEventListener('mouseleave', this.onMouseLeaveReal);\r\n    // this.plotCanvas.removeEventListener('touchstart', this.onTouchStartReal);\r\n    window.removeEventListener('resize', this.onWindowResizeReal);\r\n};\r\n\r\nTayberry.prototype.initialise = function () {\r\n    this.scaleFactor = window.devicePixelRatio || 1.0;\r\n    this.labelsCanvas.width = Math.round(this.labelsCanvas.clientWidth * this.scaleFactor);\r\n    this.labelsCanvas.height = Math.round(this.labelsCanvas.clientHeight * this.scaleFactor);\r\n    this.plotCanvas.width = this.labelsCanvas.width;\r\n    this.plotCanvas.height = this.labelsCanvas.height;\r\n    this.scaleFactorX = this.labelsCanvas.width / this.labelsCanvas.clientWidth;\r\n    this.scaleFactorY = this.labelsCanvas.height / this.labelsCanvas.clientHeight;\r\n    this.selectedItem = {};\r\n    this.plotArea = null;\r\n};\r\n\r\nTayberry.prototype.getFontHeight = function (font, forDom) {\r\n    let ret = font.size;\r\n    if (font.autoScale)\r\n        ret *= Math.pow(this.labelsCanvas.width / 800, 0.25);\r\n    if (!forDom) ret = this.mapLogicalYUnit(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.createFontString = function (font, forDom) {\r\n    return (font.style ? font.style + ' ' : '') + this.getFontHeight(font, forDom).toFixed(1) + 'px ' + font.face;\r\n};\r\n\r\nTayberry.prototype.updateFonts = function () {\r\n    //this.labelsCtx.font = this.createFontString(this.options.font);\r\n    this.titleFont = this.createFontString(this.options.title.font);\r\n    this.labelFont = this.createFontString(this.options.labels.font);\r\n    this.legendFont = this.createFontString(this.options.legend.font);\r\n    this.yAxes.map(e => e.updateFonts());\r\n    this.xAxes.map(e => e.updateFonts());\r\n};\r\n\r\nTayberry.prototype.setOptions = function (options) {\r\n    let optionOverrides = [this.defaultOptions()];\r\n    if (!options.presets) {\r\n        options.presets = ['default'];\r\n    }\r\n    if (options.presets) {\r\n        for (let index = 0; index < options.presets.length; index++) {\r\n            optionOverrides.push(Tayberry.presets[options.presets[index]]);\r\n        }\r\n    }\r\n    optionOverrides.push(options);\r\n    this.options = Utils.deepAssign({}, optionOverrides);\r\n    this.options.title.font = Utils.deepAssign({}, [this.options.font, this.options.title.font]);\r\n    this.options.tooltips.font = Utils.deepAssign({}, [this.options.font, this.options.tooltips.font]);\r\n    this.options.labels.font = Utils.deepAssign({}, [this.options.font, this.options.labels.font]);\r\n    this.options.legend.font = Utils.deepAssign({}, [this.options.font, this.options.legend.font]);\r\n    this.options.allAxes.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.font]);\r\n    this.options.allAxes.title.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.title.font]);\r\n    if (!Array.isArray(this.options.yAxis))\r\n        this.options.yAxis = [this.options.yAxis || {}];\r\n    if (!Array.isArray(this.options.xAxis))\r\n        this.options.xAxis = [this.options.xAxis || {}];\r\n    for (let i = 0; i < this.options.yAxis.length; i++) {\r\n        this.options.yAxis[i] = Utils.deepAssign({}, [i === 0 ? Tayberry.defaultPrimaryYAxis : Tayberry.defaultSecondaryYAxis, this.options.allAxes, this.options.yAxis[i]]);\r\n    }\r\n    for (let i = 0; i < this.options.xAxis.length; i++) {\r\n        this.options.xAxis[i] = Utils.deepAssign({}, [Tayberry.defaultXAxis, this.options.allAxes, this.options.xAxis[i]]);\r\n    }\r\n    for (let i = 0; i < this.options.series.length; i++) {\r\n        this.options.series[i] = Utils.deepAssign({}, [Tayberry.defaultSeries, this.options.series[i]]);\r\n    }\r\n\r\n    this.yAxes = [];\r\n    this.xAxes = [];\r\n    for (let i = 0; i < this.options.xAxis.length; i++) {\r\n        this.xAxes.push(Axis.create(this, this.options.xAxis[i], i, 'x', this.options.swapAxes));\r\n    }\r\n    for (let i = 0; i < this.options.yAxis.length; i++) {\r\n        this.yAxes.push(Axis.create(this, this.options.yAxis[i], i, 'y', this.options.swapAxes));\r\n    }\r\n    this.updateFonts();\r\n    this.createRenderers();\r\n    this.calculatePlotArea();\r\n    this.callbacks['onInit'].forEach(func => func());\r\n    this.plotCanvas.addEventListener('click', this.onClickReal = this.onClick.bind(this));\r\n    this.plotCanvas.addEventListener('mousemove', this.onMouseMoveReal = this.onMouseMove.bind(this));\r\n    this.plotCanvas.addEventListener('mouseleave', this.onMouseLeaveReal = this.onMouseLeave.bind(this));\r\n    //this.plotCanvas.addEventListener('touchstart', this.onTouchStartReal = this.onTouchStart.bind(this));\r\n    window.addEventListener('resize', this.onWindowResizeReal = Utils.throttle(this.onWindowResize, 50).bind(this));\r\n};\r\n\r\nTayberry.calculateHighlightColour = function (colour) {\r\n    let newColour = new Colour(colour);\r\n    return newColour.increaseBy(30 * (newColour.sum >= 180 * 3 ? -1 : 1)).toString();\r\n};\r\n\r\nTayberry.calculateGlowColour = function (highlightColour) {\r\n    let newColour = new Colour(highlightColour);\r\n    newColour.a = 0.4;\r\n    return newColour.toString();\r\n};\r\n\r\nTayberry.prototype.createRenderers = function () {\r\n    let series, groupedSeries = {'bar': [], 'line': []};\r\n    if (!Array.isArray(this.options.series)) {\r\n        series = [this.options.series];\r\n    } else {\r\n        series = this.options.series;\r\n    }\r\n\r\n    for (let i = 0; i < series.length; i++) {\r\n        const curSeries = series[i];\r\n        curSeries.index = i;\r\n        curSeries.colour = curSeries.colour || Tayberry.getAutoColour();\r\n        curSeries.highlightColour = curSeries.highlightColour || Tayberry.calculateHighlightColour(curSeries.colour);\r\n        curSeries.glowColour = curSeries.glowColour || Tayberry.calculateGlowColour(curSeries.highlightColour);\r\n        curSeries.rState = {\r\n            colour: curSeries.colour,\r\n            highlightColour: curSeries.highlightColour,\r\n            glowColour: curSeries.glowColour\r\n        };\r\n        curSeries.xAxis = this.xAxes[curSeries.xAxisIndex || 0];\r\n        curSeries.yAxis = this.yAxes[curSeries.yAxisIndex || 0];\r\n        curSeries.plotType = curSeries.plotType || this.options.plotType;\r\n        if (groupedSeries.hasOwnProperty(curSeries.plotType)) {\r\n            groupedSeries[curSeries.plotType].push(curSeries);\r\n        }\r\n    }\r\n    if (groupedSeries['bar'].length) {\r\n        this.renderers.push(new BarRenderer(this.plotCtx, this, groupedSeries['bar']));\r\n    }\r\n    if (groupedSeries['line'].length) {\r\n        this.renderers.push(new LineRenderer(this.plotCtx, this, groupedSeries['line']));\r\n    }\r\n};\r\n\r\nTayberry.prototype.getDataMinMax = function (axis) {\r\n    var minNormal, maxNormal, minStacked, maxStacked;\r\n    if (this.options.barPlot.mode === 'stacked') {\r\n        let seriesPositiveTotals = [];\r\n        let seriesNegativeTotals = [];\r\n        const barSeries = this.options.series.filter(series => series.plotType === 'bar' && series.yAxis === axis);\r\n        if (barSeries.length) {\r\n            for (let categoryIndex = 0; categoryIndex < barSeries[0].data.length; categoryIndex++) {\r\n                seriesPositiveTotals[categoryIndex] = 0;\r\n                seriesNegativeTotals[categoryIndex] = 0;\r\n                for (let seriesIndex = 0; seriesIndex < barSeries.length; seriesIndex++) {\r\n                    const value = Tayberry.getDataValue(barSeries[seriesIndex].data[categoryIndex]);\r\n                    if (!Utils.isMissingValue(value)) {\r\n                        if (value < 0) {\r\n                            seriesNegativeTotals[categoryIndex] += value;\r\n                        } else {\r\n                            seriesPositiveTotals[categoryIndex] += value;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        minStacked = Math.min(0, Utils.reduce(seriesNegativeTotals, Math.min, undefined, true));\r\n        maxStacked = Math.max(Utils.reduce(seriesPositiveTotals, Math.max, undefined, true), 0);\r\n    }\r\n    {\r\n        let seriesMinima = [];\r\n        let seriesMaxima = [];\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            if (series.yAxis === axis && (series.plotType !== 'bar' || this.options.barPlot.mode !== 'stacked')) {\r\n                seriesMinima.push(Utils.reduce(series.data, Math.min, Tayberry.getDataValue, true));\r\n                seriesMaxima.push(Utils.reduce(series.data, Math.max, Tayberry.getDataValue, true));\r\n            }\r\n        }\r\n        minNormal = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n        maxNormal = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n    }\r\n    const min = Utils.reduce([minNormal, minStacked], Math.min, undefined, true);\r\n    const max = Utils.reduce([maxNormal, maxStacked], Math.max, undefined, true);\r\n    return [min, max];\r\n};\r\n\r\nTayberry.prototype.getDataXMinMax = function (axis) {\r\n    var min, max;\r\n    const seriesMinima = [];\r\n    const seriesMaxima = [];\r\n    for (let index = 0; index < this.options.series.length; index++) {\r\n        const series = this.options.series[index];\r\n        if (series.xAxis === axis) {\r\n            seriesMinima.push(Utils.reduce(series.data, Math.min, Tayberry.getDataXValue, true));\r\n            seriesMaxima.push(Utils.reduce(series.data, Math.max, Tayberry.getDataXValue, true));\r\n        }\r\n    }\r\n    min = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n    max = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n    return [min, max];\r\n};\r\n\r\n\r\nTayberry.prototype.createTooltip = function () {\r\n    if (this.tooltipElement) {\r\n        this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n        this.tooltipElement = null;\r\n    }\r\n    this.tooltipElement = document.createElement('div');\r\n    this.tooltipElement.className = 'tayberry-tooltip';\r\n    this.tooltipElement.style.position = 'absolute';\r\n    this.tooltipElement.style.left = '0px';\r\n    this.tooltipElement.style.top = '0px';\r\n    this.tooltipElement.style.zIndex = '99999';\r\n    this.tooltipElement.style.font = this.createFontString(this.options.tooltips.font, true);\r\n    this.tooltipElement.style.borderRadius = '3px';\r\n    this.tooltipElement.style.backgroundColor = 'white';\r\n    this.tooltipElement.style.border = '2px solid #bbb';\r\n    this.tooltipElement.style.padding = '0.15em 0.4em';\r\n    this.tooltipElement.style.display = 'none';\r\n    this.tooltipElement.innerHTML = '';\r\n    document.body.appendChild(this.tooltipElement);\r\n    this.tooltipElement.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.tooltipElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n};\r\n","'use strict';\r\nimport {Tayberry} from './base';\r\nimport {Rect} from './helpers/rect';\r\n\r\nTayberry.prototype.getTextWidth = function (text, fontString) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.labelsCtx.measureText(text).width;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.getMultilineTextHeight = function (fontString, maxWidth, text) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.splitMultilineText(maxWidth, text).length;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\n\r\nTayberry.prototype.splitMultilineText = function (maxWidth, text) {\r\n    let lines = [];\r\n    let lineWidth = 0;\r\n    let lineText = '';\r\n    const spaceWidth = this.labelsCtx.measureText(' ').width;\r\n    for (let i = 0; i < text.length;) {\r\n        const wordStart = i;\r\n        while (i < text.length && text[i] !== ' ' && text[i] !== '\\r' && text[i] !== '\\n') i++;\r\n        const wordEnd = i;\r\n        while (i < text.length && (text[i] === ' ' || text[i] === '\\r' || text[i] === '\\n')) i++;\r\n        if (wordEnd > wordStart) {\r\n            const word = text.substring(wordStart, wordEnd);\r\n            const wordWidth = this.labelsCtx.measureText(word).width;\r\n            if (lineWidth + wordWidth > maxWidth) {\r\n                if (!lineWidth) {\r\n                    lineText = word;\r\n                }\r\n                lines.push(lineText);\r\n                if (lineWidth) {\r\n                    lineWidth = 0;\r\n                    lineText = word;\r\n                }\r\n            } else {\r\n                lineText += (lineText ? ' ' : '') + word;\r\n                lineWidth += wordWidth + spaceWidth;\r\n            }\r\n        }\r\n    }\r\n    if (lineText) {\r\n        lines.push(lineText);\r\n    }\r\n    return lines;\r\n};\r\n\r\nTayberry.prototype.drawTextMultiline = function (lineHeight, x, y, maxWidth, text) {\r\n    let lines = this.splitMultilineText(maxWidth, text);\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n        let line = lines[i];\r\n        this.labelsCtx.fillText(line, x, y + lineHeight * i);\r\n    }\r\n};\r\n\r\nTayberry.prototype.render = function () {\r\n    this.drawLabelLayer();\r\n    this.createTooltip();\r\n    if (this.options.animations.enabled) {\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            this.setSeriesVisibility(series, true, 'height');\r\n        }\r\n    } else {\r\n        this.drawPlotLayer();\r\n    }\r\n};\r\n\r\nTayberry.prototype.clear = function (plot = true, labels = true) {\r\n    if (plot) this.plotCtx.clearRect(0, 0, this.plotCanvas.width, this.plotCanvas.height);\r\n    if (labels) this.labelsCtx.clearRect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n};\r\n\r\nTayberry.prototype.drawBackground = function () {\r\n    if (this.options.plotBackgroundColour) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.fillStyle = this.options.plotBackgroundColour;\r\n        this.labelsCtx.fillRect(this.plotArea.left, this.plotArea.top, this.plotArea.width, this.plotArea.height);\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawTitle = function () {\r\n    if (this.options.title.text) {\r\n        const x = (this.labelsCanvas.width) / 2, y = 0;\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.textAlign = 'center';\r\n        this.labelsCtx.textBaseline = 'top';\r\n        this.labelsCtx.font = this.titleFont;\r\n        this.labelsCtx.fillStyle = this.options.title.font.colour;\r\n        this.drawTextMultiline(this.getFontHeight(this.options.title.font), x, y, this.labelsCanvas.width, this.options.title.text);\r\n        // this.labelsCtx.fillText(this.options.title.text, x, y);\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawPlotLayer = function () {\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].drawPlot();\r\n    }\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].drawLabels();\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.drawLine = function (x1, y1, x2, y2, colour, ctx = this.labelsCtx) {\r\n    ctx.save();\r\n    if (colour) {\r\n        ctx.strokeStyle = colour;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1 + 0.5, y1 + 0.5);\r\n    ctx.lineTo(x2 + 0.5, y2 + 0.5);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n};\r\n\r\nTayberry.prototype.drawLabelLayer = function () {\r\n    this.drawBackground();\r\n    this.drawTitle();\r\n    let offsetRect = new Rect(0);\r\n    this.xAxes.map(e => e.draw(offsetRect));\r\n    this.yAxes.map(e => e.draw(offsetRect));\r\n    this.drawLegend();\r\n};\r\n\r\nTayberry.prototype.redraw = function (plotOnly) {\r\n    this.clear(true, !plotOnly);\r\n    if (!plotOnly) {\r\n        this.drawLabelLayer();\r\n    }\r\n    this.drawPlotLayer();\r\n};\r\n\r\n","'use strict';\r\nimport {Rect} from './helpers/rect';\r\nimport * as Utils from './helpers/utils.js';\r\n\r\nimport {Tayberry} from './base';\r\n\r\nTayberry.prototype.registerCallback = function (eventName, func) {\r\n    this.callbacks[eventName].push(func);\r\n};\r\n\r\nTayberry.prototype.onMouseLeave = function (event) {\r\n    if ((event.currentTarget == this.plotCanvas && event.relatedTarget !== this.tooltipElement) || (event.currentTarget == this.tooltipElement && event.relatedTarget !== this.plotCanvas)) {\r\n        this.selectedItem = {};\r\n        this.tooltipElement.style.display = 'none';\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.handleMouseMove = function (clientX, clientY) {\r\n    let boundingRect = new Rect(this.plotCanvas.getBoundingClientRect());\r\n    let ret = false;\r\n    let tooltipDisplayStyle = 'none';\r\n    if (boundingRect.containsPoint(clientX, clientY)) {\r\n        let x = clientX - boundingRect.left;\r\n        let y = clientY - boundingRect.top;\r\n\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            if (hitTestResult.type === 'legend') {\r\n                this.selectedItem = hitTestResult;\r\n                ret = true;\r\n            } else if (hitTestResult.type === 'plotItem') {\r\n                let tooltipHtml = '';\r\n                const aboveZero = hitTestResult.rect.top < hitTestResult.rect.bottom;\r\n                tooltipDisplayStyle = 'block';\r\n                if (this.options.tooltips.shared) {\r\n                    const category = this.xAxes[0].getCategoryLabel(hitTestResult.categoryIndex, this.categoryCount, hitTestResult.isXRange);\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n                    for (let index = 0; index < this.seriesCount; index++) {\r\n                        const series = this.options.series[index];\r\n                        const value = Tayberry.getDataValue(series.data[hitTestResult.categoryIndex]);\r\n                        tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                            value: series.yAxis.options.labelFormatter(value),\r\n                            name: series.name,\r\n                            colour: series.colour\r\n                        }, true);\r\n                    }\r\n                } else {\r\n                    const series = hitTestResult.series;\r\n                    const value = hitTestResult.value;\r\n                    const category = series.xAxis.getCategoryLabel(hitTestResult.categoryIndex, this.categoryCount, hitTestResult.isXRange);\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                        value: series.yAxis.options.labelFormatter(value),\r\n                        name: series.name,\r\n                        colour: series.colour\r\n                    }, true);\r\n                }\r\n                tooltipHtml += this.options.tooltips.footerTemplate;\r\n                this.tooltipElement.innerHTML = tooltipHtml;\r\n                let tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n                if (!this.options.tooltips.shared) {\r\n                    this.tooltipElement.style.borderColor = hitTestResult.series.colour;\r\n                }\r\n                this.tooltipElement.style.left = window.pageXOffset + boundingRect.left + this.mapScreenUnit(hitTestResult.rect.width) / 2 + hitTestResult.rect.left / this.scaleFactor - tooltipRect.width / 2 + 'px';\r\n                this.tooltipElement.style.top = window.pageYOffset + boundingRect.top + this.mapScreenUnit(hitTestResult.rect.top) - tooltipRect.height * (aboveZero ? 1 : 0) - this.options.elementSmallPadding * (aboveZero ? 1 : -1) + 'px';\r\n                this.selectedItem = hitTestResult;\r\n                ret = true;\r\n            }\r\n        }\r\n    }\r\n    this.tooltipElement.style.display = tooltipDisplayStyle;\r\n    return ret;\r\n};\r\n\r\n\r\n//Tayberry.prototype.onTouchStart = function (event) {\r\n//    for (let index = 0; index < event.targetTouches.length; index++) {\r\n//        let touch = event.targetTouches[index];\r\n//        if (this.handleMouseMove(touch.clientX, touch.clientY)) {\r\n//            // event.preventDefault();\r\n//            this.redraw();\r\n//            break;\r\n//        }\r\n//    }\r\n//};\r\n\r\nTayberry.prototype.onClick = function (event) {\r\n    let boundingRect = new Rect(this.plotCanvas.getBoundingClientRect());\r\n    // Why is event.buttons always 0?\r\n    if ((event.button === 0) && boundingRect.containsPoint(event.clientX, event.clientY)) {\r\n        let x = event.clientX - boundingRect.left;\r\n        let y = event.clientY - boundingRect.top;\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            if (hitTestResult.type === 'legend') {\r\n                const series = hitTestResult.data.series;\r\n\r\n                this.toggleSeriesVisibility(series);\r\n                this.clear(false, true);\r\n                this.drawLabelLayer();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.prototype.onMouseMove = function (event) {\r\n    let oldSelectedItem = Utils.assign({}, this.selectedItem);\r\n    if (!this.handleMouseMove(event.clientX, event.clientY)) {\r\n        this.selectedItem = {};\r\n    }\r\n\r\n    if (oldSelectedItem.type !== this.selectedItem.type ||\r\n        oldSelectedItem.categoryIndex !== this.selectedItem.categoryIndex ||\r\n        oldSelectedItem.series !== this.selectedItem.series) {\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.onWindowResize = function () {\r\n    this.tooltipElement.style.display = 'none';\r\n    this.labelsCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.labelsCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.plotCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.plotCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.initialise();\r\n    this.updateFonts();\r\n    this.calculatePlotArea();\r\n    this.createTooltip();\r\n    this.callbacks['onResize'].forEach(func => func());\r\n    this.redraw();\r\n};\r\n","'use strict';\r\nimport {Tayberry} from './base';\r\nimport * as Utils from './helpers/utils.js';\r\nimport * as constants from './constants';\r\n\r\nTayberry.prototype.defaultOptions = function () {\r\n    return {\r\n        title: {\r\n            text: '',\r\n            font: {\r\n                size: 20\r\n            }\r\n        },\r\n        font: {\r\n            colour: '#444',\r\n            size: 12,\r\n            face: 'sans-serif',\r\n            style: '',\r\n            autoScale: true\r\n        },\r\n        allAxes: {\r\n            font: {},\r\n            title: {\r\n                font: {}\r\n            }\r\n        },\r\n        xAxis: [],\r\n        yAxis: [],\r\n        animations: {\r\n            enabled: true\r\n        },\r\n        series: [],\r\n        backgroundColour: undefined,\r\n        swapAxes: false,\r\n        plotType: 'bar',\r\n        barPlot: {\r\n            mode: 'normal', //[normal|stacked|overlaid]\r\n            barPadding: 2,\r\n            categorySpacing: 0.3\r\n        },\r\n        linePlot: {\r\n            lineWidth: 2,\r\n            highlightedLineWidth: 4,\r\n            showMarkers: 'auto',\r\n            noMarkersThreshold: 100,\r\n            markerSize: 10,\r\n            highlightedMarkerSize: 18\r\n        },\r\n        elementSmallPadding: 5,\r\n        elementLargePadding: 10,\r\n        presets: [],\r\n        tooltips: {\r\n            shared: false,\r\n            headerTemplate: '<strong>{category}</strong><table>',\r\n            valueTemplate: '<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">\\u25CF</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',\r\n            footerTemplate: '</table>',\r\n            font: {}\r\n        },\r\n        legend: {\r\n            enabled: true,\r\n            indicatorSize: 15,\r\n            font: {},\r\n            hiddenAlphaMultiplier: 0.5\r\n        },\r\n        labels: {\r\n            enabled: false,\r\n            verticalAlignment: 'top',\r\n            verticalPosition: 'outside',\r\n            font: {}\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.defaultSeries = {\r\n    visible: constants.visibilityState.visible\r\n};\r\n\r\nTayberry.defaultXAxis = {\r\n    title: {\r\n        text: '',\r\n        font: {}\r\n    },\r\n    type: 'categorial',\r\n    min: null,\r\n    max: null,\r\n    tickStep: 40,\r\n    tickStepValue: null,\r\n    font: {},\r\n    categories: [],\r\n    labelPosition: 'middle', //left|middle|right\r\n    placement: 'auto',\r\n    gridLines: {}\r\n};\r\n\r\nTayberry.defaultYAxis = {\r\n    title: {\r\n        text: '',\r\n        font: {}\r\n    },\r\n    min: undefined,\r\n    max: undefined,\r\n    tickStep: 40,\r\n    tickStepValue: null,\r\n    font: {},\r\n    labelFormat: 'number', //[number|percentage|currency],\r\n    labelFormatter: undefined,\r\n    labelPrefix: undefined,\r\n    labelSuffix: undefined,\r\n    currencySymbol: '£',\r\n    placement: 'auto',\r\n    type: 'linear',\r\n    gridLines: {}\r\n\r\n};\r\n\r\nTayberry.defaultPrimaryYAxis = Utils.deepAssign({}, [Tayberry.defaultYAxis, {\r\n    gridLines: {\r\n        colour: '#ccc'\r\n    }\r\n}]);\r\n\r\nTayberry.defaultSecondaryYAxis = Tayberry.defaultYAxis;\r\n\r\nTayberry.presets = {\r\n    histogram: {\r\n        barPlot: {\r\n            mode: 'overlaid',\r\n            categorySpacing: 0,\r\n            barPadding: 1\r\n        }\r\n    },\r\n    darkGrid: {\r\n        allAxes: {\r\n            gridLines: {\r\n                colour: 'rgba(255, 255, 255, 0.6)'\r\n            }\r\n        },\r\n        plotBackgroundColour: '#E5E5E5'\r\n    }\r\n};\r\n\r\nTayberry.defaultColours = [\r\n    '#6FE87B', //green\r\n    '#FFAB51', //orange\r\n    '#51A8FF', //blue\r\n    '#B651FF', //purple\r\n    '#FF6051', //red\r\n    '#636363', //dark grey\r\n    '#FFE314', //yellow\r\n    '#A88572', //brown\r\n    '#B7B7B7' //light grey\r\n];\r\n","'use strict';\r\nimport {Rect} from './helpers/rect';\r\nimport {Tayberry} from './base';\r\nimport * as Utils from './helpers/utils.js';\r\n\r\nTayberry.mapVerticalPosition = function (sign, position) {\r\n    switch (position) {\r\n        case \"outside\":\r\n            return sign > 0 ? \"bottom\" : \"top\";\r\n        case \"inside\":\r\n            return sign > 0 ? \"top\" : \"bottom\";\r\n        default:\r\n            return \"middle\";\r\n    }\r\n};\r\n\r\nTayberry.prototype.mapLogicalXUnit = function (x) {\r\n    return this.scaleFactorX * x;\r\n};\r\n\r\nTayberry.prototype.mapLogicalYUnit = function (x) {\r\n    return this.scaleFactorY * x;\r\n};\r\n\r\nTayberry.prototype.mapScreenUnit = function (x) {\r\n    return x / this.scaleFactor;\r\n};\r\n\r\nTayberry.prototype.calculatePlotArea = function () {\r\n    const MAX_AXIS_CALC_SIZE_ATTEMPTS = 5;\r\n\r\n    this.plotArea = new Rect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n    if (this.options.title.text) {\r\n        this.plotArea.top += this.mapLogicalYUnit(this.options.elementSmallPadding);\r\n        this.plotArea.top += this.getFontHeight(this.options.title.font) * this.getMultilineTextHeight(this.titleFont, this.labelsCanvas.width, this.options.title.text);\r\n    }\r\n    if (this.options.legend.enabled)\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.elementLargePadding + this.options.legend.indicatorSize);\r\n\r\n    this.yAxes.map(e => e.adjustSize(this.plotArea, true, true));\r\n    this.xAxes.map(e => e.adjustSize(this.plotArea, true, true));\r\n\r\n    for (let i = 0; i < MAX_AXIS_CALC_SIZE_ATTEMPTS; i++) {\r\n        this.yAxes.map(e => e.calculateExtent());\r\n        this.xAxes.map(e => e.calculateExtent());\r\n        this.yAxes.map(e => e.updateFormatter());\r\n        this.xAxes.map(e => e.updateFormatter());\r\n        if (Utils.none(this.yAxes.map(e => e.adjustSize(this.plotArea))) && Utils.none(this.xAxes.map(e => e.adjustSize(this.plotArea))))\r\n            break;\r\n    }\r\n    this.plotArea.left = Math.ceil(this.plotArea.left);\r\n    this.plotArea.top = Math.ceil(this.plotArea.top);\r\n    this.plotArea.right = Math.floor(this.plotArea.right);\r\n    this.plotArea.bottom = Math.floor(this.plotArea.bottom);\r\n};\r\n\r\nTayberry.prototype.hitTest = function (x, y) {\r\n    let ret = {\r\n        found: false\r\n    };\r\n    let matches = [];\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        const hitTestResult = this.renderers[i].hitTest(x, y);\r\n        if (hitTestResult.found) {\r\n            matches.push(hitTestResult);\r\n        }\r\n    }\r\n    matches.push(this.hitTestLegend(x, y));\r\n    if (matches.length) {\r\n        matches.sort((a, b) => !a.found - !b.found || a.normalisedDistance - b.normalisedDistance);\r\n        ret = matches[0];\r\n    }\r\n    return ret;\r\n};\r\n\r\n","'use strict';\r\nimport {Tayberry} from './base';\r\nimport {Rect} from './helpers/rect';\r\nimport * as Utils from './helpers/utils.js';\r\nimport * as constants from './constants';\r\nimport {Colour} from './helpers/colour';\r\n\r\nTayberry.prototype.drawLegend = function () {\r\n    if (this.options.legend.enabled) {\r\n        let legendMetrics = this.getLegendMeasurements();\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = this.legendFont;\r\n\r\n        for (let index = 0; index < legendMetrics.items.length; index++) {\r\n            const item = legendMetrics.items[index];\r\n            const series = item.series;\r\n            const highlighted = this.selectedItem.type === 'legend' && this.selectedItem.data.series === series;\r\n            series.renderer.drawLegendIndicator(this.labelsCtx, series, item.indicatorRect, highlighted);\r\n            this.labelsCtx.textBaseline = 'middle';\r\n            this.labelsCtx.fillStyle = this.options.legend.font.colour;\r\n            if (!(series.visible & constants.visibilityState.visible))\r\n                this.labelsCtx.fillStyle = (new Colour(this.labelsCtx.fillStyle)).multiplyAlpha(this.options.legend.hiddenAlphaMultiplier).toString();\r\n            this.labelsCtx.fillText(series.name, item.textX, item.textY);\r\n        }\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.hitTestLegend = function (x, y) {\r\n    let ret = {\r\n        found: false,\r\n        type: 'legend'\r\n    };\r\n    const legendMetrics = this.getLegendMeasurements();\r\n    if (legendMetrics.rect.containsPoint(x, y)) {\r\n        for (let index = 0; index < legendMetrics.items.length; index++) {\r\n            const item = legendMetrics.items[index];\r\n            if (item.rect.containsPoint(x, y)) {\r\n                Utils.assign(ret, [{found: true, normalisedDistance: -5, data: item}]);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.getLegendMeasurements = function () {\r\n    let ret = {\r\n        rect: new Rect(0),\r\n        items: []\r\n    };\r\n    if (this.options.legend.enabled) {\r\n        const smallPadding = this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n        const largePadding = this.mapLogicalXUnit(this.options.elementLargePadding);\r\n        let totalWidth = 0;\r\n        const indicatorSize = this.mapLogicalXUnit(this.options.legend.indicatorSize);\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            let textWidth = 0;\r\n            if (series.name) {\r\n                textWidth = this.getTextWidth(series.name, this.legendFont);\r\n                totalWidth += textWidth + indicatorSize + smallPadding + largePadding;\r\n                ret.items.push({textWidth: textWidth, series: series});\r\n            }\r\n        }\r\n        let x = this.plotArea.left + this.plotArea.width / 2 - totalWidth / 2,\r\n            y = this.labelsCanvas.height - indicatorSize;\r\n\r\n        ret.rect.left = x;\r\n        ret.rect.right = x + totalWidth;\r\n        ret.rect.top = y;\r\n        ret.rect.bottom = y + indicatorSize;\r\n\r\n        for (let index = 0; index < ret.items.length; index++) {\r\n            let item = ret.items[index];\r\n            item.rect = new Rect(x, ret.rect.top, x + indicatorSize + smallPadding + item.textWidth, ret.rect.bottom);\r\n            item.indicatorRect = new Rect(x, ret.rect.top, x + indicatorSize, ret.rect.bottom);\r\n            x += indicatorSize + smallPadding;\r\n            item.textX = x;\r\n            item.textY = y + indicatorSize / 2;\r\n\r\n            x += ret.items[index].textWidth + largePadding;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n","'use strict';\r\nimport {Tayberry} from './base';\r\nimport * as Utils from './helpers/utils.js';\r\nimport * as constants from './constants';\r\n\r\nTayberry.prototype.revokeAnimation = function (series) {\r\n    for (let index = this.pendingAnimations.length; index; index--) {\r\n        if (this.pendingAnimations[index-1].series === series) {\r\n            this.pendingAnimations.splice(index-1, 1);\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.prototype.startAnimation = function (animation) {\r\n    animation.initialStage = animation.initialStage || 0;\r\n    var newAnimation = Utils.assign({}, [{\r\n        length: 500*(1-animation.initialStage),\r\n        startTime: (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') ? performance.now() : null\r\n    },\r\n        animation\r\n    ]);\r\n    this.pendingAnimations.push(newAnimation);\r\n    if (!this.animator)\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    return newAnimation;\r\n};\r\n\r\nTayberry.prototype.onAnimate = function (timestamp) {\r\n    var elapsed;\r\n    for (let index = this.pendingAnimations.length - 1; index >= 0; index--) {\r\n        let animation = this.pendingAnimations[index];\r\n        if (animation.startTime === null) {\r\n            animation.startTime = timestamp;\r\n        }\r\n        elapsed = timestamp - animation.startTime;\r\n        if (animation.onFrame) {\r\n            animation.onFrame(animation.initialStage + Math.min(elapsed / animation.length, 1) * (1 - animation.initialStage));\r\n        }\r\n        if (elapsed >= animation.length) {\r\n            this.pendingAnimations.splice(index, 1);\r\n            if (animation.onCompletion) {\r\n                animation.onCompletion();\r\n            }\r\n        }\r\n    }\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].onAnimationFrame();\r\n    }\r\n    this.redraw(true);\r\n    if (this.pendingAnimations.length) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    } else {\r\n        this.animator = null;\r\n    }\r\n};\r\n\r\nTayberry.prototype.setSeriesVisibility = function(series, visible, subtype) {\r\n    series.visible = visible ? constants.visibilityState.visible : constants.visibilityState.hidden;\r\n    series.visible |= constants.visibilityState.transitioning;\r\n\r\n    if (series.animationState) {\r\n        const newType = visible ? 'show' : 'hide';\r\n        if (series.animationState.type !== newType) {\r\n            series.animationState.type = newType;\r\n            series.animationState.stage = 1 - series.animationState.stage;\r\n\r\n            delete series.animationState.animator;\r\n            this.revokeAnimation(series);\r\n        }\r\n    } else {\r\n        series.animationState = {\r\n            type: (series.visible & constants.visibilityState.visible) ? 'show' : 'hide',\r\n            subtype: subtype,\r\n            stage: 0\r\n        };\r\n    }\r\n    if (!series.animationState.animator) {\r\n        series.animationState.animator = this.startAnimation({\r\n            type: visible ? 'showSeries' : 'hideSeries',\r\n            series: series,\r\n            initialStage: series.animationState.stage,\r\n            onFrame: (stage) => series.animationState.stage = stage,\r\n            onCompletion: () => {\r\n                series.visible = (series.visible & ~constants.visibilityState.transitioning);\r\n                delete series.animationState;\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nTayberry.prototype.toggleSeriesVisibility = function(series) {\r\n    this.setSeriesVisibility(series, !(series.visible & constants.visibilityState.visible))\r\n};\r\n","import {Tayberry as TayberryBase} from './base';\r\nimport './axis';\r\nimport './core';\r\nimport './drawing';\r\nimport './events';\r\nimport './defaults';\r\nimport './sizing';\r\nimport './legend';\r\nimport './animation';\r\nimport './renderer.base';\r\nimport './renderer.bar';\r\nimport './renderer.line';\r\n\r\n\r\nlet Tayberry = {\r\n    /**\r\n     * Creates a Tayberry chart\r\n     *\r\n     * @param element   ID of container div, or HTMLElement\r\n     * @param options   Options object\r\n     */\r\n    create: function (element, options) {\r\n        let chart = new TayberryBase();\r\n        chart.create(element);\r\n        chart.setOptions(options);\r\n        chart.render();\r\n    }\r\n};\r\n\r\nexport default Tayberry;"],"names":["Tayberry","Utils.reduce","Utils.identity","Utils.createPercentageFormatter","Utils.createFixedNumberFormatter","Utils.createAutoNumberFormatter","Utils.isMissingValue","Utils.formatString","Utils.coalesce","constants.visibilityState","Utils.assign","renderer.Renderer","renderer.ByCategoryEnumerator","renderer.BySeriesEnumerator","Utils.deepAssign","Utils.throttle","Utils.none","TayberryBase"],"mappings":"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","sourceRoot":"/source/"}