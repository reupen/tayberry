{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/axis.js","src/base.js","src/core.js","src/defaults.js","src/drawing.js","src/events.js","src/helpers/colour.js","src/helpers/easing.js","src/helpers/rect.js","src/helpers/utils.js","src/renderer.bar.js","src/renderer.base.js","src/renderer.line.js","src/sizing.js","src/tayberry.js"],"names":[],"mappings":"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","file":"tayberry.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\nvar Utils = require('./helpers/utils.js');\r\n\r\nclass Axis {\r\n    static create(tayberry, options, index, axisType, xYSwapped) {\r\n        const isHorizontal = (axisType === 'x' && !xYSwapped) || (axisType === 'y' && xYSwapped);\r\n        if (options.type === 'linear')\r\n            return new LinearAxis(tayberry, index, options, axisType, isHorizontal);\r\n        else\r\n            return new CategorialAxis(tayberry, index, options, axisType, isHorizontal);\r\n    }\r\n\r\n    constructor(tayberry, index, options, axisType, isHorizontal) {\r\n        this.tayberry = tayberry;\r\n        this.options = options;\r\n        this.axisType = axisType;\r\n        this.isHorizontal = isHorizontal;\r\n        this.index = index;\r\n        this.tickStep = null;\r\n        this.min = null;\r\n        this.max = null;\r\n        this.tickStart = null;\r\n        this.tickEnd = null;\r\n        this.calculatedSize = 0;\r\n        this.topAdjustment = 0;\r\n        this.rightAdjustment = 0;\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.numLabelLines = 1;\r\n\r\n        this.setPlacement();\r\n    }\r\n\r\n    updateFonts() {\r\n        this.labelFont = this.tayberry.createFontString(this.options.font);\r\n        this.titleFont = this.tayberry.createFontString(this.options.title.font);\r\n    }\r\n\r\n    setPlacement() {\r\n        const validAndSpecificPlacements = ['left', 'right', 'top', 'bottom', 'start', 'end'];\r\n        if (validAndSpecificPlacements.indexOf(this.options.placement) === -1) {\r\n            this.options.placement = this.isVertical ^ (this.index > 0) ? 'start' : 'end';\r\n        }\r\n    }\r\n\r\n    get isPlacedAtStart() {\r\n        return this.options.placement === \"left\" || this.options.placement === \"bottom\" || this.options.placement === \"start\";\r\n    }\r\n\r\n    get isYAxis() {\r\n        return this.axisType === 'y';\r\n    }\r\n\r\n    get isVertical() {\r\n        return !this.isHorizontal;\r\n    }\r\n\r\n    maxLabelSize() {\r\n        let tb = this.tayberry;\r\n        let ticks = this.getTicks();\r\n        return Utils.reduce(ticks, Math.max, x => tb.getTextWidth(this.options.labelFormatter(x.value), this.labelFont));\r\n    }\r\n\r\n    mapLogicalXOrYUnit(x) {\r\n        return this.isVertical ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    mapLogicalYOrXUnit(x) {\r\n        return !this.isVertical ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    adjustSize(plotArea, fixedOnly, reset) {\r\n        let size = 0,\r\n            tb = this.tayberry,\r\n            ret;\r\n\r\n        const titleFontHeight = tb.getFontHeight(this.options.title.font);\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n\r\n        if (reset) {\r\n            this.calculatedSize = 0;\r\n            this.topAdjustment = 0;\r\n            this.rightAdjustment = 0;\r\n            this.numLabelLines = 1;\r\n        }\r\n\r\n        size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        if (this.options.title.text) {\r\n            size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) + titleFontHeight;\r\n        }\r\n\r\n        if (!fixedOnly) {\r\n            let ticks = this.getTicks(false);\r\n            if (this.isVertical) {\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const lastTickYStart = lastTick.y - fontHeight / 2;\r\n                    if (lastTickYStart < plotArea.top - this.topAdjustment) {\r\n                        const adjustment = plotArea.top - lastTickYStart - this.topAdjustment + 1;\r\n                        plotArea.top += adjustment;\r\n                        this.topAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += this.maxLabelSize()\r\n            } else {\r\n                {\r\n                    let lastXEnd;\r\n                    for (let i = 0; i < ticks.length; i++) {\r\n                        let tick = ticks[i];\r\n                        const textWidth = tb.getTextWidth(this.options.labelFormatter(tick.value), this.labelFont);\r\n                        const xStart = tick.x - textWidth / 2;\r\n                        const xEnd = tick.x + textWidth / 2;\r\n                        if (typeof lastXEnd !== 'undefined' && xStart <= lastXEnd + 1) {\r\n                            this.numLabelLines = 2;\r\n                            break;\r\n                        }\r\n                        lastXEnd = xEnd;\r\n                    }\r\n                }\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const textWidth = tb.getTextWidth(this.options.labelFormatter(lastTick.value), this.labelFont);\r\n                    const lastTickXEnd = lastTick.x + textWidth / 2;\r\n                    if (lastTickXEnd >= plotArea.right + this.rightAdjustment) {\r\n                        const adjustment = lastTickXEnd - plotArea.right - this.rightAdjustment + 1;\r\n                        plotArea.right -= adjustment;\r\n                        this.rightAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += fontHeight * this.numLabelLines;\r\n            }\r\n        }\r\n\r\n        if (this.isPlacedAtStart) {\r\n            if (this.isVertical) {\r\n                plotArea.left += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.top += size - this.calculatedSize;\r\n            }\r\n        } else {\r\n            size *= -1;\r\n            if (this.isVertical) {\r\n                plotArea.right += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.bottom += size - this.calculatedSize;\r\n            }\r\n        }\r\n\r\n        ret = this.calculatedSize !== size;\r\n        this.calculatedSize = size;\r\n\r\n        return ret;\r\n    }\r\n\r\n    calculateExtent() {\r\n    }\r\n\r\n    getCategoryLabel() {\r\n    }\r\n\r\n    draw(offsetRect) {\r\n        this.drawTicksAndLabels(offsetRect);\r\n        this.drawTitle(offsetRect);\r\n    }\r\n\r\n    drawTicksAndLabels(offsetRect) {\r\n        let tb = this.tayberry;\r\n        const labelPadding = this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        const labelPaddingX = this.isVertical ? labelPadding * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const labelPaddingY = !this.isVertical ? labelPadding * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n        const xOffset = this.isVertical ? offsetRect[this.startProperty] : 0;\r\n        const yOffset = !this.isVertical ? offsetRect[this.startProperty] : 0;\r\n\r\n        tb.labelsCtx.save();\r\n        tb.labelsCtx.font = this.labelFont;\r\n        tb.labelsCtx.fillStyle = this.options.font.colour;\r\n        tb.labelsCtx.textAlign = this.isVertical ? (this.isPlacedAtStart ? 'right' : 'left') : 'center';\r\n        tb.labelsCtx.textBaseline = this.isVertical ? 'middle' : this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n        let lastXEnds = [],\r\n            tickIndex = 0,\r\n            maxWidth = 0;\r\n\r\n        this.enumerateTicks((tick) => {\r\n            let xStart, xEnd;\r\n            const formattedValue = this.options.labelFormatter(tick.value);\r\n            const row = tickIndex % this.numLabelLines;\r\n            const rowOffset = this.isVertical ? 0 : fontHeight * row;\r\n            const textWidth = tb.getTextWidth(formattedValue, this.labelFont);\r\n            if (!this.isVertical) {\r\n                xStart = tick.x - textWidth / 2;\r\n                xEnd = tick.x + textWidth / 2;\r\n            }\r\n\r\n            if (this.isVertical || (typeof lastXEnds[row] === 'undefined' || xStart > lastXEnds[row] + 1) && xStart >= 0 && xEnd < tb.labelsCanvas.width) {\r\n                maxWidth = Math.max(maxWidth, textWidth);\r\n                tb.labelsCtx.fillText(formattedValue, tick.x + labelPaddingX + xOffset, tick.y + labelPaddingY + rowOffset + yOffset);\r\n                lastXEnds[row] = xEnd;\r\n            }\r\n            if (this.options.gridLines.colour)\r\n                tb.drawLine(tick.x1, tick.y1, tick.x2, tick.y2, this.options.gridLines.colour);\r\n            tickIndex++;\r\n        });\r\n\r\n        this.adjustOffsetRect(offsetRect, this.isVertical ? maxWidth + labelPadding : fontHeight + labelPadding);\r\n\r\n        tb.labelsCtx.restore();\r\n    }\r\n\r\n    adjustOffsetRect(offsetRect, displacement) {\r\n        offsetRect[this.startProperty] += this.isPlacedAtStart ? -displacement : displacement;\r\n    }\r\n\r\n    get startProperty() {\r\n        if (this.isVertical)\r\n            return this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    get endProperty() {\r\n        if (this.isVertical)\r\n            return !this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return !this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    drawTitle(offsetRect) {\r\n        if (this.options.title.text) {\r\n            let tb = this.tayberry;\r\n            tb.labelsCtx.save();\r\n            tb.labelsCtx.font = this.titleFont;\r\n            tb.labelsCtx.fillStyle = this.options.title.font.colour;\r\n            tb.labelsCtx.textAlign = 'center';\r\n\r\n            const labelPaddingSize = this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n            const labelPadding = labelPaddingSize * (this.isPlacedAtStart ? -1 : 1);\r\n            const xOffset = this.isVertical ? offsetRect[this.startProperty] : 0;\r\n            const yOffset = !this.isVertical ? offsetRect[this.startProperty] : 0;\r\n            const fontHeight = tb.getFontHeight(this.options.title.font);\r\n\r\n            if (this.isVertical) {\r\n                tb.labelsCtx.textBaseline = 'bottom';\r\n                const x = tb.plotArea[this.startProperty] + xOffset + labelPadding;\r\n                const y = tb.plotArea.yMidpoint + yOffset;\r\n                tb.labelsCtx.translate(x, y);\r\n                tb.labelsCtx.rotate((this.isPlacedAtStart ? -1 : 1)*Math.PI / 2);\r\n                tb.labelsCtx.fillText(this.options.title.text, 0, 0);\r\n            } else {\r\n                tb.labelsCtx.textBaseline = this.isPlacedAtStart ? 'bottom' : 'top';\r\n                const x = tb.plotArea.xMidpoint + xOffset;\r\n                const y = tb.plotArea[this.startProperty] + labelPadding + yOffset;\r\n                //tb.mapLogicalYOrXUnit(tb.options.font.size * 2 + tb.options.elementSmallPadding + tb.options.elementLargePadding)\r\n                tb.labelsCtx.fillText(this.options.title.text, x, y);\r\n            }\r\n            this.adjustOffsetRect(offsetRect, fontHeight + labelPaddingSize);\r\n            tb.labelsCtx.restore();\r\n        }\r\n    }\r\n\r\n    getTicks(visibleOnly = true) {\r\n        let ret = [];\r\n        this.enumerateTicks(function (tick) {\r\n            ret.push(tick)\r\n        }, visibleOnly);\r\n        return ret;\r\n    }\r\n\r\n    getOrigin() {\r\n    }\r\n\r\n    updateFormatter() {\r\n    }\r\n}\r\n\r\nclass CategorialAxis extends Axis {\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const categoryCount = this.options.categories.length;\r\n        let plotArea = tb.plotArea.clone();\r\n        if (this.isVertical)\r\n            plotArea.swapXY();\r\n        const categoryWidth = (plotArea.width / tb.categoryCount);\r\n        let factor = 0.5;\r\n\r\n        if (!this.isVertical) {\r\n            switch (this.options.labelPosition) {\r\n                case 'left':\r\n                    factor = 0;\r\n                    break;\r\n                case 'right':\r\n                    factor = 1;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < categoryCount; i++) {\r\n            const value = this.options.categories[i];\r\n            let y1 = (this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let y2 = (!this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let x1 = plotArea.left + Math.floor(i * categoryWidth);\r\n            let x2 = x1;\r\n            let x = plotArea.left + Math.floor(i * categoryWidth + categoryWidth * factor);\r\n            let y = y1;\r\n            if (this.isVertical)\r\n                [x1, y1, x2, y2, x, y] = [y1, x1, y2, x2, y, x];\r\n\r\n            callback({\r\n                value: value,\r\n                x1: x1,\r\n                y1: y1,\r\n                x2: x2,\r\n                y2: y2,\r\n                x: x,\r\n                y: y\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            this.options.labelFormatter = Utils.identity;\r\n        }\r\n    }\r\n\r\n    getCategoryLabel(index) {\r\n        return this.options.labelFormatter(this.options.categories[index]);\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isVertical ? (-this.tayberry.plotArea.height) : (this.tayberry.plotArea.width);\r\n    }\r\n\r\n    getOrigin() {\r\n        return this.tayberry.plotArea[this.isVertical ? 'bottom' : 'left'];\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() + this.plotDisplacement * (value + 0.5) / this.options.categories.length;\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nclass LinearAxis extends Axis {\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            if (this.options.labelFormat === 'percentage') {\r\n                this.options.labelFormatter = Utils.createPercentageFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n            else if (this.options.labelFormat === 'currency') {\r\n                this.options.labelFormatter = Utils.createFixedNumberFormatter(this.max - this.min, this.options.labelPrefix || this.options.currencySymbol, this.options.labelSuffix);\r\n            }\r\n            else {\r\n                this.options.labelFormatter = Utils.createAutoNumberFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n        }\r\n    }\r\n\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const start = this.startProperty,\r\n            end = this.endProperty;\r\n\r\n        for (let yValue = this.tickStart; yValue <= this.tickEnd && this.tickStep;) {\r\n            let y = this.getValueDisplacement(yValue);\r\n            if (this.isVertical) {\r\n                if (callback({\r\n                        value: yValue,\r\n                        x1: tb.plotArea[start],\r\n                        y1: y,\r\n                        x2: tb.plotArea[end],\r\n                        y2: y,\r\n                        x: tb.plotArea[start],\r\n                        y: y\r\n\r\n                    }))\r\n                    break;\r\n            } else {\r\n                if (callback({\r\n                        value: yValue,\r\n                        y1: tb.plotArea[start],\r\n                        x1: y,\r\n                        y2: tb.plotArea[end],\r\n                        x2: y,\r\n                        y: tb.plotArea[start],\r\n                        x: y\r\n                    }))\r\n                    break;\r\n            }\r\n            yValue = this.tickStart + Math.round((yValue + this.tickStep - this.tickStart) / this.tickStep) * this.tickStep;\r\n        }\r\n    }\r\n\r\n    static snapScaledValue(scaledStep) {\r\n        if (scaledStep < 1)\r\n            scaledStep = 1;\r\n        else if (scaledStep < 2)\r\n            scaledStep = 2;\r\n        else if (scaledStep < 2.5)\r\n            scaledStep = 2.5;\r\n        else if (scaledStep < 5)\r\n            scaledStep = 5;\r\n        else\r\n            scaledStep = 10;\r\n        return scaledStep;\r\n    }\r\n\r\n    calculateExtent() {\r\n        let targetTicks, approxStep, scale;\r\n\r\n        let targetStart = this.options.min;\r\n        let targetEnd = this.options.max;\r\n        const overriddenStart = !Utils.isMissingValue(targetStart);\r\n        const overriddenEnd = !Utils.isMissingValue(targetEnd);\r\n\r\n        if (!overriddenStart || !overriddenEnd) {\r\n            const [dataMin, dataMax] = this.isYAxis ? this.tayberry.getDataMinMax(this) : this.tayberry.getDataXMinMax(this);\r\n            const dataRange = dataMax - dataMin;\r\n            if (!overriddenStart) {\r\n                targetStart = dataMin;\r\n                if (this.isYAxis) {\r\n                    targetStart = targetStart - dataRange * 0.1;\r\n                    if (dataMin >= 0 && targetStart < 0)\r\n                        targetStart = 0;\r\n                }\r\n            }\r\n            if (!overriddenEnd) {\r\n                targetEnd = dataMax;\r\n                if (this.isYAxis) {\r\n                    targetEnd = dataMax + dataRange * 0.1;\r\n                    if (dataMax <= 0 && targetStart > 0)\r\n                        targetEnd = 0;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.options.tickStepValue) {\r\n            this.tickStep = this.options.tickStepValue;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        } else {\r\n            const targetRange = targetEnd - targetStart;\r\n            targetTicks = this.plotLength / this.mapLogicalYOrXUnit(this.options.tickStep);\r\n            approxStep = targetRange / targetTicks;\r\n            scale = Math.pow(10, Math.floor(Math.log(approxStep) / Math.log(10)));\r\n            let scaledStep = LinearAxis.snapScaledValue(Math.ceil(approxStep / scale));\r\n            this.tickStep = scaledStep * scale;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        }\r\n        this.tickStart = this.options.tickStepValue && overriddenStart ? this.min : Math.floor(this.min / this.tickStep) * this.tickStep;\r\n        this.tickEnd = this.options.tickStepValue && overriddenEnd ? this.max : Math.ceil(this.max / this.tickStep) * this.tickStep;\r\n        if (!overriddenStart && this.isYAxis)\r\n            this.min = this.tickStart;\r\n        if (!overriddenEnd && this.isYAxis)\r\n            this.max = this.tickEnd;\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isVertical ? (this.tayberry.plotArea.height - 1) : -(this.tayberry.plotArea.width - 1);\r\n    }\r\n\r\n    get plotLength() {\r\n        return Math.abs(this.plotDisplacement);\r\n    }\r\n\r\n    getOrigin() {\r\n        let ret = this.tayberry.plotArea[this.isVertical ? 'bottom' : 'left'] - (0 - this.min) * this.plotDisplacement / (this.max - this.min);\r\n        if (this.isVertical) ret--;\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() - value * this.plotDisplacement / (this.max - this.min);\r\n        ret = this.isVertical ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getCategoryLabel(index, totalCategories, isRange) {\r\n        if (isRange) {\r\n            const start = index / totalCategories;\r\n            const end = (index + 1) / totalCategories;\r\n            const axisRange = this.max - this.min;\r\n            return Utils.formatString('{0} \\u2264 x < {1}', [this.options.labelFormatter(this.min + start * axisRange), this.options.labelFormatter(this.min + end * axisRange)]);\r\n        } else {\r\n            return this.options.labelFormatter(index);\r\n        }\r\n    }\r\n}\r\n\r\nexports.Axis = Axis;","class Tayberry {\r\n    constructor() {\r\n        this.selectedItem = {};\r\n        this.containerElement = null;\r\n        this.labelsCanvas = null;\r\n        this.labelsCtx = null;\r\n        this.renderedSeries = null;\r\n        this.options = null;\r\n        this.scaleFactor = null;\r\n        this.titleFont = null;\r\n        this.plotArea = null;\r\n        this.categories = [];\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.legendFont = null;\r\n        this.renderers = [];\r\n    }\r\n\r\n    get seriesCount() {\r\n        return this.options.series.length;\r\n    }\r\n\r\n    get categoryCount() {\r\n        return this.options.series.length ? this.options.series[0].data.length : 0;\r\n    }\r\n}\r\n\r\nexports.Tayberry = Tayberry;\r\n\r\n\r\n","'use strict';\r\nvar Colour = require('./helpers/colour').Colour;\r\nvar Utils = require('./helpers/utils');\r\n\r\nvar Tayberry = require('./base').Tayberry;\r\nvar Axis = require('./axis').Axis;\r\nvar BarRenderer = require('./renderer.bar').BarRenderer;\r\nvar LineRenderer = require('./renderer.line').LineRenderer;\r\n\r\nvar currentAutoColourIndex = 0;\r\n\r\nTayberry.getAutoColour = function () {\r\n    let ret = Tayberry.defaultColours[currentAutoColourIndex % Tayberry.defaultColours.length];\r\n    currentAutoColourIndex++;\r\n    return ret;\r\n};\r\n\r\nTayberry.getDataValue = function (dataPoint) {\r\n    let ret;\r\n    if (Array.isArray(dataPoint)) {\r\n        ret = dataPoint[1];\r\n    } else {\r\n        ret = dataPoint;\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.getDataXValue = function (data, index) {\r\n    let ret;\r\n    if (Array.isArray(data[index])) {\r\n        ret = data[index][0];\r\n    } else {\r\n        ret = index;\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.setDataValue = function (data, index, newValue) {\r\n    if (Array.isArray(data[index])) {\r\n        data[index][1] = newValue;\r\n    } else {\r\n        data[index] = newValue;\r\n    }\r\n};\r\n\r\nTayberry.prototype.createCanvas = function () {\r\n    let ret = document.createElement('canvas');\r\n    // IE11 hack-fix - clientWidth sometimes incorrect on first access\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    ret.style.position = 'absolute';\r\n    this.containerElement.appendChild(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.create = function (containerElement) {\r\n    if (typeof containerElement == 'string') {\r\n        this.containerElement = document.getElementById(containerElement);\r\n    } else {\r\n        this.containerElement = containerElement;\r\n    }\r\n    this.labelsCanvas = this.createCanvas();\r\n    this.labelsCtx = this.labelsCanvas.getContext('2d');\r\n    this.plotCanvas = this.createCanvas();\r\n    this.plotCtx = this.plotCanvas.getContext('2d');\r\n    this.renderedSeries = null;\r\n    this.options = {};\r\n    this.yAxes = null;\r\n    this.xAxes = null;\r\n    this.initialise();\r\n};\r\n\r\nTayberry.prototype.destroy = function () {\r\n    this.labelsCanvas.parentNode.removeChild(this.labelsCanvas);\r\n    this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n    this.options = {};\r\n    this.plotCanvas.removeEventListener('mousemove', this.onMouseMoveReal);\r\n    this.plotCanvas.removeEventListener('mouseleave', this.onMouseLeaveReal);\r\n    // this.plotCanvas.removeEventListener('touchstart', this.onTouchStartReal);\r\n    window.removeEventListener('resize', this.onWindowResizeReal);\r\n};\r\n\r\nTayberry.prototype.initialise = function () {\r\n    this.scaleFactor = window.devicePixelRatio || 1.0;\r\n    this.labelsCanvas.width = Math.round(this.labelsCanvas.clientWidth * this.scaleFactor);\r\n    this.labelsCanvas.height = Math.round(this.labelsCanvas.clientHeight * this.scaleFactor);\r\n    this.plotCanvas.width = this.labelsCanvas.width;\r\n    this.plotCanvas.height = this.labelsCanvas.height;\r\n    this.scaleFactorX = this.labelsCanvas.width / this.labelsCanvas.clientWidth;\r\n    this.scaleFactorY = this.labelsCanvas.height / this.labelsCanvas.clientHeight;\r\n    this.selectedItem = {};\r\n    this.plotArea = null;\r\n};\r\n\r\nTayberry.prototype.getFontHeight = function (font, forDom) {\r\n    let ret = font.size;\r\n    if (font.autoScale)\r\n        ret *= Math.pow(this.labelsCanvas.width / 800, 0.25);\r\n    if (!forDom) ret = this.mapLogicalYUnit(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.createFontString = function (font, forDom) {\r\n    return (font.style ? font.style + ' ' : '') + this.getFontHeight(font, forDom).toFixed(1) + 'px ' + font.face;\r\n};\r\n\r\nTayberry.prototype.updateFonts = function () {\r\n    //this.labelsCtx.font = this.createFontString(this.options.font);\r\n    this.titleFont = this.createFontString(this.options.title.font);\r\n    this.labelFont = this.createFontString(this.options.labels.font);\r\n    this.legendFont = this.createFontString(this.options.legend.font);\r\n    this.yAxes.map(e => e.updateFonts());\r\n    this.xAxes.map(e => e.updateFonts());\r\n};\r\n\r\nTayberry.prototype.setOptions = function (options) {\r\n    let optionOverrides = [this.defaultOptions()];\r\n    if (!options.presets) {\r\n        options.presets = ['default'];\r\n    }\r\n    if (options.presets) {\r\n        for (let index = 0; index < options.presets.length; index++) {\r\n            optionOverrides.push(Tayberry.presets[options.presets[index]]);\r\n        }\r\n    }\r\n    optionOverrides.push(options);\r\n    this.options = Utils.deepAssign({}, optionOverrides);\r\n    this.options.title.font = Utils.deepAssign({}, [this.options.font, this.options.title.font]);\r\n    this.options.tooltips.font = Utils.deepAssign({}, [this.options.font, this.options.tooltips.font]);\r\n    this.options.labels.font = Utils.deepAssign({}, [this.options.font, this.options.labels.font]);\r\n    this.options.legend.font = Utils.deepAssign({}, [this.options.font, this.options.legend.font]);\r\n    this.options.allAxes.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.font]);\r\n    this.options.allAxes.title.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.title.font]);\r\n    if (!Array.isArray(this.options.yAxis))\r\n        this.options.yAxis = [this.options.yAxis || {}];\r\n    if (!Array.isArray(this.options.xAxis))\r\n        this.options.xAxis = [this.options.xAxis || {}];\r\n    for (let i = 0; i < this.options.yAxis.length; i++) {\r\n        this.options.yAxis[i] = Utils.deepAssign({}, [i === 0 ? Tayberry.defaultPrimaryYAxis : Tayberry.defaultSecondaryYAxis, this.options.allAxes, this.options.yAxis[i]]);\r\n    }\r\n    for (let i = 0; i < this.options.xAxis.length; i++) {\r\n        this.options.xAxis[i] = Utils.deepAssign({}, [Tayberry.defaultXAxis, this.options.allAxes, this.options.xAxis[i]]);\r\n    }\r\n\r\n    this.yAxes = [];\r\n    this.xAxes = [];\r\n    for (let i = 0; i < this.options.xAxis.length; i++) {\r\n        this.xAxes.push(Axis.create(this, this.options.xAxis[i], i, 'x', this.options.swapAxes));\r\n    }\r\n    for (let i = 0; i < this.options.yAxis.length; i++) {\r\n        this.yAxes.push(Axis.create(this, this.options.yAxis[i], i, 'y', this.options.swapAxes));\r\n    }\r\n    this.createRenderers();\r\n    this.updateFonts();\r\n    this.plotCanvas.addEventListener('mousemove', this.onMouseMoveReal = this.onMouseMove.bind(this));\r\n    this.plotCanvas.addEventListener('mouseleave', this.onMouseLeaveReal = this.onMouseLeave.bind(this));\r\n    //this.plotCanvas.addEventListener('touchstart', this.onTouchStartReal = this.onTouchStart.bind(this));\r\n    window.addEventListener('resize', this.onWindowResizeReal = Utils.throttle(this.onWindowResize, 50).bind(this));\r\n};\r\n\r\nTayberry.calculateHighlightColour = function (colour) {\r\n    let newColour = new Colour(colour);\r\n    return newColour.increaseBy(30 * (newColour.sum >= 180 * 3 ? -1 : 1)).toString();\r\n};\r\n\r\nTayberry.calculateGlowColour = function (highlightColour) {\r\n    let newColour = new Colour(highlightColour);\r\n    newColour.a = 0.4;\r\n    return newColour.toString();\r\n};\r\n\r\nTayberry.prototype.createRenderers = function () {\r\n    let series, groupedSeries = {'bar': [], 'line': []};\r\n    if (!Array.isArray(this.options.series)) {\r\n        series = [this.options.series];\r\n    } else {\r\n        series = this.options.series;\r\n    }\r\n\r\n    for (let i = 0; i < series.length; i++) {\r\n        const curSeries = series[i];\r\n        curSeries.index = i;\r\n        curSeries.colour = curSeries.colour || Tayberry.getAutoColour();\r\n        curSeries.highlightColour = curSeries.highlightColour || Tayberry.calculateHighlightColour(curSeries.colour);\r\n        curSeries.glowColour = curSeries.glowColour || Tayberry.calculateGlowColour(curSeries.highlightColour);\r\n        curSeries.xAxis = this.xAxes[curSeries.xAxisIndex || 0];\r\n        curSeries.yAxis = this.yAxes[curSeries.yAxisIndex || 0];\r\n        curSeries.plotType = curSeries.plotType || this.options.plotType;\r\n        if (groupedSeries.hasOwnProperty(curSeries.plotType)) {\r\n            groupedSeries[curSeries.plotType].push(curSeries);\r\n        }\r\n    }\r\n    if (groupedSeries['bar'].length) {\r\n        this.renderers.push(new BarRenderer(this.plotCtx, this, groupedSeries['bar']));\r\n    }\r\n    if (groupedSeries['line'].length) {\r\n        this.renderers.push(new LineRenderer(this.plotCtx, this, groupedSeries['line']));\r\n    }\r\n};\r\n\r\nTayberry.prototype.getDataMinMax = function (axis) {\r\n    var minNormal, maxNormal, minStacked, maxStacked;\r\n    if (this.options.barPlot.mode === 'stacked') {\r\n        let seriesPositiveTotals = [];\r\n        let seriesNegativeTotals = [];\r\n        const barSeries = this.options.series.filter(series => series.plotType === 'bar' && series.yAxis === axis);\r\n        if (barSeries.length) {\r\n            for (let categoryIndex = 0; categoryIndex < barSeries[0].data.length; categoryIndex++) {\r\n                seriesPositiveTotals[categoryIndex] = 0;\r\n                seriesNegativeTotals[categoryIndex] = 0;\r\n                for (let seriesIndex = 0; seriesIndex < barSeries.length; seriesIndex++) {\r\n                    const value = Tayberry.getDataValue(barSeries[seriesIndex].data[categoryIndex]);\r\n                    if (!Utils.isMissingValue(value)) {\r\n                        if (value < 0) {\r\n                            seriesNegativeTotals[categoryIndex] += value;\r\n                        } else {\r\n                            seriesPositiveTotals[categoryIndex] += value;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        minStacked = Math.min(0, Utils.reduce(seriesNegativeTotals, Math.min, undefined, true));\r\n        maxStacked = Math.max(Utils.reduce(seriesPositiveTotals, Math.max, undefined, true), 0);\r\n    }\r\n    {\r\n        let seriesMinima = [];\r\n        let seriesMaxima = [];\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            if (series.yAxis === axis && (series.plotType !== 'bar' || this.options.barPlot.mode !== 'stacked')) {\r\n                seriesMinima.push(Utils.reduce(series.data, Math.min, Tayberry.getDataValue, true));\r\n                seriesMaxima.push(Utils.reduce(series.data, Math.max, Tayberry.getDataValue, true));\r\n            }\r\n        }\r\n        minNormal = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n        maxNormal = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n    }\r\n    const min = Utils.reduce([minNormal, minStacked], Math.min, undefined, true);\r\n    const max = Utils.reduce([maxNormal, maxStacked], Math.max, undefined, true);\r\n    return [min, max];\r\n};\r\n\r\nTayberry.prototype.getDataXMinMax = function (axis) {\r\n    var min, max;\r\n    const seriesMinima = [];\r\n    const seriesMaxima = [];\r\n    for (let index = 0; index < this.options.series.length; index++) {\r\n        const series = this.options.series[index];\r\n        if (series.xAxis === axis) {\r\n            seriesMinima.push(Utils.reduce(series.data, Math.min, Tayberry.getDataXValue, true));\r\n            seriesMaxima.push(Utils.reduce(series.data, Math.max, Tayberry.getDataXValue, true));\r\n        }\r\n    }\r\n    min = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n    max = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n    return [min, max];\r\n};\r\n\r\n\r\nTayberry.prototype.createTooltip = function () {\r\n    if (this.tooltipElement) {\r\n        this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n        this.tooltipElement = null;\r\n    }\r\n    this.tooltipElement = document.createElement('div');\r\n    this.tooltipElement.className = 'tayberry-tooltip';\r\n    this.tooltipElement.style.position = 'absolute';\r\n    this.tooltipElement.style.left = '0px';\r\n    this.tooltipElement.style.top = '0px';\r\n    this.tooltipElement.style.zIndex = '99999';\r\n    this.tooltipElement.style.font = this.createFontString(this.options.tooltips.font, true);\r\n    this.tooltipElement.style.borderRadius = '3px';\r\n    this.tooltipElement.style.backgroundColor = 'white';\r\n    this.tooltipElement.style.border = '2px solid #bbb';\r\n    this.tooltipElement.style.padding = '0.15em 0.4em';\r\n    this.tooltipElement.style.display = 'none';\r\n    this.tooltipElement.innerHTML = '';\r\n    document.body.appendChild(this.tooltipElement);\r\n    this.tooltipElement.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.tooltipElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n};\r\n","'use strict';\r\nvar Tayberry = require('./base.js').Tayberry;\r\nvar Utils = require('./helpers/utils');\r\n\r\nTayberry.prototype.defaultOptions = function () {\r\n    return {\r\n        title: {\r\n            text: '',\r\n            font: {\r\n                size: 20\r\n            }\r\n        },\r\n        font: {\r\n            colour: '#444',\r\n            size: 12,\r\n            face: 'sans-serif',\r\n            style: '',\r\n            autoScale: true\r\n        },\r\n        allAxes: {\r\n            font: {},\r\n            title: {\r\n                font: {}\r\n            }\r\n        },\r\n        xAxis: [],\r\n        yAxis: [],\r\n        animations: {\r\n            enabled: true\r\n        },\r\n        series: [],\r\n        backgroundColour: undefined,\r\n        swapAxes: false,\r\n        plotType: 'bar',\r\n        barPlot: {\r\n            mode: 'normal', //[normal|stacked|overlaid]\r\n            barPadding: 2,\r\n            categorySpacing: 0.3\r\n        },\r\n        linePlot: {\r\n            lineWidth: 2,\r\n            highlightedLineWidth: 4,\r\n            showMarkers: 'auto',\r\n            noMarkersThreshold: 100,\r\n            markerSize: 10,\r\n            highlightedMarkerSize: 18\r\n        },\r\n        elementSmallPadding: 5,\r\n        elementLargePadding: 10,\r\n        presets: [],\r\n        tooltips: {\r\n            shared: false,\r\n            headerTemplate: '<strong>{category}</strong><table>',\r\n            valueTemplate: '<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">\\u25CF</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',\r\n            footerTemplate: '</table>',\r\n            font: {}\r\n        },\r\n        legend: {\r\n            enabled: true,\r\n            indicatorSize: 15,\r\n            font: {}\r\n        },\r\n        labels: {\r\n            enabled: false,\r\n            verticalAlignment: 'top',\r\n            verticalPosition: 'outside',\r\n            font: {}\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.defaultXAxis = {\r\n    title: {\r\n        text: '',\r\n        font: {}\r\n    },\r\n    type: 'categorial',\r\n    min: null,\r\n    max: null,\r\n    tickStep: 40,\r\n    tickStepValue: null,\r\n    font: {},\r\n    categories: [],\r\n    labelPosition: 'middle', //left|middle|right\r\n    placement: 'auto',\r\n    gridLines: {}\r\n};\r\n\r\nTayberry.defaultYAxis = {\r\n    title: {\r\n        text: '',\r\n        font: {}\r\n    },\r\n    min: undefined,\r\n    max: undefined,\r\n    tickStep: 40,\r\n    tickStepValue: null,\r\n    font: {},\r\n    labelFormat: 'number', //[number|percentage|currency],\r\n    labelFormatter: undefined,\r\n    labelPrefix: undefined,\r\n    labelSuffix: undefined,\r\n    currencySymbol: '',\r\n    placement: 'auto',\r\n    type: 'linear',\r\n    gridLines: {}\r\n\r\n};\r\n\r\nTayberry.defaultPrimaryYAxis = Utils.deepAssign({}, [Tayberry.defaultYAxis, {\r\n    gridLines: {\r\n        colour: '#ccc'\r\n    }\r\n}]);\r\n\r\nTayberry.defaultSecondaryYAxis = Tayberry.defaultYAxis;\r\n\r\nTayberry.presets = {\r\n    histogram: {\r\n        barPlot: {\r\n            mode: 'overlaid',\r\n            categorySpacing: 0,\r\n            barPadding: 1\r\n        }\r\n    },\r\n    darkGrid: {\r\n        allAxes: {\r\n            gridLines: {\r\n                colour: 'rgba(255, 255, 255, 0.6)'\r\n            }\r\n        },\r\n        plotBackgroundColour: '#E5E5E5'\r\n    }\r\n};\r\n\r\nTayberry.defaultColours = [\r\n    '#6FE87B', //green\r\n    '#FFAB51', //orange\r\n    '#51A8FF', //blue\r\n    '#B651FF', //purple\r\n    '#FF6051', //red\r\n    '#636363', //dark grey\r\n    '#FFE314', //yellow\r\n    '#A88572', //brown\r\n    '#B7B7B7' //light grey\r\n];\r\n","'use strict';\r\nvar Tayberry = require('./base').Tayberry;\r\nvar Rect = require('./helpers/rect').Rect;\r\nvar Utils = require('./helpers/utils');\r\n\r\nTayberry.prototype.getTextWidth = function (text, fontString) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.labelsCtx.measureText(text).width;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.getMultilineTextHeight = function (fontString, maxWidth, text) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.splitMultilineText(maxWidth, text).length;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\n\r\nTayberry.prototype.splitMultilineText = function (maxWidth, text) {\r\n    let lines = [];\r\n    let lineWidth = 0;\r\n    let lineText = '';\r\n    const spaceWidth = this.labelsCtx.measureText(' ').width;\r\n    for (let i = 0; i < text.length;) {\r\n        const wordStart = i;\r\n        while (i < text.length && text[i] !== ' ' && text[i] !== '\\r' && text[i] !== '\\n') i++;\r\n        const wordEnd = i;\r\n        while (i < text.length && (text[i] === ' ' || text[i] === '\\r' || text[i] === '\\n')) i++;\r\n        if (wordEnd > wordStart) {\r\n            const word = text.substring(wordStart, wordEnd);\r\n            const wordWidth = this.labelsCtx.measureText(word).width;\r\n            if (lineWidth + wordWidth > maxWidth) {\r\n                if (!lineWidth) {\r\n                    lineText = word;\r\n                }\r\n                lines.push(lineText);\r\n                if (lineWidth) {\r\n                    lineWidth = 0;\r\n                    lineText = word;\r\n                }\r\n            } else {\r\n                lineText += (lineText ? ' ' : '') + word;\r\n                lineWidth += wordWidth + spaceWidth;\r\n            }\r\n        }\r\n    }\r\n    if (lineText) {\r\n        lines.push(lineText);\r\n    }\r\n    return lines;\r\n};\r\n\r\nTayberry.prototype.drawTextMultiline = function (lineHeight, x, y, maxWidth, text) {\r\n    let lines = this.splitMultilineText(maxWidth, text);\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n        let line = lines[i];\r\n        this.labelsCtx.fillText(line, x, y + lineHeight * i);\r\n    }\r\n};\r\n\r\nTayberry.prototype.render = function () {\r\n    this.calculatePlotArea();\r\n    this.drawLabelLayer();\r\n    this.createTooltip();\r\n    if (this.options.animations.enabled) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n        this.animationStart = (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') ? performance.now() : null;\r\n        this.animationLength = 500;\r\n    } else {\r\n        this.drawPlotLayer();\r\n    }\r\n};\r\n\r\nTayberry.prototype.clear = function (plot = true, labels = true) {\r\n    if (plot) this.plotCtx.clearRect(0, 0, this.plotCanvas.width, this.plotCanvas.height);\r\n    if (labels) this.labelsCtx.clearRect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n};\r\n\r\nTayberry.prototype.drawBackground = function () {\r\n    if (this.options.plotBackgroundColour) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.fillStyle = this.options.plotBackgroundColour;\r\n        this.labelsCtx.fillRect(this.plotArea.left, this.plotArea.top, this.plotArea.width, this.plotArea.height);\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawTitle = function () {\r\n    if (this.options.title.text) {\r\n        const x = (this.labelsCanvas.width) / 2, y = 0;\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.textAlign = 'center';\r\n        this.labelsCtx.textBaseline = 'top';\r\n        this.labelsCtx.font = this.titleFont;\r\n        this.labelsCtx.fillStyle = this.options.title.font.colour;\r\n        this.drawTextMultiline(this.getFontHeight(this.options.title.font), x, y, this.labelsCanvas.width, this.options.title.text);\r\n        // this.labelsCtx.fillText(this.options.title.text, x, y);\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawPlotLayer = function () {\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].drawPlot();\r\n    }\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].drawLabels();\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.drawLine = function (x1, y1, x2, y2, colour, ctx = this.labelsCtx) {\r\n    ctx.save();\r\n    if (colour) {\r\n        ctx.strokeStyle = colour;\r\n    }\r\n    ctx.beginPath();\r\n    ctx.moveTo(x1 + 0.5, y1 + 0.5);\r\n    ctx.lineTo(x2 + 0.5, y2 + 0.5);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n};\r\n\r\nTayberry.prototype.drawLabelLayer = function () {\r\n    this.drawBackground();\r\n    this.drawTitle();\r\n    let offsetRect = new Rect(0);\r\n    this.xAxes.map(e => e.draw(offsetRect));\r\n    this.yAxes.map(e => e.draw(offsetRect));\r\n    this.drawLegend();\r\n};\r\n\r\nTayberry.prototype.redraw = function (plotOnly) {\r\n    this.clear(true, !plotOnly);\r\n    if (!plotOnly) {\r\n        this.drawLabelLayer();\r\n    }\r\n    this.drawPlotLayer();\r\n};\r\n\r\n\r\nTayberry.prototype.drawLegend = function () {\r\n    if (this.options.legend.enabled) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = this.legendFont;\r\n        let totalWidth = 0;\r\n        const indicatorSize = this.mapLogicalXUnit(this.options.legend.indicatorSize);\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            if (series.name) {\r\n                totalWidth += this.getTextWidth(series.name, this.legendFont) + indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding + this.options.elementLargePadding);\r\n            }\r\n        }\r\n        let x = this.plotArea.left + this.plotArea.width / 2 - totalWidth / 2,\r\n            y = this.labelsCanvas.height - indicatorSize;\r\n\r\n        for (let index = 0; index < this.options.series.length; index++) {\r\n            const series = this.options.series[index];\r\n            if (series.name) {\r\n                series.renderer.drawLegendIndicator(this.labelsCtx, series, new Rect(x, y, x + indicatorSize, y + indicatorSize));\r\n                this.labelsCtx.textBaseline = 'middle';\r\n                this.labelsCtx.fillStyle = this.options.legend.font.colour;\r\n                x += indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n                this.labelsCtx.fillText(series.name, x, y + indicatorSize / 2);\r\n                x += this.getTextWidth(series.name, this.legendFont) + this.mapLogicalXUnit(this.options.elementLargePadding);\r\n            }\r\n        }\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n","'use strict';\r\nvar Rect = require('./helpers/rect').Rect;\r\nvar Utils = require('./helpers/utils');\r\n\r\nvar Tayberry = require('./base').Tayberry;\r\n\r\nTayberry.prototype.onAnimate = function (timestamp) {\r\n    var elapsed;\r\n    if (this.animationStart === null) {\r\n        this.animationStart = timestamp;\r\n    }\r\n    elapsed = timestamp - this.animationStart;\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        this.renderers[i].onAnimationFrame(elapsed, this.animationLength);\r\n    }\r\n    this.redraw(true);\r\n    if (elapsed < this.animationLength) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    }\r\n};\r\n\r\nTayberry.prototype.onMouseLeave = function (event) {\r\n    if ((event.currentTarget == this.plotCanvas && event.relatedTarget !== this.tooltipElement) || (event.currentTarget == this.tooltipElement && event.relatedTarget !== this.plotCanvas)) {\r\n        this.selectedItem = {};\r\n        this.tooltipElement.style.display = 'none';\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.handleMouseMove = function (clientX, clientY) {\r\n    let boundingRect = new Rect(this.plotCanvas.getBoundingClientRect());\r\n    let ret = false;\r\n    if (boundingRect.containsPoint(clientX, clientY)) {\r\n        let x = clientX - boundingRect.left;\r\n        let y = clientY - boundingRect.top;\r\n\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            let tooltipHtml = '';\r\n            const aboveZero = hitTestResult.rect.top < hitTestResult.rect.bottom;\r\n            this.tooltipElement.style.display = 'block';\r\n            if (this.options.tooltips.shared) {\r\n                const category = this.xAxes[0].getCategoryLabel(hitTestResult.categoryIndex, this.categoryCount, hitTestResult.isXRange);\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n                for (let index = 0; index < this.seriesCount; index++) {\r\n                    const series = this.options.series[index];\r\n                    const value = Tayberry.getDataValue(series.data[hitTestResult.categoryIndex]);\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                        value: series.yAxis.options.labelFormatter(value),\r\n                        name: series.name,\r\n                        colour: series.colour\r\n                    }, true);\r\n                }\r\n            } else {\r\n                const series = hitTestResult.series;\r\n                const value = hitTestResult.value;\r\n                const category = series.xAxis.getCategoryLabel(hitTestResult.categoryIndex, this.categoryCount, hitTestResult.isXRange);\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                    value: series.yAxis.options.labelFormatter(value),\r\n                    name: series.name,\r\n                    colour: series.colour\r\n                }, true);\r\n            }\r\n            tooltipHtml += this.options.tooltips.footerTemplate;\r\n            this.tooltipElement.innerHTML = tooltipHtml;\r\n            let tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n            if (!this.options.tooltips.shared) {\r\n                this.tooltipElement.style.borderColor = hitTestResult.series.colour;\r\n            }\r\n            this.tooltipElement.style.left = window.pageXOffset + boundingRect.left + this.mapScreenUnit(hitTestResult.rect.width) / 2 + hitTestResult.rect.left / this.scaleFactor - tooltipRect.width / 2 + 'px';\r\n            this.tooltipElement.style.top = window.pageYOffset + boundingRect.top + this.mapScreenUnit(hitTestResult.rect.top) - tooltipRect.height * (aboveZero ? 1 : 0) - this.options.elementSmallPadding * (aboveZero ? 1 : -1) + 'px';\r\n            this.selectedItem = hitTestResult;\r\n            ret = true;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\n\r\n//Tayberry.prototype.onTouchStart = function (event) {\r\n//    for (let index = 0; index < event.targetTouches.length; index++) {\r\n//        let touch = event.targetTouches[index];\r\n//        if (this.handleMouseMove(touch.clientX, touch.clientY)) {\r\n//            // event.preventDefault();\r\n//            this.redraw();\r\n//            break;\r\n//        }\r\n//    }\r\n//};\r\n\r\n\r\nTayberry.prototype.onMouseMove = function (event) {\r\n    let oldSelectedItem = Utils.assign({}, this.selectedItem);\r\n    if (!this.handleMouseMove(event.clientX, event.clientY)) {\r\n        this.selectedItem = {};\r\n    }\r\n\r\n    if (oldSelectedItem.categoryIndex !== this.selectedItem.categoryIndex || oldSelectedItem.series !== this.selectedItem.series) {\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.onWindowResize = function () {\r\n    this.tooltipElement.style.display = 'none';\r\n    this.labelsCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.labelsCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.plotCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.plotCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.initialise();\r\n    this.updateFonts();\r\n    this.calculatePlotArea();\r\n    this.createTooltip();\r\n    this.redraw();\r\n};\r\n","var Utils = require('./utils');\r\nclass Colour {\r\n    /**\r\n     * Constructs a Colour object.\r\n     *\r\n     * @param colourCode    an HTML colour code in hex or integer (rgb) form\r\n     */\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            let arg1 = arguments[0];\r\n            if (typeof arg1 === 'string')\r\n                this.parseString(arg1);\r\n            else {\r\n                this.r = arg1.r;\r\n                this.g = arg1.g;\r\n                this.b = arg1.b;\r\n                this.a = arg1.a;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses an HTML colour code\r\n     * @param str\r\n     * @returns {Colour}\r\n     */\r\n    parseString(str) {\r\n        let regExHex = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;\r\n        let regExInt = /^rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*)?\\)$/i;\r\n        const groupsHex = regExHex.exec(str);\r\n        const groupsInt = regExInt.exec(str);\r\n        if (groupsHex) {\r\n            let parseHex = function (value) {\r\n                let ret = parseInt(value, 16);\r\n                ret = ret * 0x10 + ret;\r\n                return ret;\r\n            };\r\n            this.r = groupsHex[1] ? parseInt(groupsHex[1], 16) : parseHex(groupsHex[4]);\r\n            this.g = groupsHex[2] ? parseInt(groupsHex[2], 16) : parseHex(groupsHex[5]);\r\n            this.b = groupsHex[3] ? parseInt(groupsHex[3], 16) : parseHex(groupsHex[6]);\r\n            this.a = null;\r\n        }\r\n        else if (groupsInt) {\r\n            this.r = parseInt(groupsInt[1]);\r\n            this.g = parseInt(groupsInt[2]);\r\n            this.b = parseInt(groupsInt[3]);\r\n            this.a = groupsInt[5] ? parseFloat(groupsInt[5]) : null;\r\n        } else {\r\n            throw new RangeError(str + \" is not a valid HTML colour\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips a colour component to be in the range [0, 255], and round it them to\r\n     * the nearest integer\r\n     * @param component\r\n     * @returns {Colour}\r\n     */\r\n    clipComponent(component) {\r\n        this[component] = Math.round(this[component]);\r\n        this[component] = Math.min(this[component], 255);\r\n        this[component] = Math.max(this[component], 0);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips r,g,b colour components to be in the range [0, 255], and rounds them to\r\n     * the nearest integer\r\n     * @returns {Colour}\r\n     */\r\n    clip() {\r\n        this.clipComponent('r');\r\n        this.clipComponent('g');\r\n        this.clipComponent('b');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a number to each colour component\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    increaseBy(number) {\r\n        this.r += number;\r\n        this.g += number;\r\n        this.b += number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    get sum() {\r\n        return this.r + this.g + this.b;\r\n    }\r\n\r\n    /**\r\n     * Formats this colour as a string\r\n     * @returns {String}\r\n     */\r\n    toString() {\r\n        var ret;\r\n        if (this.a) {\r\n            ret = Utils.formatString('rgba({r},{g},{b},{a})', this);\r\n        } else {\r\n            ret = Utils.formatString('rgb({r},{g},{b})', this);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nexports.Colour = Colour;","exports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.inQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * factor;\r\n};\r\n\r\nexports.outQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * (2 - factor);\r\n};\r\n","class Rect {\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            if (typeof arguments[0] === 'object') {\r\n                const rect = arguments[0];\r\n                this.left = rect.left;\r\n                this.top = rect.top;\r\n                this.right = rect.right;\r\n                this.bottom = rect.bottom;\r\n            } else {\r\n                const val = arguments[0];\r\n                this.left = val;\r\n                this.top = val;\r\n                this.right = val;\r\n                this.bottom = val;\r\n            }\r\n        } else if (arguments.length === 4) {\r\n            this.left = arguments[0];\r\n            this.top = arguments[1];\r\n            this.right = arguments[2];\r\n            this.bottom = arguments[3];\r\n        }\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get maxY() {\r\n        return Math.max(this.bottom, this.top);\r\n    }\r\n\r\n    get minY() {\r\n        return Math.min(this.bottom, this.top);\r\n    }\r\n\r\n    get minX() {\r\n        return Math.min(this.left, this.right);\r\n    }\r\n\r\n    get maxX() {\r\n        return Math.max(this.left, this.right);\r\n    }\r\n\r\n    get xMidpoint() {\r\n        return (this.left + this.right) / 2;\r\n    }\r\n\r\n    get yMidpoint() {\r\n        return (this.top + this.bottom) / 2;\r\n    }\r\n\r\n    get area() {\r\n        return this.width * this.height;\r\n    }\r\n\r\n    containsPoint(x, y) {\r\n        return this.containsX(x) && this.containsY(y);\r\n    }\r\n\r\n    containsY(y) {\r\n        return (y >= this.top && y < this.bottom) || (y >= this.bottom && y < this.top);\r\n    }\r\n\r\n    containsX(x) {\r\n        return (x >= this.left && x < this.right) || (x >= this.right && x < this.left);\r\n    }\r\n\r\n    inflate(val) {\r\n        this.left -= val;\r\n        this.top -= val;\r\n        this.right += val;\r\n        this.bottom += val;\r\n        return this;\r\n    }\r\n\r\n    clip(clipRect) {\r\n        //FIXME: In theory, we should be more careful about how we handle rects where right < left or bottom < top\r\n        if (this.left < clipRect.minX) this.left = clipRect.minX;\r\n        else if (this.left > clipRect.maxX) this.left = clipRect.maxX;\r\n\r\n        if (this.right < clipRect.minX) this.right = clipRect.minX;\r\n        else if (this.right > clipRect.maxX) this.right = clipRect.maxX;\r\n\r\n        if (this.top < clipRect.minY)\r\n            this.top = clipRect.minY;\r\n        else if (this.top > clipRect.maxY)\r\n            this.top = clipRect.maxY;\r\n\r\n        if (this.bottom > clipRect.maxY)\r\n            this.bottom = clipRect.maxY;\r\n        else if (this.bottom < clipRect.minY)\r\n            this.bottom = clipRect.minY;\r\n\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Rect(this);\r\n    }\r\n\r\n    swapXY() {\r\n        [this.left, this.top] = [this.top, this.left];\r\n        [this.bottom, this.right] = [this.right, this.bottom];\r\n        return this;\r\n    }\r\n}\r\n\r\nexports.Rect = Rect;","(function () {\r\n    \"use strict\";\r\n\r\n    exports.identity = function (obj) {\r\n        return obj;\r\n    };\r\n\r\n    exports.isMissingValue = function (n) {\r\n        return n === null || typeof n === 'undefined' || (isNaN(n) && typeof n === 'number');\r\n    };\r\n\r\n    exports.reduce = function (array, func, getter, ignoreMissing = false) {\r\n        var ret, i;\r\n        if (array.reduce && !getter && !ignoreMissing) {\r\n            ret = array.reduce(function (a, b) {\r\n                return func(a, b);\r\n            });\r\n        } else {\r\n            let retInitialised = false;\r\n            getter = getter || exports.identity;\r\n            for (i = 0; i < array.length; i++) {\r\n                const value = getter(array[i], i);\r\n                if (!ignoreMissing || !exports.isMissingValue(value)) {\r\n                    ret = retInitialised ? func(ret, value) : value;\r\n                    retInitialised = true;\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n\r\n    exports.sign = Math.sign || function (n) {\r\n            return n > 0 ? 1 : (n < 0 ? -1 : 0);\r\n        };\r\n\r\n    var innerAssign = function (deepAssign, targetObject, sourceObjects) {\r\n        if (!Array.isArray(sourceObjects))\r\n            sourceObjects = [sourceObjects];\r\n        if (!deepAssign && Object.assign) {\r\n            return Object.assign.apply(Object, [targetObject].concat(sourceObjects));\r\n        } else {\r\n            if (targetObject === undefined || targetObject === null) {\r\n                throw new TypeError('Cannot convert first argument to object');\r\n            }\r\n\r\n            var to = Object(targetObject);\r\n            for (let i = 0; i < sourceObjects.length; i++) {\r\n                let currentSourceObject = sourceObjects[i];\r\n                if (currentSourceObject === undefined || currentSourceObject === null) {\r\n                    continue;\r\n                }\r\n                currentSourceObject = Object(currentSourceObject);\r\n\r\n                const keysArray = Object.keys(currentSourceObject);\r\n                for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                    const nextKey = keysArray[nextIndex];\r\n                    const nextValue = currentSourceObject[nextKey];\r\n                    const desc = Object.getOwnPropertyDescriptor(currentSourceObject, nextKey);\r\n                    if (desc !== undefined && desc.enumerable) {\r\n                        if (deepAssign && !Array.isArray(nextValue) && typeof nextValue === 'object' && nextValue !== null)\r\n                            to[nextKey] = innerAssign(true, {}, [to[nextKey], nextValue]);\r\n                        else\r\n                            to[nextKey] = nextValue;\r\n                    }\r\n                }\r\n            }\r\n            return to;\r\n        }\r\n    };\r\n\r\n    exports.none = function(array) {\r\n        return array.every(elem => !elem);\r\n    };\r\n\r\n    exports.assign = function (targetObject, sourceObjects) {\r\n        return innerAssign(false, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.deepAssign = function (targetObject, sourceObjects) {\r\n        return innerAssign(true, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.formatString = function (formatString, formatValues, escapeAsHtml) {\r\n        return formatString.replace(/{(\\w+)}/g, function (match, placeholder) {\r\n            const value = formatValues[placeholder];\r\n            return typeof value !== 'undefined' ? (escapeAsHtml ? exports.stringToHtml(value) : value) : match;\r\n        });\r\n    };\r\n\r\n    exports.locateDecimalPoint = function (number) {\r\n        return Math.floor(Math.log(number) / Math.log(10));\r\n    };\r\n\r\n    exports.formatNumberThousands = function (number, decimalPlaces = 0) {\r\n        var parts = number.toFixed(decimalPlaces).split(\".\");\r\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        return parts.join(\".\");\r\n    };\r\n\r\n    exports.createAutoNumberFormatter = function (scale, prefix = '', suffix = '', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createFixedNumberFormatter = function (scale, prefix = '', suffix = '', decimalPlaces = 2) {\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createPercentageFormatter = function (scale, prefix = '', suffix = '%', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale * 100);\r\n        decimalPlaces = decimalPlaces < precision ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x * 100, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.stringToHtml = function (str) {\r\n        var div = document.createElement('div');\r\n        div.appendChild(document.createTextNode(str));\r\n        return div.innerHTML;\r\n    };\r\n\r\n    exports.throttle = function (fn, threshold) {\r\n        var last,\r\n            deferTimer;\r\n        return function () {\r\n            var context = this;\r\n\r\n            var now = Date.now(),\r\n                args = arguments;\r\n            if (last && now < last + threshold) {\r\n                clearTimeout(deferTimer);\r\n                deferTimer = setTimeout(function () {\r\n                    last = now;\r\n                    fn.apply(context, args);\r\n                }, threshold);\r\n            } else {\r\n                last = now;\r\n                fn.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n})();\r\n","'use strict';\r\nvar Rect = require('./helpers/rect').Rect;\r\nvar Utils = require('./helpers/utils');\r\nvar renderer = require('./renderer.base');\r\nvar Tayberry = require('./base.js').Tayberry;\r\n\r\nclass BarRenderer extends renderer.Renderer {\r\n    drawPlot() {\r\n        this.ctx.save();\r\n        let barEnumerator = new BarEnumerator(this);\r\n        let bar;\r\n        while ((bar = barEnumerator.next())) {\r\n            this.ctx.fillStyle = bar.selected ? bar.renderedSeries.highlightColour : bar.renderedSeries.colour;\r\n            this.ctx.fillRect(bar.rect.left, bar.rect.top, bar.rect.width, bar.rect.height);\r\n        }\r\n        this.ctx.restore();\r\n    }\r\n\r\n    drawLabels() {\r\n        if (this.tb.options.labels.enabled) {\r\n            this.ctx.save();\r\n            let barEnumerator = new BarEnumerator(this);\r\n            let bar;\r\n            while ((bar = barEnumerator.next())) {\r\n                this.ctx.font = this.tb.labelFont;\r\n                this.ctx.fillStyle = this.tb.options.labels.font.colour;\r\n                this.drawLabel(bar.value, bar.series.yAxis.options.labelFormatter(bar.value), bar.rect);\r\n            }\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n    hitTest(x, y) {\r\n        // TODO: Optimise\r\n        let ret = {\r\n            found: false,\r\n            plotType: 'bar',\r\n            isXRange: true\r\n        };\r\n\r\n        const categoryCount = this.renderedSeries[0].data.length;\r\n        const isHorizontal = this.tb.options.swapAxes;\r\n        let plotArea = this.tb.plotArea.clone();\r\n        if (isHorizontal)\r\n            plotArea.swapXY();\r\n        const categoryIndex = Math.floor(categoryCount * ((isHorizontal ? y : x) - plotArea.left) / plotArea.width);\r\n\r\n        let matches = [];\r\n\r\n        let barEnumerator = new BarEnumerator(this, categoryIndex);\r\n        let bar;\r\n        while ((bar = barEnumerator.next())) {\r\n            if (bar.categoryIndex > categoryIndex)\r\n                break;\r\n            let sortDistance, priority, realDistance;\r\n            if (bar.rect.containsPoint(x, y)) {\r\n                sortDistance = 0;\r\n                priority = 0;\r\n            }\r\n            else if (bar.rect.containsX(x)) {\r\n                sortDistance = y < bar.rect.top ? bar.rect.top - y : y - bar.rect.bottom;\r\n                priority = isHorizontal ? 2 : 1;\r\n            }\r\n            else if (bar.rect.containsY(y)) {\r\n                sortDistance = x < bar.rect.left ? bar.rect.left - x : x - bar.rect.right;\r\n                priority = isHorizontal ? 1 : 2;\r\n            }\r\n            else {\r\n                const xDist = Math.min(Math.abs(x - bar.rect.left), Math.abs(x - bar.rect.right));\r\n                const yDist = Math.min(Math.abs(y - bar.rect.top), Math.abs(y - bar.rect.bottom));\r\n                realDistance = Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2));\r\n                sortDistance = isHorizontal ? yDist : xDist;\r\n                priority = 3;\r\n            }\r\n\r\n            if (typeof realDistance === 'undefined')\r\n                realDistance = sortDistance;\r\n\r\n            matches.push({\r\n                sortDistance: sortDistance,\r\n                distance: realDistance,\r\n                priority: priority,\r\n                data: {\r\n                    categoryIndex: bar.categoryIndex,\r\n                    seriesIndex: bar.seriesIndex,\r\n                    rect: bar.rect,\r\n                    series: this.series[bar.seriesIndex],\r\n                    value: Tayberry.getDataValue(this.series[bar.seriesIndex].data[bar.categoryIndex])\r\n                }\r\n            });\r\n        }\r\n\r\n        if (matches.length) {\r\n            matches.sort((a, b) => {\r\n                let ret = a.priority - b.priority;\r\n                if (!ret) ret = a.sortDistance - b.sortDistance;\r\n                if (!ret) ret = a.data.rect.height - b.data.rect.height;\r\n                return ret;\r\n            });\r\n            ret.found = true;\r\n            ret.normalisedDistance = matches[0].distance + Math.sqrt(matches[0].data.rect.area);\r\n            ret = Utils.assign(ret, matches[0].data);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nclass BarEnumerator extends renderer.ByCategoryEnumerator {\r\n    constructor(renderer, startCategoryIndex = 0) {\r\n        super(renderer, startCategoryIndex);\r\n        if (this.categoryCount) {\r\n            this.isStacked = this.tb.options.barPlot.mode === 'stacked';\r\n            this.isOverlaid = this.tb.options.barPlot.mode === 'overlaid';\r\n            this.isNormal = !this.isStacked && !this.isOverlaid;\r\n            this.barCount = (this.isStacked || this.isOverlaid) ? 1 : this.seriesCount;\r\n            this.categoryWidth = (this.plotArea.width / this.categoryCount);\r\n            // used for stacked bar charts - must be on single y-axis\r\n            this.yOrigin = this.renderer.series[0].yAxis.getOrigin();\r\n\r\n            this.onNewCategory();\r\n        }\r\n    }\r\n\r\n    onNewCategory() {\r\n        this.yBottomPositive = this.yOrigin;\r\n        this.yBottomNegative = this.yOrigin;\r\n        this.yRunningTotalPositive = 0;\r\n        this.yRunningTotalNegative = 0;\r\n        this.barIndex = 0;\r\n    }\r\n\r\n    next() {\r\n        let ret;\r\n\r\n        if (this.categoryIndex < this.categoryCount) {\r\n            const series = this.renderer.renderedSeries[this.seriesIndex];\r\n            const value = Tayberry.getDataValue(series.data[this.categoryIndex]);\r\n            let categoryXStart = this.plotArea.left + Math.floor(this.categoryIndex * this.categoryWidth);\r\n            let categoryXEnd = this.plotArea.left + Math.floor((this.categoryIndex + 1) * this.categoryWidth);\r\n            let barXStart = categoryXStart + Math.ceil(this.categoryWidth * this.tb.options.barPlot.categorySpacing / 2);\r\n            let barXEnd = categoryXEnd - Math.floor(this.categoryWidth * this.tb.options.barPlot.categorySpacing / 2);\r\n\r\n            const barWidth = Math.floor((barXEnd - barXStart) / this.barCount);\r\n            const xStart = Math.floor(barXStart + this.barIndex * barWidth);\r\n            const xEnd = Math.ceil(barXStart + (this.barIndex + 1) * barWidth);\r\n\r\n            const yTop = series.yAxis.getValueDisplacement(value + (value > 0 ? this.yRunningTotalPositive : this.yRunningTotalNegative));\r\n            let rect = new Rect(xStart, yTop, xEnd, this.isStacked ? (value > 0 ? this.yBottomPositive : this.yBottomNegative) : series.yAxis.getOrigin());\r\n            rect.left += Math.ceil(series.xAxis.mapLogicalXOrYUnit(this.tb.options.barPlot.barPadding) / 2);\r\n            rect.right -= Math.floor(series.xAxis.mapLogicalXOrYUnit(this.tb.options.barPlot.barPadding) / 2);\r\n            if (rect.right < rect.left)\r\n                rect.right = rect.left;\r\n            if (this.isHorizontal)\r\n                rect.swapXY();\r\n            rect.clip(this.tb.plotArea);\r\n\r\n            ret = {\r\n                seriesIndex: this.seriesIndex,\r\n                categoryIndex: this.categoryIndex,\r\n                series: this.renderer.series[this.seriesIndex],\r\n                renderedSeries: this.renderer.renderedSeries[this.seriesIndex],\r\n                value: Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]),\r\n                renderedValue: Tayberry.getDataValue(this.renderer.renderedSeries[this.seriesIndex].data[this.categoryIndex]),\r\n                rect: rect,\r\n                selected: this.tb.selectedItem.categoryIndex === this.categoryIndex && (this.tb.options.tooltips.shared || this.tb.selectedItem.series === this.renderer.series[this.seriesIndex])\r\n            };\r\n\r\n            if (this.isStacked) {\r\n                if (value > 0) {\r\n                    this.yRunningTotalPositive += value;\r\n                    this.yBottomPositive = yTop;\r\n                }\r\n                else {\r\n                    this.yRunningTotalNegative += value;\r\n                    this.yBottomNegative = yTop;\r\n                }\r\n            } else if (this.isNormal) {\r\n                this.barIndex++;\r\n            }\r\n\r\n            this.nextValue();\r\n\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nexports.BarRenderer = BarRenderer;","'use strict';\r\nvar Utils = require('./helpers/utils');\r\nvar Easing = require('./helpers/easing');\r\nvar Tayberry = require('./base').Tayberry;\r\n\r\nclass Renderer {\r\n    constructor(ctx, tayberry, series) {\r\n        this.ctx = ctx;\r\n        this.tb = tayberry;\r\n        this.series = null;\r\n        this.renderedSeries = null;\r\n        this.setSeries(series);\r\n    }\r\n\r\n    setSeries(series) {\r\n        var seriesIndex;\r\n        this.series = series;\r\n        this.renderedSeries = series.slice(0);\r\n        for (seriesIndex = 0; seriesIndex < this.renderedSeries.length; seriesIndex++) {\r\n            let actualSeries = this.series[seriesIndex];\r\n            actualSeries.renderer = this;\r\n            let elem = Utils.assign({}, actualSeries);\r\n            elem.data = this.renderedSeries[seriesIndex].data.slice(0);\r\n            if (elem.data.length && Array.isArray(elem.data[0])) {\r\n                for (var dataIndex = 0; dataIndex < elem.data.length; dataIndex++) {\r\n                    elem.data[dataIndex] = elem.data[dataIndex].slice(0);\r\n                }\r\n            }\r\n            this.renderedSeries[seriesIndex] = elem;\r\n        }\r\n    }\r\n\r\n    onAnimationFrame(elapsedTime, totalTime) {\r\n        var scaleFactor;\r\n        scaleFactor = Math.min(Easing.inQuad(elapsedTime, totalTime), 1);\r\n        for (let categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n            for (let seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n                const series = this.series[seriesIndex];\r\n                const value = Tayberry.getDataValue(series.data[categoryIndex]);\r\n                const yOrigin = series.yAxis.min <= 0 && 0 <= series.yAxis.max ? 0 : (series.yAxis.min > 0 ? series.yAxis.min : series.yAxis.max);\r\n                Tayberry.setDataValue(this.renderedSeries[seriesIndex].data, categoryIndex, yOrigin + scaleFactor * ((value - yOrigin)));\r\n            }\r\n        }\r\n    }\r\n\r\n    drawLegendIndicator(ctx, series, rect) {\r\n        ctx.fillStyle = series.colour;\r\n        ctx.fillRect(rect.left, rect.top, rect.width, rect.height);\r\n    }\r\n\r\n    drawLabel(sign, text, rect) {\r\n        if (this.tb.options.swapAxes)\r\n            rect = rect.clone().swapXY();\r\n        let x = (rect.left + rect.right) / 2;\r\n        let y;\r\n        if (this.tb.options.labels.verticalAlignment === 'top')\r\n            y = rect.top;\r\n        else if (this.tb.options.labels.verticalAlignment === 'bottom')\r\n            y = rect.bottom;\r\n        else\r\n            y = (rect.top + rect.bottom) / 2;\r\n        let baseline = 'middle';\r\n        let align = 'center';\r\n        if (this.tb.options.swapAxes) {\r\n            [x, y] = [y, x];\r\n            if (this.tb.options.labels.verticalPosition === 'outside')\r\n                align = 'left';\r\n            else if (this.tb.options.labels.verticalPosition === 'inside')\r\n                align = 'right';\r\n        } else {\r\n            baseline = Tayberry.mapVerticalPosition(sign, this.tb.options.labels.verticalPosition);\r\n        }\r\n        if (this.tb.plotArea.containsPoint(x, y)) {\r\n            this.ctx.save();\r\n            this.ctx.textAlign = align;\r\n            this.ctx.textBaseline = baseline;\r\n            this.ctx.fillText(text, x, y);\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n    drawPlot() {\r\n    }\r\n\r\n    drawLabels() {\r\n    }\r\n\r\n    hitTest() {\r\n    }\r\n\r\n}\r\n\r\nclass Enumerator {\r\n    constructor(renderer, startCategoryIndex = 0) {\r\n        this.renderer = renderer;\r\n        this.tb = renderer.tb;\r\n\r\n        this.categoryCount = this.renderer.renderedSeries[0].data.length;\r\n        this.categoryIndex = 0;\r\n        this.seriesIndex = 0;\r\n        this.seriesCount = this.renderer.renderedSeries.length;\r\n        if (this.categoryCount) {\r\n            this.isHorizontal = this.tb.options.swapAxes;\r\n            this.plotArea = this.tb.plotArea.clone();\r\n            if (this.isHorizontal)\r\n                this.plotArea.swapXY();\r\n            this.startCategoryIndex = Math.max(startCategoryIndex, 0);\r\n            this.startCategoryIndex = Math.min(this.startCategoryIndex, this.categoryCount - 1);\r\n            this.categoryIndex = this.startCategoryIndex;\r\n        }\r\n    }\r\n\r\n    nextValue() {\r\n    }\r\n}\r\n\r\nclass ByCategoryEnumerator extends Enumerator {\r\n    onNewCategory() {}\r\n\r\n    nextValue() {\r\n\r\n        let value;\r\n        do {\r\n            if (this.seriesIndex + 1 === this.seriesCount) {\r\n                this.seriesIndex = 0;\r\n                this.categoryIndex++;\r\n                if (this.categoryIndex >= this.categoryCount)\r\n                    break;\r\n                this.onNewCategory();\r\n            } else {\r\n                this.seriesIndex++;\r\n            }\r\n            value = Tayberry.getDataValue(this.renderer.renderedSeries[this.seriesIndex].data[this.categoryIndex]);\r\n        } while (Utils.isMissingValue(value));\r\n\r\n    }\r\n}\r\n\r\nclass BySeriesEnumerator extends Enumerator {\r\n    nextValue() {\r\n\r\n        let value;\r\n        do {\r\n            if (this.categoryIndex + 1 === this.categoryCount) {\r\n                this.categoryIndex = this.startCategoryIndex;\r\n                this.seriesIndex++;\r\n                if (this.seriesIndex >= this.seriesCount)\r\n                    break;\r\n            } else {\r\n                this.categoryIndex++;\r\n            }\r\n            value = Tayberry.getDataValue(this.renderer.renderedSeries[this.seriesIndex].data[this.categoryIndex]);\r\n        } while (Utils.isMissingValue(value));\r\n\r\n    }\r\n}\r\n\r\nexports.Renderer = Renderer;\r\nexports.ByCategoryEnumerator = ByCategoryEnumerator;\r\nexports.BySeriesEnumerator = BySeriesEnumerator;","'use strict';\r\nvar Utils = require('./helpers/utils');\r\nvar Rect = require('./helpers/rect').Rect;\r\nvar renderer = require('./renderer.base');\r\nvar Tayberry = require('./base').Tayberry;\r\n\r\nvar autoMarkerIndex = 0;\r\nconst markers = ['square', 'diamond', 'circle', 'triangle', 'triangle-inversed'];\r\n\r\nclass LineRenderer extends renderer.Renderer {\r\n    setSeries(series) {\r\n        let totalPoints = 0;\r\n        for (var i = 0; i < series.length; i++) {\r\n            if (!series[i].markerType) {\r\n                series[i].markerType = markers[autoMarkerIndex % markers.length];\r\n                autoMarkerIndex++;\r\n            }\r\n            totalPoints += series[i].data.length;\r\n        }\r\n        const showMarkers = this.tb.options.linePlot.showMarkers;\r\n        this.showMarkers = showMarkers === 'auto' ? totalPoints < this.tb.options.linePlot.noMarkersThreshold : showMarkers;\r\n        super.setSeries(series);\r\n    }\r\n\r\n    drawMarker(type, x, y, size, ctx = this.ctx) {\r\n        if (type === 'square') {\r\n            ctx.fillRect(x - size / 2, y - size / 2, size, size);\r\n        } else if (type === 'diamond') {\r\n            ctx.save();\r\n            ctx.translate(x, y);\r\n            ctx.rotate(-Math.PI / 4);\r\n            ctx.fillRect(0 - size / 2, 0 - size / 2, size, size);\r\n            ctx.restore();\r\n        } else if (type === 'circle') {\r\n            size = Math.round(size * 1.2);\r\n            ctx.beginPath();\r\n            ctx.arc(x, y, size / 2, 0, 2 * Math.PI);\r\n            ctx.fill();\r\n        } else if (type === 'triangle' || (type === 'triangle-inversed' && (size = -size))) {\r\n            size = Math.round(size * 1.2);\r\n            ctx.beginPath();\r\n            ctx.moveTo(x - size / 2, y + size / 2);\r\n            ctx.lineTo(x, y - size / 2);\r\n            ctx.lineTo(x + size / 2, y + size / 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n    }\r\n\r\n    drawPlot() {\r\n        this.ctx.save();\r\n        let pointEnumerator = new PointEnumerator(this);\r\n        let pt;\r\n        while ((pt = pointEnumerator.next())) {\r\n            if (pt.firstPoint) {\r\n                this.ctx.lineWidth = pt.seriesSelected ? this.tb.options.linePlot.highlightedLineWidth : this.tb.options.linePlot.lineWidth;\r\n                this.ctx.strokeStyle = pt.seriesSelected ? pt.renderedSeries.highlightColour : pt.renderedSeries.colour;\r\n                this.ctx.beginPath();\r\n                this.ctx.moveTo(pt.x, pt.y);\r\n            } else {\r\n                this.ctx.lineTo(pt.x, pt.y);\r\n            }\r\n            if (pt.lastPoint) {\r\n                this.ctx.stroke();\r\n            }\r\n        }\r\n        if (this.showMarkers) {\r\n            pointEnumerator = new PointEnumerator(this);\r\n            while ((pt = pointEnumerator.next())) {\r\n                if (pt.selected) {\r\n                    this.ctx.fillStyle = pt.renderedSeries.glowColour;\r\n                    this.drawMarker(pt.renderedSeries.markerType, pt.x, pt.y, this.tb.options.linePlot.highlightedMarkerSize);\r\n                }\r\n                this.ctx.fillStyle = pt.renderedSeries.colour;\r\n                this.drawMarker(pt.renderedSeries.markerType, pt.x, pt.y, this.tb.options.linePlot.markerSize);\r\n            }\r\n        }\r\n        this.ctx.restore();\r\n    }\r\n\r\n    drawLegendIndicator(ctx, series, rect) {\r\n        ctx.save();\r\n        ctx.lineWidth = 2;\r\n        ctx.strokeStyle = series.colour;\r\n        this.tb.drawLine(rect.left, rect.yMidpoint, rect.right, rect.yMidpoint);\r\n        ctx.fillStyle = series.colour;\r\n        this.drawMarker(series.markerType, rect.xMidpoint, rect.yMidpoint, this.tb.options.linePlot.markerSize, ctx);\r\n        ctx.restore();\r\n    }\r\n\r\n    drawLabels() {\r\n        if (this.tb.options.labels.enabled) {\r\n            this.ctx.save();\r\n            this.ctx.font = this.tb.labelFont;\r\n            this.ctx.fillStyle = this.tb.options.labels.font.colour;\r\n            let pointEnumerator = new PointEnumerator(this);\r\n            let pt;\r\n            while ((pt = pointEnumerator.next())) {\r\n                const rect = new Rect(pt.x, pt.y, pt.x, pt.y).inflate(this.tb.options.linePlot.markerSize / 2);\r\n                this.drawLabel(pt.value, pt.series.yAxis.options.labelFormatter(pt.value), rect);\r\n            }\r\n            this.ctx.restore();\r\n        }\r\n    }\r\n\r\n\r\n    hitTest(x, y) {\r\n        // TODO: Optimise\r\n        let ret = {\r\n            found: false,\r\n            plotType: 'line',\r\n            isXRange: false\r\n        };\r\n\r\n        let matches = [];\r\n\r\n        let pointEnumerator = new PointEnumerator(this);\r\n        let pt;\r\n        while ((pt = pointEnumerator.next())) {\r\n            const distance = Math.sqrt(Math.pow(pt.x - x, 2) + Math.pow(pt.y - y, 2));\r\n            const horizontalDistance = Math.abs(this.tb.options.swapAxes ? pt.y - y : pt.x - x);\r\n            matches.push({distance: distance, horizontalDistance: horizontalDistance, priority: 0, data: pt});\r\n            //if (!pt.firstPoint) {\r\n            //    if (x >= lastPt.x && x < pt.x) {\r\n            //const alpha = Math.arctan((pt.y - lastPt.y) / (pt.x - lastPt.x));\r\n            //const yAtX = (x - lastPt.x) * Math.tan(alpha) + lastPt.y;\r\n            //if (yAtX - 2 <= y < yAtX + 2) {\r\n            //    matches.push({\r\n            //        categoryIndex: pt.categoryIndex,\r\n            //        seriesIndex: pt.seriesIndex,\r\n            //        x: bar.rect,\r\n            //        series: this.series[bar.seriesIndex],\r\n            //        dataPoint: this.series[bar.seriesIndex].data[bar.categoryIndex]\r\n            //\r\n            //    })\r\n            //}\r\n            //}\r\n            //}\r\n            //lastPt = pt;\r\n\r\n        }\r\n        if (matches.length) {\r\n            matches.sort((e1, e2) => {\r\n                return (e1.horizontalDistance - e2.horizontalDistance) || (e1.distance - e2.distance);\r\n            });\r\n            if (true || matches[0].distance <= 5) {\r\n                pt = matches[0].data;\r\n                const rect = new Rect(pt.x, pt.y, pt.x, pt.y).inflate(this.tb.options.linePlot.markerSize / 2);\r\n                Utils.assign(ret, [{\r\n                    found: true,\r\n                    rect: rect,\r\n                    normalisedDistance: matches[0].distance + Math.sqrt(rect.area)\r\n                }, pt]);\r\n            }\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nclass PointEnumerator extends renderer.BySeriesEnumerator {\r\n    next() {\r\n        let ret;\r\n\r\n        if (this.seriesIndex < this.seriesCount) {\r\n            const series = this.renderer.renderedSeries[this.seriesIndex];\r\n            const value = Tayberry.getDataValue(series.data[this.categoryIndex]);\r\n            const xValue = Tayberry.getDataXValue(series.data, this.categoryIndex);\r\n            let x = series.xAxis.getValueDisplacement(xValue);\r\n            let y = series.yAxis.getValueDisplacement(value);\r\n\r\n            if (this.isHorizontal)\r\n                [x, y] = [y, x];\r\n\r\n            ret = {\r\n                firstPoint: this.categoryIndex === 0,\r\n                lastPoint: this.categoryIndex + 1 === this.categoryCount,\r\n                seriesIndex: this.seriesIndex,\r\n                categoryIndex: this.categoryIndex,\r\n                series: this.renderer.series[this.seriesIndex],\r\n                renderedSeries: this.renderer.renderedSeries[this.seriesIndex],\r\n                value: Tayberry.getDataValue(this.renderer.series[this.seriesIndex].data[this.categoryIndex]),\r\n                renderedValue: Tayberry.getDataValue(this.renderer.renderedSeries[this.seriesIndex].data[this.categoryIndex]),\r\n                x: x,\r\n                y: y,\r\n                seriesSelected: !this.tb.options.tooltips.shared && this.tb.selectedItem.series === this.renderer.series[this.seriesIndex],\r\n                selected: this.tb.selectedItem.categoryIndex === this.categoryIndex && (this.tb.options.tooltips.shared || this.tb.selectedItem.series === this.renderer.series[this.seriesIndex])\r\n            };\r\n\r\n            this.nextValue();\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nexports.LineRenderer = LineRenderer;","'use strict';\r\nvar Rect = require('./helpers/rect').Rect;\r\nvar Tayberry = require('./base.js').Tayberry;\r\nvar Utils = require('./helpers/utils');\r\n\r\nTayberry.mapVerticalPosition = function (sign, position) {\r\n    switch (position) {\r\n        case \"outside\":\r\n            return sign > 0 ? \"bottom\" : \"top\";\r\n        case \"inside\":\r\n            return sign > 0 ? \"top\" : \"bottom\";\r\n        default:\r\n            return \"middle\";\r\n    }\r\n};\r\n\r\nTayberry.prototype.mapLogicalXUnit = function (x) {\r\n    return this.scaleFactorX * x;\r\n};\r\n\r\nTayberry.prototype.mapLogicalYUnit = function (x) {\r\n    return this.scaleFactorY * x;\r\n};\r\n\r\nTayberry.prototype.mapScreenUnit = function (x) {\r\n    return x / this.scaleFactor;\r\n};\r\n\r\nTayberry.prototype.calculatePlotArea = function () {\r\n    const MAX_AXIS_CALC_SIZE_ATTEMPTS = 5;\r\n\r\n    this.plotArea = new Rect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n    if (this.options.title.text) {\r\n        this.plotArea.top += this.mapLogicalYUnit(this.options.elementSmallPadding);\r\n        this.plotArea.top += this.getFontHeight(this.options.title.font) * this.getMultilineTextHeight(this.titleFont, this.labelsCanvas.width, this.options.title.text);\r\n    }\r\n    if (this.options.legend.enabled)\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.elementLargePadding + this.options.legend.indicatorSize);\r\n\r\n    this.yAxes.map(e => e.adjustSize(this.plotArea, true, true));\r\n    this.xAxes.map(e => e.adjustSize(this.plotArea, true, true));\r\n\r\n    for (let i = 0; i < MAX_AXIS_CALC_SIZE_ATTEMPTS; i++) {\r\n        this.yAxes.map(e => e.calculateExtent());\r\n        this.xAxes.map(e => e.calculateExtent());\r\n        this.yAxes.map(e => e.updateFormatter());\r\n        this.xAxes.map(e => e.updateFormatter());\r\n        if (Utils.none(this.yAxes.map(e => e.adjustSize(this.plotArea))) && Utils.none(this.xAxes.map(e => e.adjustSize(this.plotArea))))\r\n            break;\r\n    }\r\n    this.plotArea.left = Math.ceil(this.plotArea.left);\r\n    this.plotArea.top = Math.ceil(this.plotArea.top);\r\n    this.plotArea.right = Math.floor(this.plotArea.right);\r\n    this.plotArea.bottom = Math.floor(this.plotArea.bottom);\r\n};\r\n\r\nTayberry.prototype.hitTest = function (x, y) {\r\n    let ret = {\r\n        found: false\r\n    };\r\n    let matches = [];\r\n    for (let i = 0; i < this.renderers.length; i++) {\r\n        const hitTestResult = this.renderers[i].hitTest(x, y);\r\n        if (hitTestResult.found) {\r\n            matches.push(hitTestResult);\r\n        }\r\n    }\r\n    if (matches.length) {\r\n        matches.sort((a, b) => a.normalisedDistance - b.normalisedDistance);\r\n        ret = matches[0];\r\n    }\r\n    return ret;\r\n};","(function () {\r\n    'use strict';\r\n    var Tayberry = require('./base.js').Tayberry;\r\n    require('./axis.js');\r\n    require('./core.js');\r\n    require('./drawing.js');\r\n    require('./events.js');\r\n    require('./defaults.js');\r\n    require('./sizing.js');\r\n\r\n    module.exports = {\r\n        /**\r\n         * Creates a Tayberry chart\r\n         *\r\n         * @param element   ID of container div, or HTMLElement\r\n         * @param options   Options object\r\n         */\r\n        create: function (element, options) {\r\n            var chart = new Tayberry();\r\n            chart.create(element);\r\n            chart.setOptions(options);\r\n            chart.render();\r\n        }\r\n    };\r\n\r\n})();\r\n"]}