{"version":3,"sources":["/source/node_modules/browserify/node_modules/browser-pack/_prelude.js","tayberry.min.js","/source/src/colour.js","/source/src/easing.js","/source/src/rect.js","/source/src/tayberry.axes.js","/source/src/tayberry.base.js","/source/src/tayberry.core.js","/source/src/tayberry.defaults.js","/source/src/tayberry.drawing.js","/source/src/tayberry.events.js","/source/src/tayberry.js","/source/src/tayberry.sizing.js","/source/src/utils.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Tayberry","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Utils","Colour","arguments","arg1","parseString","b","value","str","regExHex","regExInt","groupsHex","exec","groupsInt","parseHex","ret","parseInt","parseFloat","component","Math","round","min","max","clipComponent","number","clip","formatString","get","colour","multiplyBy","toString","./utils.js",2,"linear","time","duration","inQuad","factor","outQuad",3,"Rect","rect","left","top","right","bottom","x","y","containsX","containsY","minY","maxY","minX","maxX","clipRect",4,"_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","calculateYAxisExtent","targetTicks","approxStep","scale","targetYStart","options","yAxis","targetYEnd","overriddenStart","overriddenEnd","_calculateYDataMinMax","calculateYDataMinMax","_calculateYDataMinMax2","dataYMin","dataYMax","dataYRange","targetYRange","plotArea","height","mapLogicalYUnit","tickStep","pow","floor","log","yTickStep","ceil","yMin","yMax","yTickStart","yTickEnd","drawXAxis","barWidth","lastXEnd","categoryCount","categories","width","series","data","ctx","save","fillStyle","font","textAlign","textBaseline","xAxis","labelPosition","size","elementSmallPadding","textWidth","getTextWidth","xStart","xEnd","fillText","elementLargePadding","title","restore","drawYAxis","yValue","yOrigin","getYOrigin","mapLogicalXUnit","valueHeight","getYHeight","labelFormatter","drawLine","gridLines","translate","rotate","PI","./tayberry.base.js",5,"selectedItem","containerElement","canvas","renderedSeries","scaleFactor","titleFont",6,"create","document","getElementById","createElement","style","appendChild","getContext","initialise","devicePixelRatio","clientWidth","clientHeight","scaleFactorX","scaleFactorY","updateFonts","face","updateYFormatter","labelFormat","createPercentageFormatter","labelPrefix","labelSuffix","createFixedNumberFormatter","currencySymbol","createAutoNumberFormatter","setOptions","optionOverrides","defaultOptions","presets","index","deepAssign","setSeries","setCategories","addEventListener","onMouseMove","bind","onMouseLeave","onTouchStart","throttle","onWindowResize","calculateHighlightColour","newColour","increaseBy","sum","slice","actualSeries","defaultPalette","highlightColour","elem","assign","categoryIndex","seriesIndex","seriesPositiveTotals","seriesNegativeTotals","seriesMinima","seriesMaxima","isMissingValue","reduce","barMode","createTooltip","tooltipElement","className","position","zIndex","borderRadius","backgroundColor","border","padding","display","innerHTML","body","./colour",7,"text","type","step","barPadding","categorySpacing","tooltips","shared","headerTemplate","valueTemplate","footerTemplate","legend","enabled","indicatorSize","labels","verticalAlignment","verticalPosition","histogram",8,"render","calculatePlotArea","finalisePlotArea","animator","requestAnimationFrame","onAnimate","animatationStart","performance","now","animationLength","clear","clearRect","drawTitle","drawLabel","sign","containsPoint","mapVerticalPosition","draw","enumerateBars","bar","selected","fillRect","x1","y1","x2","y2","strokeStyle","beginPath","moveTo","lineTo","stroke","redraw","drawLegend","totalWidth","name",9,"Easing","timestamp","elapsed","event","currentTarget","relatedTarget","handleMouseMove","clientX","clientY","boundingRect","getBoundingClientRect","hitTestResult","hitTest","found","aboveZero","category","tooltipHtml","tooltipRect","borderColor","pageXOffset","mapScreenUnit","pageYOffset","targetTouches","touch","preventDefault","oldSelectedItem","./easing.js","./rect",10,"element","chart","./tayberry.axes.js","./tayberry.core.js","./tayberry.defaults.js","./tayberry.drawing.js","./tayberry.events.js","./tayberry.sizing.js",11,"measureText","matches","isOverlaid","minMatchIndex","minHeight","match","callback","isStacked","isNormal","barCount","categoryWidth","cx","yBottomPositive","yBottomNegative","yRunningTotalPositive","yRunningTotalNegative","yTop","stopEnumerating","renderedValue","./utils",12,"identity","obj","isNaN","array","func","getter","ignoreMissing","Date","getTime","innerAssign","targetObject","sourceObjects","apply","concat","to","currentSourceObject","keysArray","keys","nextIndex","len","nextKey","nextValue","desc","getOwnPropertyDescriptor","formatValues","escapeAsHtml","replace","placeholder","stringToHtml","locateDecimalPoint","formatNumberThousands","decimalPlaces","parts","toFixed","split","join","prefix","suffix","precision","div","createTextNode","fn","threshold","last","deferTimer","context","args","clearTimeout","setTimeout"],"mappings":"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","file":"tayberry.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.Tayberry=t()}}(function(){return function t(e,i,s){function n(o,a){if(!i[o]){if(!e[o]){var h=\"function\"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);var l=new Error(\"Cannot find module '\"+o+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return n(i?i:t)},c,c.exports,t,e,i,s)}return i[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=t(\"./utils.js\"),o=function(){function t(){if(s(this,t),1===arguments.length){var e=arguments[0];\"string\"==typeof e?this.parseString(e):(this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a)}}return n(t,[{key:\"parseString\",value:function(t){var e=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,i=/^rgba?\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+))+\\)$/i,s=e.exec(t),n=i.exec(t);if(s){var r=function(t){var e=parseInt(t,16);return e=16*e+e};this.r=s[1]?parseInt(s[1],16):r(s[4]),this.g=s[2]?parseInt(s[2],16):r(s[5]),this.b=s[3]?parseInt(s[3],16):r(s[6]),this.a=null}else n?(this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3]),this.a=n[5]?parseFloat(n[5]):null):(this.r=null,this.g=null,this.b=null,this.a=null);return this}},{key:\"clipComponent\",value:function(t){return this[t]=Math.round(this[t]),this[t]=Math.min(this[t],255),this[t]=Math.max(this[t],0),this}},{key:\"clip\",value:function(){return this.clipComponent(\"r\"),this.clipComponent(\"g\"),this.clipComponent(\"b\"),this}},{key:\"multiplyBy\",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.clip(),this}},{key:\"increaseBy\",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this.clip(),this}},{key:\"toString\",value:function(){var t;return t=this.a?r.formatString(\"rgba({r},{g},{b},{a})\",this):r.formatString(\"rgb({r},{g},{b})\",this)}},{key:\"sum\",get:function(){return this.r+this.g+this.b}}],[{key:\"multiplyBy\",value:function(e,i){return new t(e).multiplyBy(i).toString()}}]),t}();i.Colour=o},{\"./utils.js\":12}],2:[function(t,e,i){\"use strict\";i.linear=function(t,e){return t/e},i.linear=function(t,e){return t/e},i.inQuad=function(t,e){var i=t/e;return i*i},i.outQuad=function(t,e){var i=t/e;return i*(2-i)}},{}],3:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(){function t(){s(this,t);var e;1===arguments.length?(e=arguments[0],this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom):4===arguments.length&&(this.left=arguments[0],this.top=arguments[1],this.right=arguments[2],this.bottom=arguments[3])}return n(t,[{key:\"containsPoint\",value:function(t,e){return this.containsX(t)&&this.containsY(e)}},{key:\"containsY\",value:function(t){return t>=this.minY&&t<this.maxY}},{key:\"containsX\",value:function(t){return t>=this.minX&&t<this.maxX}},{key:\"clip\",value:function(t){return this.left<t.minX?this.left=t.minX:this.left>t.maxX&&(this.left=t.maxX),this.right<t.minX?this.right=t.minX:this.right>t.maxX&&(this.right=t.maxX),this.top<t.minY?this.top=t.minY:this.top>t.maxY&&(this.top=t.maxY),this.bottom>t.maxY?this.bottom=t.maxY:this.bottom<t.minY&&(this.bottom=t.minY),this}},{key:\"width\",get:function(){return this.right-this.left}},{key:\"height\",get:function(){return this.bottom-this.top}},{key:\"maxY\",get:function(){return Math.max(this.bottom,this.top)}},{key:\"minY\",get:function(){return Math.min(this.bottom,this.top)}},{key:\"minX\",get:function(){return Math.min(this.left,this.right)}},{key:\"maxX\",get:function(){return Math.max(this.left,this.right)}}]),t}();i.Rect=r},{}],4:[function(t,e,i){\"use strict\";var s=function(){function t(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(h){n=!0,r=h}finally{try{!s&&a[\"return\"]&&a[\"return\"]()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),n=t(\"./utils.js\"),r=t(\"./tayberry.base.js\").Tayberry;r.prototype.calculateYAxisExtent=function(){var t,e,i,r=this.options.yAxis.min,o=this.options.yAxis.max,a=\"undefined\"!=typeof r,h=\"undefined\"!=typeof o;if(!a||!h){var l=this.calculateYDataMinMax(),c=s(l,2),u=c[0],p=c[1],d=p-u;a||(r=u-.1*d,u>=0&&0>r&&(r=0)),h||(o=p+.1*d,0>=p&&r>0&&(o=0))}var f=o-r;t=this.plotArea.height/this.mapLogicalYUnit(this.options.yAxis.tickStep),e=f/t,i=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))),this.yTickStep=Math.ceil(e/i)*i,this.yMin=r,this.yMax=o,a||(this.yMin=Math.floor(this.yMin/i)*i),h||(this.yMax=Math.ceil(this.yMax/i)*i),this.yTickStart=Math.ceil(Math.abs(this.yMin)/this.yTickStep)*n.sign(this.yMin)*this.yTickStep,this.yTickEnd=Math.floor(Math.abs(this.yMax)/this.yTickStep)*n.sign(this.yMax)*this.yTickStep},r.prototype.drawXAxis=function(){var t,e,i,s,n,r;for(e=this.renderedSeries[0].data.length,i=Math.floor(this.plotArea.width/this.series[0].data.length),this.ctx.save(),this.ctx.fillStyle=this.options.font.colour,this.ctx.textAlign=\"center\",this.ctx.textBaseline=\"bottom\",t=0;e>t;t++){s=this.plotArea.left+Math.floor(t*i+i/2),n=this.plotArea.bottom+this.mapLogicalYUnit(this.options.font.size+this.options.elementPadding);var o=this.getTextWidth(this.categories[t]),a=s-o/2,h=s+o/2;(\"undefined\"==typeof r||a>r)&&(this.ctx.fillText(this.categories[t],s,n),r=h)}s=this.plotArea.left+this.plotArea.width/2,n=this.plotArea.bottom+2*this.mapLogicalYUnit(this.options.font.size+this.options.elementPadding),this.ctx.fillText(this.options.xAxis.title,s,n),this.ctx.restore()},r.prototype.drawYAxis=function(){var t,e,i,s=this.getYOrigin();for(this.ctx.save(),this.ctx.fillStyle=this.options.font.colour,this.ctx.textAlign=\"right\",this.ctx.textBaseline=\"middle\",t=this.yTickStart;t<=this.yTickEnd&&this.yTickStep;){t=this.yTickStart+Math.round((t+this.yTickStep-this.yTickStart)/this.yTickStep)*this.yTickStep,e=this.plotArea.left-this.mapLogicalXUnit(this.options.elementPadding);var n=this.getYHeight(t);i=s-n,this.plotArea.containsY(i)&&(this.ctx.fillText(this.options.yAxis.labelFormatter(t),e,i),this.drawLine(this.plotArea.left,i,this.plotArea.right,i,this.options.yAxis.gridLines.colour))}e=0,i=this.plotArea.top+this.plotArea.height/2,this.ctx.textAlign=\"center\",this.ctx.textBaseline=\"top\",this.ctx.translate(e,i),this.ctx.rotate(-Math.PI/2),this.ctx.fillText(this.options.yAxis.title,0,0),this.ctx.restore()}},{\"./tayberry.base.js\":5,\"./utils.js\":12}],5:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(){function t(){s(this,t),this.selectedItem={},this.containerElement=null,this.canvas=null,this.ctx=null,this.renderedSeries=null,this.options=null,this.scaleFactor=null,this.titleFont=null,this.plotArea=null,this.yTickStep=null,this.yTickStart=null,this.yTickEnd=null,this.yMin=null,this.yMax=null,this.series=[],this.categories=[]}return n(t,[{key:\"seriesCount\",get:function(){return this.series.length}},{key:\"categoryCount\",get:function(){return this.series.length?this.series[0].data.length:0}}]),t}();i.Tayberry=r},{}],6:[function(t,e,i){\"use strict\";var s=t(\"./colour\").Colour,n=t(\"./utils.js\"),r=t(\"./tayberry.base.js\").Tayberry;r.prototype.create=function(t){\"string\"==typeof t?this.containerElement=document.getElementById(t):this.containerElement=t,this.canvas=document.createElement(\"canvas\"),this.canvas.style.width=\"100%\",this.canvas.style.height=\"100%\",this.containerElement.appendChild(this.canvas),this.ctx=this.canvas.getContext(\"2d\"),this.renderedSeries=null,this.options={},this.initialise(),this.canvas.addEventListener(\"mousemove\",this.onMouseMove.bind(this)),this.canvas.addEventListener(\"mouseleave\",this.onMouseLeave.bind(this)),this.canvas.addEventListener(\"touchstart\",this.onTouchStart.bind(this)),window.addEventListener(\"resize\",this.onWindowResize.bind(this))},r.prototype.initialise=function(){this.scaleFactor=window.devicePixelRatio||1,this.canvas.width=Math.round(this.containerElement.clientWidth*this.scaleFactor),this.canvas.height=Math.round(this.containerElement.clientHeight*this.scaleFactor),this.scaleFactorX=this.canvas.width/this.containerElement.clientWidth,this.scaleFactorY=this.canvas.height/this.containerElement.clientHeight,this.selectedItem={},this.plotArea=null},r.prototype.updateFonts=function(){this.ctx.font=this.mapLogicalYUnit(this.options.font.size)+\"px \"+this.options.font.face,this.titleFont=this.mapLogicalYUnit(this.options.title.font.size)+\"px \"+this.options.font.face},r.prototype.updateYFormatter=function(){this.options.yAxis.labelFormatter||(\"percentage\"===this.options.yAxis.labelFormat?this.options.yAxis.labelFormatter=n.createPercentageFormatter(this.yMax-this.yMin,this.options.yAxis.labelPrefix,this.options.yAxis.labelSuffix):\"currency\"===this.options.yAxis.labelFormat?this.options.yAxis.labelFormatter=n.createFixedNumberFormatter(this.yMax-this.yMin,this.options.yAxis.labelPrefix||this.options.yAxis.currencySymbol,this.options.yAxis.labelSuffix):this.options.yAxis.labelFormatter=n.createAutoNumberFormatter(this.yMax-this.yMin,this.options.yAxis.labelPrefix,this.options.yAxis.labelSuffix))},r.prototype.setOptions=function(t){this.options=n.deepAssign({},this.defaultOptions(),t),this.setSeries(t.series),this.setCategories(t.xAxis.categories),this.updateFonts()},r.calculateHighlightColour=function(t){var e=new s(t);return e.increaseBy(30*(e.sum>=540?-1:1)).toString()},r.prototype.setSeries=function(t){var e;for(Array.isArray(t)?this.series=t:this.series=[t],this.renderedSeries=t.slice(0),e=0;e<this.renderedSeries.length;e++){var i=this.series[e];i.colour=i.colour||this.options.defaultPalette[e],i.highlightColour=i.highlightColour||r.calculateHighlightColour(i.colour);var s=n.assign({},i);s.data=this.renderedSeries[e].data.slice(0),this.renderedSeries[e]=s}},r.prototype.setCategories=function(t){this.categories=t},r.prototype.calculateYDataMinMax=function(){var t,e,i,s;this.seriesPositiveTotals=[],this.seriesNegativeTotals=[];var r=[],o=[];if(this.series[0].data.length){for(t=0;t<this.series[0].data.length;t++)for(this.seriesPositiveTotals[t]=0,this.seriesNegativeTotals[t]=0,e=0;e<this.series.length;e++){var a=this.series[e].data[t];0>a?this.seriesNegativeTotals[t]+=a:this.seriesPositiveTotals[t]+=a}for(var h=0;h<this.series.length;h++){var l=this.series[h];r.push(n.reduce(l.data,Math.min)),o.push(n.reduce(l.data,Math.max))}\"stacked\"===this.options.barMode?(i=Math.min(0,n.reduce(this.seriesNegativeTotals,Math.min)),s=Math.max(n.reduce(this.seriesPositiveTotals,Math.max),0)):(i=n.reduce(r,Math.min),s=n.reduce(o,Math.max))}return[i,s]},r.prototype.createTooltip=function(){this.tooltipElement=document.createElement(\"div\"),this.tooltipElement.className=\"tayberry-tooltip\",this.tooltipElement.style.position=\"absolute\",this.tooltipElement.style.left=\"0px\",this.tooltipElement.style.top=\"0px\",this.tooltipElement.style.zIndex=\"99999\",this.tooltipElement.style.font=this.options.font.size+\"px \"+this.options.font.face,this.tooltipElement.style.borderRadius=\"3px\",this.tooltipElement.style.backgroundColor=\"white\",this.tooltipElement.style.border=\"2px solid black\",this.tooltipElement.style.padding=\"0.15em 0.4em\",this.tooltipElement.style.display=\"none\",this.tooltipElement.innerHTML=\"\",document.body.appendChild(this.tooltipElement),this.tooltipElement.addEventListener(\"mousemove\",this.onMouseMove.bind(this)),this.tooltipElement.addEventListener(\"mouseleave\",this.onMouseLeave.bind(this))}},{\"./colour\":1,\"./tayberry.base.js\":5,\"./utils.js\":12}],7:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.defaultOptions=function(){return{defaultPalette:[\"#6FE87B\",\"#FFAB51\",\"#51A8FF\",\"#B651FF\",\"#FF6051\",\"#636363\"],title:{text:\"\",font:{size:24}},font:{colour:\"#444\",size:12,face:\"sans-serif\"},xAxis:{title:\"\",type:\"category\",min:0,max:100,step:1,categories:[]},yAxis:{title:\"\",gridLines:{colour:\"#ccc\"},min:void 0,max:void 0,tickStep:30,labelFormat:\"number\",labelFormatter:void 0,labelPrefix:void 0,labelSuffix:void 0,currencySymbol:\"£\"},series:[],barMode:\"normal\",barPadding:2,elementPadding:5,categorySpacing:.3,tooltip:{shared:!1,headerTemplate:\"<strong>{category}</strong><table>\",valueTemplate:'<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">●</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',footerTemplate:\"</table>\"},legend:{enabled:!0,indicatorSize:15},labels:{enabled:!1,verticalAlignment:\"top\",verticalPosition:\"outside\"}}}},{\"./tayberry.base.js\":5}],8:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.render=function(){this.calculatePlotArea(),this.calculateYAxisExtent(),this.updateYFormatter(),this.finalisePlotArea(),this.animator=requestAnimationFrame(this.onAnimate.bind(this)),this.animatationStart=performance.now(),this.animationLength=500,this.drawXAxis(),this.drawYAxis(),this.createTooltip()},s.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.drawTitle=function(){if(this.options.title.text){var t=this.canvas.width/2,e=0;this.ctx.save(),this.ctx.textAlign=\"center\",this.ctx.textBaseline=\"top\",this.ctx.font=this.titleFont,this.ctx.fillStyle=this.options.font.colour,this.ctx.fillText(this.options.title.text,t,e),this.ctx.restore()}},s.prototype.drawLabel=function(t,e,i){var n=(i.left+i.right)/2,r=void 0;r=\"top\"===this.options.labels.verticalAlignment?i.top:\"bottom\"===this.options.labels.verticalAlignment?i.bottom:(i.top+i.bottom)/2,this.plotArea.containsPoint(n,r)&&(this.ctx.save(),this.ctx.textAlign=\"center\",this.ctx.textBaseline=s.mapVerticalPosition(t,this.options.labels.verticalPosition),this.ctx.fillStyle=this.options.font.colour,this.ctx.fillText(e,n,r),this.ctx.restore())},s.prototype.draw=function(){this.ctx.save(),this.enumerateBars(function(t){this.ctx.fillStyle=t.selected?t.renderedSeries.highlightColour:t.renderedSeries.colour,this.ctx.fillRect(t.rect.left,t.rect.top,t.rect.width,t.rect.height)}.bind(this)),this.ctx.restore(),this.options.labels.enabled&&(this.ctx.save(),this.enumerateBars(function(t){this.drawLabel(t.value,this.options.yAxis.labelFormatter(t.value),t.rect)}.bind(this)),this.ctx.restore())},s.prototype.drawLine=function(t,e,i,s,n){this.ctx.save(),n&&(this.ctx.strokeStyle=n),this.ctx.beginPath(),this.ctx.moveTo(t+.5,e+.5),this.ctx.lineTo(i+.5,s+.5),this.ctx.stroke(),this.ctx.restore()},s.prototype.redraw=function(){this.clear(),this.drawTitle(),this.drawXAxis(),this.drawYAxis(),this.drawLegend(),this.draw()},s.prototype.drawLegend=function(){if(this.options.legend.enabled){for(var t=0,e=this.mapLogicalXUnit(this.options.legend.indicatorSize),i=0;i<this.series.length;i++){var s=this.series[i];s.name&&(t+=this.getTextWidth(s.name)+e+this.mapLogicalXUnit(4)+this.mapLogicalXUnit(this.options.elementPadding))}for(var n=this.plotArea.left+this.plotArea.width/2-t/2,r=this.canvas.height-e,i=0;i<this.renderedSeries.length;i++){var s=this.renderedSeries[i];s.name&&(this.ctx.fillStyle=s.colour,this.ctx.fillRect(n,r,e,e),this.ctx.textBaseline=\"middle\",this.ctx.fillStyle=this.options.font.colour,n+=e+this.mapLogicalXUnit(4),this.ctx.fillText(s.name,n,r+e/2),n+=this.getTextWidth(s.name)+this.mapLogicalXUnit(this.options.elementPadding))}}}},{\"./tayberry.base.js\":5}],9:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./easing.js\"),r=t(\"./utils.js\"),o=t(\"./tayberry.base.js\").Tayberry;o.prototype.onAnimate=function(t){var e,i;e=t-this.animatationStart,i=Math.min(n.inQuad(e,this.animationLength),1);for(var s=0;s<this.series[0].data.length;s++)for(var r=0;r<this.series.length;r++){var o=this.series[r].data[s],a=this.yMin<=0&&0<=this.yMax?0:this.yMin>0?this.yMin:this.yMax;this.renderedSeries[r].data[s]=a+i*(o-a)}this.redraw(),1>i&&(this.animator=requestAnimationFrame(this.onAnimate.bind(this)))},o.prototype.onMouseLeave=function(t){(t.currentTarget==this.canvas&&t.relatedTarget!==this.tooltipElement||t.currentTarget==this.tooltipElement&&t.relatedTarget!==this.canvas)&&(this.selectedItem={},this.tooltipElement.style.display=\"none\",this.redraw())},o.prototype.handleMouseMove=function(t,e){var i=new s(this.canvas.getBoundingClientRect()),n=!1;if(i.containsPoint(t,e)){var o=t-i.left,a=e-i.top,h=this.hitTest(this.mapLogicalXUnit(o),this.mapLogicalYUnit(a));if(h.found){var l=h.rect.top<h.rect.bottom,c=this.categories[h.categoryIndex];this.tooltipElement.style.display=\"block\";var u=r.formatString(this.options.tooltip.headerTemplate,{category:c},!0);if(this.options.tooltip.shared)for(var p=0;p<this.series.length;p++){var d=this.series[p],f=d.data[h.categoryIndex];u+=r.formatString(this.options.tooltip.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}else{var d=this.series[h.seriesIndex],f=d.data[h.categoryIndex];u+=r.formatString(this.options.tooltip.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}u+=this.options.tooltip.footerTemplate,this.tooltipElement.innerHTML=u;var g=this.tooltipElement.getBoundingClientRect();this.tooltipElement.style.borderColor=this.renderedSeries[h.seriesIndex].colour,this.tooltipElement.style.left=window.pageXOffset+i.left+this.mapScreenUnit(h.rect.width)/2+h.rect.left/this.scaleFactor-g.width/2+\"px\",this.tooltipElement.style.top=window.pageYOffset+i.top+this.mapScreenUnit(h.rect.top)-g.height*(l?1:0)-this.options.elementPadding*(l?1:-1)+\"px\",this.selectedItem=h,n=!0}}return n},o.prototype.onTouchStart=function(t){for(var e=0;e<t.targetTouches.length;e++){var i=t.targetTouches[e];if(this.handleMouseMove(i.clientX,i.clientY)){t.preventDefault(),this.redraw();break}}},o.prototype.onMouseMove=function(t){var e=r.assign({},this.selectedItem);this.handleMouseMove(t.clientX,t.clientY)||(this.selectedItem={}),(e.categoryIndex!==this.selectedItem.categoryIndex||e.seriesIndex!==this.selectedItem.seriesIndex)&&this.redraw()},o.prototype.onWindowResize=function(t){this.initialise(),this.updateFonts(),this.calculatePlotArea(),this.calculateYAxisExtent(),this.finalisePlotArea(),this.redraw()}},{\"./easing.js\":2,\"./rect\":3,\"./tayberry.base.js\":5,\"./utils.js\":12}],10:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;t(\"./tayberry.axes.js\"),t(\"./tayberry.core.js\"),t(\"./tayberry.drawing.js\"),t(\"./tayberry.events.js\"),t(\"./tayberry.defaults.js\"),t(\"./tayberry.sizing.js\"),e.exports={create:function(t,e){var i=new s;i.create(t),i.setOptions(e),i.render()}}},{\"./tayberry.axes.js\":4,\"./tayberry.base.js\":5,\"./tayberry.core.js\":6,\"./tayberry.defaults.js\":7,\"./tayberry.drawing.js\":8,\"./tayberry.events.js\":9,\"./tayberry.sizing.js\":11}],11:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./utils\"),r=t(\"./tayberry.base.js\").Tayberry;r.mapVerticalPosition=function(t,e){switch(e){case\"outside\":return t>0?\"bottom\":\"top\";case\"inside\":return t>0?\"top\":\"bottom\";default:return\"middle\"}},r.prototype.mapLogicalXUnit=function(t){return this.scaleFactorX*t},r.prototype.mapLogicalYUnit=function(t){return this.scaleFactorY*t},r.prototype.mapScreenUnit=function(t){return t/this.scaleFactor},r.prototype.getTextWidth=function(t){return this.ctx.measureText(t).width},r.prototype.calculatePlotArea=function(){this.plotArea=new s(0,0,this.canvas.width,this.canvas.height),this.options.title.text&&(this.plotArea.top+=this.mapLogicalYUnit(this.options.elementPadding+this.options.title.font.size)),this.options.yAxis.title&&(this.plotArea.left+=this.mapLogicalXUnit(this.options.elementPadding+this.options.font.size)),this.options.xAxis.title&&(this.plotArea.bottom-=this.mapLogicalYUnit(this.options.elementPadding+this.options.font.size)),this.plotArea.bottom-=this.mapLogicalYUnit(this.options.font.size+this.options.font.size),this.options.legend.enabled&&(this.plotArea.bottom-=this.mapLogicalYUnit(this.options.elementPadding+this.options.legend.indicatorSize))},r.prototype.finalisePlotArea=function(){this.plotArea.left+=this.getTextWidth(this.options.yAxis.labelFormatter(this.yMax))+this.mapLogicalXUnit(this.options.elementPadding),this.plotArea.left=Math.floor(this.plotArea.left),this.plotArea.top=Math.floor(this.plotArea.top),this.plotArea.right=Math.ceil(this.plotArea.right),this.plotArea.bottom=Math.ceil(this.plotArea.bottom)},r.prototype.getYHeight=function(t){return Math.round(t*this.plotArea.height/(this.yMax-this.yMin))},r.prototype.hitTest=function(t,e){var i={found:!1,categoryIndex:void 0,seriesIndex:void 0,rect:void 0},s=[],r=\"overlaid\"===this.options.barMode;if(this.enumerateBars(function(i){return i.rect.containsPoint(t,e)&&(s.push({categoryIndex:i.categoryIndex,seriesIndex:i.seriesIndex,rect:i.rect}),!r)?!0:void 0}.bind(this)),s.length){i.found=!0;for(var o=0,a=s[0].rect.height,h=1;h<s.length;h++){var l=s[h];l.rect.height<a&&(o=h,a=l.rect.height)}i=n.assign(i,s[o])}return i},r.prototype.getYOrigin=function(){return this.plotArea.bottom-this.getYHeight(0-this.yMin)},r.prototype.enumerateBars=function(t){var e=this.renderedSeries[0].data.length;if(e)for(var i=\"stacked\"===this.options.barMode,n=\"overlaid\"===this.options.barMode,r=!i&&!n,o=i||n?1:this.series.length,a=Math.floor(this.plotArea.width/e),h=Math.floor(a*(1-this.options.categorySpacing)/o),l=this.getYOrigin(),c=0;e>c;c++)for(var u=this.plotArea.left+Math.floor(c*a+a*this.options.categorySpacing/2),p=h,d=l,f=l,g=0,m=0,y=0;y<this.renderedSeries.length;y++){var x=this.renderedSeries[y].data[c],v=l-this.getYHeight(x+(x>0?g:m)),b=new s(u,v,u+p,x>0?d:f);b.left+=Math.ceil(this.options.barPadding*this.scaleFactor/2),b.right-=Math.floor(this.options.barPadding*this.scaleFactor/2),b.right<b.left&&(b.right=b.left),b.clip(this.plotArea);var A=t({seriesIndex:y,categoryIndex:c,series:this.renderedSeries[y],renderedSeries:this.renderedSeries[y],value:this.series[y].data[c],renderedValue:this.renderedSeries[y].data[c],rect:b,selected:this.selectedItem.categoryIndex===c&&this.selectedItem.seriesIndex===y});if(A)break;i?x>0?(g+=x,d=v):(m+=x,f=v):r&&(u+=h)}}},{\"./rect\":3,\"./tayberry.base.js\":5,\"./utils\":12}],12:[function(t,e,i){\"use strict\";!function(){i.identity=function(t){return t},i.reduce=function(t,e,s){var n,r;if(t.reduce&&!s)n=t.reduce(function(t,i){return e(t,i)});else if(s=s||i.identity,t.length)for(n=s(t[0]),r=1;r<t.length;r++)n=e(n,s(t[r]));return n},i.sign=Math.sign||function(t){return t>0?1:0>t?-1:0},i.now=\"undefined\"!=typeof performance&&\"undefined\"!=typeof performance.now?performance.now:function(){return(new Date).getTime()};var t=function e(t,i){if(!t&&Object.assign)return Object.assign.apply(Object,arguments);if(void 0===i||null===i)throw new TypeError(\"Cannot convert first argument to object\");for(var s=Object(i),n=2;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var o=Object.keys(r),a=0,h=o.length;h>a;a++){var l=o[a],c=r[l],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(t&&\"object\"==typeof s[l]&&!Array.isArray(c)&&\"object\"==typeof c?e(!0,s[l],c):s[l]=c)}}}return s};i.assign=function(e){return t.apply(null,[!1,e].concat(Array.prototype.slice.call(arguments,1)))},i.deepAssign=function(e){return t.apply(null,[!0,e].concat(Array.prototype.slice.call(arguments,1)))},i.formatString=function(t,e,s){return t.replace(/{(\\w+)}/g,function(t,n){var r=e[n];return\"undefined\"!=typeof r?s?i.stringToHtml(r):r:t})},i.locateDecimalPoint=function(t){return Math.floor(Math.log(t)/Math.log(10))},i.formatNumberThousands=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=t.toFixed(e).split(\".\");return i[0]=i[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),i.join(\".\")},i.createAutoNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],r=i.locateDecimalPoint(t);return r=0>r?-r+n-1:0,function(t){return e+i.formatNumberThousands(t,r)+s}},i.createFixedNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3];return function(t){return e+i.formatNumberThousands(t,n)+s}},i.createPercentageFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"%\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],r=i.locateDecimalPoint(100*t);return r=0>r?-r+n-1:0,function(t){return e+i.formatNumberThousands(100*t,r)+s}},i.stringToHtml=function(t){var e=document.createElement(\"div\");return e.appendChild(document.createTextNode(t)),e.innerHTML}}()},{}]},{},[10])(10)});\n//# sourceMappingURL=tayberry.min.js.map","var Utils = require('./utils.js');\r\n\r\nclass Colour {\r\n    /**\r\n     * Constructs a Colour object.\r\n     *\r\n     * @param colourCode    an HTML colour code in hex or integer (rgb) form\r\n     */\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            let arg1 = arguments[0];\r\n            if (typeof arg1 === 'string')\r\n                this.parseString(arg1);\r\n            else {\r\n                this.r = arg1.r;\r\n                this.g = arg1.g;\r\n                this.b = arg1.b;\r\n                this.a = arg1.a;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses an HTML colour code\r\n     * @param str\r\n     * @returns {Colour}\r\n     */\r\n    parseString (str) {\r\n        let regExHex = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;\r\n        let regExInt = /^rgba?\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+))+\\)$/i;\r\n        const groupsHex = regExHex.exec(str);\r\n        const groupsInt = regExInt.exec(str);\r\n        if (groupsHex) {\r\n            let parseHex = function(value) {\r\n                let ret = parseInt(value, 16);\r\n                ret = ret*0x10 + ret;\r\n                return ret;\r\n            };\r\n            this.r = groupsHex[1] ? parseInt(groupsHex[1], 16) : parseHex(groupsHex[4]);\r\n            this.g = groupsHex[2] ? parseInt(groupsHex[2], 16) : parseHex(groupsHex[5]);\r\n            this.b = groupsHex[3] ? parseInt(groupsHex[3], 16) : parseHex(groupsHex[6]);\r\n            this.a = null;\r\n        }\r\n        else if (groupsInt) {\r\n            this.r = parseInt(groupsInt[1]);\r\n            this.g = parseInt(groupsInt[2]);\r\n            this.b = parseInt(groupsInt[3]);\r\n            this.a = groupsInt[5] ? parseFloat(groupsInt[5]) : null;\r\n        } else {\r\n            this.r = null;\r\n            this.g = null;\r\n            this.b = null;\r\n            this.a = null;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips a colour component to be in the range [0, 255], and round it them to\r\n     * the nearest integer\r\n     * @param component\r\n     * @returns {Colour}\r\n     */\r\n    clipComponent(component) {\r\n        this[component] = Math.round(this[component]);\r\n        this[component] = Math.min(this[component], 255);\r\n        this[component] = Math.max(this[component], 0);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips r,g,b colour components to be in the range [0, 255], and rounds them to\r\n     * the nearest integer\r\n     * @returns {Colour}\r\n     */\r\n    clip () {\r\n        this.clipComponent('r');\r\n        this.clipComponent('g');\r\n        this.clipComponent('b');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies each colour component by a number\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    multiplyBy (number) {\r\n        this.r *= number;\r\n        this.g *= number;\r\n        this.b *= number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a number to each colour component\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    increaseBy (number) {\r\n        this.r += number;\r\n        this.g += number;\r\n        this.b += number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    get sum() {\r\n        return this.r + this.g + this.b;\r\n    }\r\n\r\n    /**\r\n     * Formats this colour as a string\r\n     * @returns {String}\r\n     */\r\n    toString() {\r\n        var ret;\r\n        if (this.a) {\r\n            ret = Utils.formatString('rgba({r},{g},{b},{a})', this);\r\n        } else {\r\n            ret = Utils.formatString('rgb({r},{g},{b})', this);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    /**\r\n     * Multiplies each colour component of a colour code by a number\r\n     * @param colour\r\n     * @param number\r\n     * @returns {String}\r\n     */\r\n    static multiplyBy(colour, number) {\r\n        return (new Colour(colour)).multiplyBy(number).toString();\r\n    }\r\n\r\n}\r\n\r\nexports.Colour = Colour;","exports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.inQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * factor;\r\n};\r\n\r\nexports.outQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * (2 - factor);\r\n};\r\n","class Rect {\r\n    constructor() {\r\n        var rect;\r\n        if (arguments.length === 1) {\r\n            rect = arguments[0];\r\n            this.left = rect.left;\r\n            this.top = rect.top;\r\n            this.right = rect.right;\r\n            this.bottom = rect.bottom;\r\n        } else if (arguments.length === 4) {\r\n            this.left = arguments[0];\r\n            this.top = arguments[1];\r\n            this.right = arguments[2];\r\n            this.bottom = arguments[3];\r\n        }\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get maxY() {\r\n        return Math.max(this.bottom, this.top);\r\n    }\r\n\r\n    get minY() {\r\n        return Math.min(this.bottom, this.top);\r\n    }\r\n\r\n    get minX() {\r\n        return Math.min(this.left, this.right);\r\n    }\r\n\r\n    get maxX() {\r\n        return Math.max(this.left, this.right);\r\n    }\r\n\r\n    containsPoint(x, y) {\r\n        return this.containsX(x) && this.containsY(y);\r\n    }\r\n\r\n    containsY(y) {\r\n        return y >= this.minY && y < this.maxY;\r\n    }\r\n\r\n    containsX(x) {\r\n        return x >= this.minX && x < this.maxX;\r\n    }\r\n\r\n    clip(clipRect) {\r\n        if (this.left < clipRect.minX) this.left = clipRect.minX;\r\n        else if (this.left > clipRect.maxX) this.left = clipRect.maxX;\r\n\r\n        if (this.right < clipRect.minX) this.right = clipRect.minX;\r\n        else if (this.right > clipRect.maxX) this.right = clipRect.maxX;\r\n\r\n        if (this.top < clipRect.minY)\r\n            this.top = clipRect.minY;\r\n        else if (this.top > clipRect.maxY)\r\n            this.top = clipRect.maxY;\r\n\r\n        if (this.bottom > clipRect.maxY)\r\n            this.bottom = clipRect.maxY;\r\n        else if (this.bottom < clipRect.minY)\r\n            this.bottom = clipRect.minY;\r\n\r\n        return this;\r\n    }\r\n}\r\n\r\nexports.Rect = Rect;","'use strict';\r\nvar Utils = require('./utils.js');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.calculateYAxisExtent = function () {\r\n    var targetTicks, approxStep, scale;\r\n\r\n    let targetYStart = this.options.yAxis.min;\r\n    let targetYEnd = this.options.yAxis.max;\r\n    const overriddenStart = typeof targetYStart !== 'undefined';\r\n    const overriddenEnd = typeof targetYEnd !== 'undefined';\r\n\r\n    if (!overriddenStart || !overriddenEnd) {\r\n        const [dataYMin, dataYMax] = this.calculateYDataMinMax();\r\n        const dataYRange = dataYMax - dataYMin;\r\n        if (!overriddenStart) {\r\n            targetYStart = dataYMin - dataYRange * 0.1;\r\n            if (dataYMin >= 0 && targetYStart < 0)\r\n                targetYStart = 0;\r\n        }\r\n        if (!overriddenEnd) {\r\n            targetYEnd = dataYMax + dataYRange * 0.1;\r\n            if (dataYMax <= 0 && targetYStart > 0)\r\n                targetYEnd = 0;\r\n        }\r\n    }\r\n\r\n    const targetYRange = targetYEnd - targetYStart;\r\n\r\n    targetTicks = this.plotArea.height / this.mapLogicalYUnit(this.options.yAxis.tickStep);\r\n    approxStep = targetYRange / targetTicks;\r\n    scale = Math.pow(10, Math.floor(Math.log(approxStep) / Math.log(10)));\r\n    this.yTickStep = Math.ceil(approxStep / scale) * scale;\r\n    this.yMin = targetYStart;\r\n    this.yMax = targetYEnd;\r\n    if (!overriddenStart)\r\n        this.yMin = Math.floor(this.yMin / scale) * scale;\r\n    if (!overriddenEnd)\r\n        this.yMax = Math.ceil(this.yMax / scale) * scale;\r\n    this.yTickStart = Math.floor(this.yMin / this.yTickStep) * this.yTickStep;\r\n    this.yTickEnd = Math.ceil(this.yMax / this.yTickStep) * this.yTickStep;\r\n};\r\n\r\nTayberry.prototype.drawXAxis = function () {\r\n    var i, barWidth, x, y, lastXEnd;\r\n    const categoryCount = this.categories.length;\r\n    barWidth = Math.floor(this.plotArea.width / this.series[0].data.length);\r\n    this.ctx.save();\r\n    this.ctx.fillStyle = this.options.font.colour;\r\n    this.ctx.textAlign = 'center';\r\n    this.ctx.textBaseline = 'bottom';\r\n    let factor;\r\n    switch (this.options.xAxis.labelPosition) {\r\n        case 'left':\r\n            factor = 0;\r\n            break;\r\n        case 'right':\r\n            factor = 0;\r\n            break;\r\n        default:\r\n            factor = 0.5;\r\n            break;\r\n    }\r\n    for (i = 0; i < categoryCount; i++) {\r\n        x = this.plotArea.left + Math.floor(i * barWidth + barWidth * factor);\r\n        y = this.plotArea.bottom + this.mapLogicalYUnit(this.options.font.size + this.options.elementSmallPadding);\r\n        const textWidth = this.getTextWidth(this.categories[i]);\r\n        const xStart = x - textWidth / 2;\r\n        const xEnd = x + textWidth / 2;\r\n        if (typeof lastXEnd === 'undefined' || xStart > lastXEnd + 1) {\r\n            this.ctx.fillText(this.categories[i], x, y);\r\n            lastXEnd = xEnd;\r\n        }\r\n    }\r\n    x = this.plotArea.left + this.plotArea.width / 2;\r\n    y = this.plotArea.bottom + this.mapLogicalYUnit(this.options.font.size * 2 + this.options.elementSmallPadding + this.options.elementLargePadding);\r\n    this.ctx.fillText(this.options.xAxis.title, x, y);\r\n    this.ctx.restore();\r\n};\r\n\r\nTayberry.prototype.drawYAxis = function () {\r\n    var yValue, x, y;\r\n\r\n    const yOrigin = this.getYOrigin();\r\n    this.ctx.save();\r\n    this.ctx.fillStyle = this.options.font.colour;\r\n    this.ctx.textAlign = 'right';\r\n    this.ctx.textBaseline = 'middle';\r\n\r\n    for (yValue = this.yTickStart; yValue <= this.yTickEnd && this.yTickStep;) {\r\n        yValue = this.yTickStart + Math.round((yValue + this.yTickStep - this.yTickStart) / this.yTickStep) * this.yTickStep;\r\n        x = this.plotArea.left - this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n        const valueHeight = this.getYHeight(yValue);\r\n        y = yOrigin - valueHeight;\r\n        if (this.plotArea.containsY(y)) {\r\n            this.ctx.fillText(this.options.yAxis.labelFormatter(yValue), x, y);\r\n            this.drawLine(this.plotArea.left, y, this.plotArea.right, y, this.options.yAxis.gridLines.colour);\r\n        }\r\n    }\r\n\r\n    x = 0;\r\n    y = this.plotArea.top + this.plotArea.height / 2;\r\n    this.ctx.textAlign = 'center';\r\n    this.ctx.textBaseline = 'top';\r\n    this.ctx.translate(x, y);\r\n    this.ctx.rotate(-Math.PI / 2);\r\n    this.ctx.fillText(this.options.yAxis.title, 0, 0);\r\n    this.ctx.restore();\r\n};\r\n","class Tayberry {\r\n    constructor() {\r\n        this.selectedItem = {};\r\n        this.containerElement = null;\r\n        this.canvas = null;\r\n        this.ctx = null;\r\n        this.renderedSeries = null;\r\n        this.options = null;\r\n        this.scaleFactor = null;\r\n        this.titleFont = null;\r\n        this.plotArea = null;\r\n        this.yTickStep = null;\r\n        this.yTickStart = null;\r\n        this.yTickEnd = null;\r\n        this.yMin = null;\r\n        this.yMax = null;\r\n        this.series = [];\r\n        this.categories = [];\r\n    }\r\n\r\n    get seriesCount() {\r\n        return this.series.length;\r\n    }\r\n\r\n    get categoryCount() {\r\n        return this.series.length ? this.series[0].data.length : 0;\r\n    }\r\n}\r\n\r\nexports.Tayberry = Tayberry;\r\n\r\n\r\n","'use strict';\r\nvar Colour = require('./colour').Colour;\r\nvar Utils = require('./utils.js');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.create = function (containerElement) {\r\n    if (typeof containerElement == 'string') {\r\n        this.containerElement = document.getElementById(containerElement);\r\n    } else {\r\n        this.containerElement = containerElement;\r\n    }\r\n    this.canvas = document.createElement('canvas');\r\n    this.canvas.style.width = '100%';\r\n    this.canvas.style.height = '100%';\r\n    this.containerElement.appendChild(this.canvas);\r\n    this.ctx = this.canvas.getContext('2d');\r\n    this.renderedSeries = null;\r\n    this.options = {};\r\n    this.initialise();\r\n};\r\n\r\nTayberry.prototype.initialise = function () {\r\n    this.scaleFactor = window.devicePixelRatio || 1.0;\r\n    this.canvas.width = Math.round(this.containerElement.clientWidth * this.scaleFactor);\r\n    this.canvas.height = Math.round(this.containerElement.clientHeight * this.scaleFactor);\r\n    this.scaleFactorX = this.canvas.width / this.containerElement.clientWidth;\r\n    this.scaleFactorY = this.canvas.height / this.containerElement.clientHeight;\r\n    this.selectedItem = {};\r\n    this.plotArea = null;\r\n};\r\n\r\nTayberry.prototype.updateFonts = function () {\r\n    this.ctx.font = this.mapLogicalYUnit(this.options.font.size) + 'px ' + this.options.font.face;\r\n    this.titleFont = this.mapLogicalYUnit(this.options.title.font.size) + 'px ' + this.options.font.face;\r\n};\r\n\r\nTayberry.prototype.updateYFormatter = function () {\r\n    if (!this.options.yAxis.labelFormatter) {\r\n        if (this.options.yAxis.labelFormat === 'percentage') {\r\n            this.options.yAxis.labelFormatter = Utils.createPercentageFormatter(this.yMax - this.yMin, this.options.yAxis.labelPrefix, this.options.yAxis.labelSuffix);\r\n        }\r\n        else if (this.options.yAxis.labelFormat === 'currency') {\r\n            this.options.yAxis.labelFormatter = Utils.createFixedNumberFormatter(this.yMax - this.yMin, this.options.yAxis.labelPrefix || this.options.yAxis.currencySymbol, this.options.yAxis.labelSuffix);\r\n        }\r\n        else {\r\n            this.options.yAxis.labelFormatter = Utils.createAutoNumberFormatter(this.yMax - this.yMin, this.options.yAxis.labelPrefix, this.options.yAxis.labelSuffix);\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.prototype.setOptions = function (options) {\r\n    let optionOverrides = [this.defaultOptions()];\r\n    if (options.presets) {\r\n        for (let index = 0; index < options.presets.length; index++) {\r\n            optionOverrides.push(Tayberry.presets[options.presets[index]]);\r\n        }\r\n    }\r\n    optionOverrides.push(options);\r\n    this.options = Utils.deepAssign({}, optionOverrides);\r\n    this.setSeries(options.series);\r\n    this.setCategories(options.xAxis.categories);\r\n    this.updateFonts();\r\n    this.canvas.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.canvas.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n    this.canvas.addEventListener('touchstart', this.onTouchStart.bind(this));\r\n    window.addEventListener('resize', Utils.throttle(this.onWindowResize, 50).bind(this));\r\n};\r\n\r\nTayberry.calculateHighlightColour = function (colour) {\r\n    let newColour = new Colour(colour);\r\n    return newColour.increaseBy(30 * (newColour.sum >= 180 * 3 ? -1 : 1)).toString();\r\n};\r\n\r\n/**\r\n * Format:\r\n * [{\r\n *   data: {array|object},\r\n *   name: {string}\r\n * },{\r\n *   data: {array|object},\r\n *   name: {string}\r\n * }]\r\n * @param series\r\n */\r\nTayberry.prototype.setSeries = function (series) {\r\n    var i;\r\n    if (!Array.isArray(series)) {\r\n        this.series = [series];\r\n    } else {\r\n        this.series = series;\r\n    }\r\n    this.renderedSeries = series.slice(0);\r\n    for (i = 0; i < this.renderedSeries.length; i++) {\r\n        let actualSeries = this.series[i];\r\n        actualSeries.colour = actualSeries.colour || this.options.defaultPalette[i];\r\n        actualSeries.highlightColour = actualSeries.highlightColour || Tayberry.calculateHighlightColour(actualSeries.colour);\r\n        let elem = Utils.assign({}, actualSeries);\r\n        elem.data = this.renderedSeries[i].data.slice(0);\r\n        this.renderedSeries[i] = elem;\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.setCategories = function (categories) {\r\n    this.categories = (categories);\r\n    //if (this.options.xAxis.type === 'numeric' || this.options.xAxis.type === 'numerical') {\r\n    //    this.categories = [];\r\n    //    for (let i = this.options.xAxis.min; i <= this.options.xAxis.max; i += this.options.xAxis.step) {\r\n    //        i = Math.round(i / this.options.xAxis.step) * this.options.xAxis.step;\r\n    //        this.categories.push(i);\r\n    //    }\r\n    //}\r\n};\r\n\r\nTayberry.prototype.calculateYDataMinMax = function () {\r\n    var categoryIndex, seriesIndex, yMin, yMax;\r\n    let seriesPositiveTotals = [];\r\n    let seriesNegativeTotals = [];\r\n    const seriesMinima = [];\r\n    const seriesMaxima = [];\r\n    if (this.series[0].data.length) {\r\n        for (categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n            seriesPositiveTotals[categoryIndex] = 0;\r\n            seriesNegativeTotals[categoryIndex] = 0;\r\n            for (seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n                const value = this.series[seriesIndex].data[categoryIndex];\r\n                if (!Utils.isMissingValue(value)) {\r\n                    if (value < 0) {\r\n                        seriesNegativeTotals[categoryIndex] += value;\r\n                    } else {\r\n                        seriesPositiveTotals[categoryIndex] += value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            seriesMinima.push(Utils.reduce(series.data, Math.min, undefined, true));\r\n            seriesMaxima.push(Utils.reduce(series.data, Math.max, undefined, true));\r\n        }\r\n        if (this.options.barMode === 'stacked') {\r\n            yMin = Math.min(0, Utils.reduce(seriesNegativeTotals, Math.min, undefined, true));\r\n            yMax = Math.max(Utils.reduce(seriesPositiveTotals, Math.max, undefined, true), 0);\r\n        } else {\r\n            yMin = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n            yMax = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n        }\r\n    }\r\n    return [yMin, yMax];\r\n};\r\n\r\n\r\nTayberry.prototype.createTooltip = function () {\r\n\r\n    this.tooltipElement = document.createElement('div');\r\n    this.tooltipElement.className = 'tayberry-tooltip';\r\n    this.tooltipElement.style.position = 'absolute';\r\n    this.tooltipElement.style.left = '0px';\r\n    this.tooltipElement.style.top = '0px';\r\n    this.tooltipElement.style.zIndex = '99999';\r\n    this.tooltipElement.style.font = this.options.font.size + 'px ' + this.options.font.face;\r\n    ;\r\n    this.tooltipElement.style.borderRadius = '3px';\r\n    this.tooltipElement.style.backgroundColor = 'white';\r\n    this.tooltipElement.style.border = '2px solid black';\r\n    this.tooltipElement.style.padding = '0.15em 0.4em';\r\n    this.tooltipElement.style.display = 'none';\r\n    this.tooltipElement.innerHTML = '';\r\n    document.body.appendChild(this.tooltipElement);\r\n    this.tooltipElement.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.tooltipElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n};\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.defaultOptions = function () {\r\n    return {\r\n        defaultPalette: [\r\n            '#6FE87B', //green\r\n            '#FFAB51', //orange\r\n            '#51A8FF', //blue\r\n            '#B651FF', //purple\r\n            '#FF6051', //red\r\n            '#636363' //dark grey\r\n        ],\r\n        title: {\r\n            text: '',\r\n            font: {\r\n                size: 20\r\n            }\r\n        },\r\n        font: {\r\n            colour: '#444',\r\n            size: 12,\r\n            face: 'sans-serif'\r\n        },\r\n        xAxis: {\r\n            title: '',\r\n            type: 'category',\r\n            min: 0,\r\n            max: 100,\r\n            step: 1,\r\n            categories: [],\r\n            labelPosition: 'middle' //left|middle|right\r\n        },\r\n        yAxis: {\r\n            title: '',\r\n            gridLines: {\r\n                colour: '#ccc'\r\n            },\r\n            min: undefined,\r\n            max: undefined,\r\n            tickStep: 30,\r\n            labelFormat: 'number', //[number|percentage|currency],\r\n            labelFormatter: undefined,\r\n            labelPrefix: undefined,\r\n            labelSuffix: undefined,\r\n            currencySymbol: '£'\r\n        },\r\n        series: [],\r\n        barMode: 'normal', //[normal|stacked|overlaid]\r\n        barPadding: 2,\r\n        elementSmallPadding: 5,\r\n        elementLargePadding: 10,\r\n        categorySpacing: 0.3,\r\n        presets: [],\r\n        tooltips: {\r\n            shared: false,\r\n            headerTemplate: '<strong>{category}</strong><table>',\r\n            valueTemplate: '<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">\\u25CF</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',\r\n            footerTemplate: '</table>'\r\n        },\r\n        legend: {\r\n            enabled: true,\r\n            indicatorSize: 15\r\n        },\r\n        labels: {\r\n            enabled: false,\r\n            verticalAlignment: 'top',\r\n            verticalPosition: 'outside'\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.presets = {\r\n    histogram: {\r\n        xAxis: {\r\n            labelPosition: 'left'\r\n        },\r\n        barMode: 'overlaid',\r\n        categorySpacing: 0,\r\n        barPadding: 1\r\n    }\r\n};\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.render = function () {\r\n    this.calculatePlotArea();\r\n    this.calculateYAxisExtent();\r\n    this.updateYFormatter();\r\n    this.finalisePlotArea();\r\n    this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    this.animatationStart = performance.now();\r\n    this.animationLength = 500;\r\n    this.drawXAxis();\r\n    this.drawYAxis();\r\n    this.createTooltip();\r\n};\r\n\r\nTayberry.prototype.clear = function () {\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n};\r\n\r\nTayberry.prototype.drawTitle = function () {\r\n    if (this.options.title.text) {\r\n        const x = (this.canvas.width) / 2, y = 0;\r\n        this.ctx.save();\r\n        this.ctx.textAlign = 'center';\r\n        this.ctx.textBaseline = 'top';\r\n        this.ctx.font = this.titleFont;\r\n        this.ctx.fillStyle = this.options.font.colour;\r\n        this.ctx.fillText(this.options.title.text, x, y);\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLabel = function (sign, text, rect) {\r\n    const x = (rect.left + rect.right) / 2;\r\n    let y;\r\n    if (this.options.labels.verticalAlignment === 'top')\r\n        y = rect.top;\r\n    else if (this.options.labels.verticalAlignment === 'bottom')\r\n        y = rect.bottom;\r\n    else\r\n        y = (rect.top + rect.bottom) / 2;\r\n    if (this.plotArea.containsPoint(x, y)) {\r\n        this.ctx.save();\r\n        this.ctx.textAlign = 'center';\r\n        this.ctx.textBaseline = Tayberry.mapVerticalPosition(sign, this.options.labels.verticalPosition);\r\n        this.ctx.fillStyle = this.options.font.colour;\r\n        this.ctx.fillText(text, x, y);\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.draw = function () {\r\n\r\n    this.ctx.save();\r\n    this.enumerateBars(function (bar) {\r\n        this.ctx.fillStyle = bar.selected ? bar.renderedSeries.highlightColour : bar.renderedSeries.colour;\r\n        this.ctx.fillRect(bar.rect.left, bar.rect.top, bar.rect.width, bar.rect.height);\r\n    }.bind(this));\r\n    this.ctx.restore();\r\n\r\n    if (this.options.labels.enabled) {\r\n        this.ctx.save();\r\n        this.enumerateBars(function (bar) {\r\n            this.drawLabel(bar.value, this.options.yAxis.labelFormatter(bar.value), bar.rect);\r\n        }.bind(this));\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLine = function (x1, y1, x2, y2, colour) {\r\n    this.ctx.save();\r\n    if (colour) {\r\n        this.ctx.strokeStyle = colour;\r\n    }\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(x1 + 0.5, y1 + 0.5);\r\n    this.ctx.lineTo(x2 + 0.5, y2 + 0.5);\r\n    this.ctx.stroke();\r\n    this.ctx.restore();\r\n};\r\n\r\nTayberry.prototype.redraw = function () {\r\n    this.clear();\r\n    this.drawTitle();\r\n    this.drawXAxis();\r\n    this.drawYAxis();\r\n    this.drawLegend();\r\n    this.draw();\r\n};\r\n\r\n\r\nTayberry.prototype.drawLegend = function () {\r\n    if (this.options.legend.enabled) {\r\n        let totalWidth = 0;\r\n        const indicatorSize = this.mapLogicalXUnit(this.options.legend.indicatorSize);\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            if (series.name) {\r\n                totalWidth += this.getTextWidth(series.name) + indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding + this.options.elementLargePadding);\r\n            }\r\n        }\r\n        let x = this.plotArea.left + this.plotArea.width / 2 - totalWidth / 2,\r\n            y = this.canvas.height - indicatorSize;\r\n\r\n        for (let index = 0; index < this.renderedSeries.length; index++) {\r\n            const series = this.renderedSeries[index];\r\n            if (series.name) {\r\n                this.ctx.fillStyle = series.colour;\r\n                this.ctx.fillRect(x, y, indicatorSize, indicatorSize);\r\n                this.ctx.textBaseline = 'middle';\r\n                this.ctx.fillStyle = this.options.font.colour;\r\n                x += indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n                this.ctx.fillText(series.name, x, y + indicatorSize / 2);\r\n                x += this.getTextWidth(series.name) + this.mapLogicalXUnit(this.options.elementLargePadding);\r\n            }\r\n        }\r\n    }\r\n};\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Easing = require('./easing.js');\r\nvar Utils = require('./utils.js');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.onAnimate = function (timestamp) {\r\n    var elapsed, scaleFactor;\r\n    elapsed = timestamp - this.animatationStart;\r\n    scaleFactor = Math.min(Easing.inQuad(elapsed, this.animationLength), 1);\r\n    for (let categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n        for (let seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n            const value = this.series[seriesIndex].data[categoryIndex];\r\n            const yOrigin = this.yMin <= 0 && 0 <= this.yMax ? 0 : (this.yMin > 0 ? this.yMin : this.yMax);\r\n            this.renderedSeries[seriesIndex].data[categoryIndex] = yOrigin + scaleFactor * ((value - yOrigin));\r\n        }\r\n    }\r\n    this.redraw();\r\n    if (scaleFactor < 1) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    }\r\n};\r\n\r\nTayberry.prototype.onMouseLeave = function (event) {\r\n    if ((event.currentTarget == this.canvas && event.relatedTarget !== this.tooltipElement) || (event.currentTarget == this.tooltipElement && event.relatedTarget !== this.canvas)) {\r\n        this.selectedItem = {};\r\n        this.tooltipElement.style.display = 'none';\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.handleMouseMove = function (clientX, clientY) {\r\n    let boundingRect = new Rect(this.canvas.getBoundingClientRect());\r\n    let ret = false;\r\n    if (boundingRect.containsPoint(clientX, clientY)) {\r\n        let x = clientX - boundingRect.left;\r\n        let y = clientY - boundingRect.top;\r\n\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            const aboveZero = hitTestResult.rect.top < hitTestResult.rect.bottom;\r\n            const category = this.categories[hitTestResult.categoryIndex];\r\n            this.tooltipElement.style.display = 'block';\r\n            let tooltipHtml = Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n            if (this.options.tooltips.shared) {\r\n                for (let index = 0; index<this.series.length; index++) {\r\n                    const series = this.series[index];\r\n                    const value = series.data[hitTestResult.categoryIndex];\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {value: this.options.yAxis.labelFormatter(value), name: series.name, colour: series.colour}, true);\r\n                }\r\n            } else {\r\n                const series = this.series[hitTestResult.seriesIndex];\r\n                const value = series.data[hitTestResult.categoryIndex];\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {value: this.options.yAxis.labelFormatter(value), name: series.name, colour: series.colour}, true);\r\n            }\r\n            tooltipHtml += this.options.tooltips.footerTemplate;\r\n            this.tooltipElement.innerHTML = tooltipHtml;\r\n            let tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n            this.tooltipElement.style.borderColor = this.renderedSeries[hitTestResult.seriesIndex].colour;\r\n            this.tooltipElement.style.left = window.pageXOffset + boundingRect.left + this.mapScreenUnit(hitTestResult.rect.width) / 2 + hitTestResult.rect.left / this.scaleFactor - tooltipRect.width / 2 + 'px';\r\n            this.tooltipElement.style.top = window.pageYOffset + boundingRect.top + this.mapScreenUnit(hitTestResult.rect.top) - tooltipRect.height * (aboveZero ? 1 : 0) - this.options.elementSmallPadding * (aboveZero ? 1 : -1) + 'px';\r\n            this.selectedItem = hitTestResult;\r\n            ret = true;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.onTouchStart = function (event) {\r\n    for (let index = 0; index < event.targetTouches.length; index++) {\r\n        let touch = event.targetTouches[index];\r\n        if (this.handleMouseMove(touch.clientX, touch.clientY)) {\r\n            event.preventDefault();\r\n            this.redraw();\r\n            break;\r\n        }\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.onMouseMove = function (event) {\r\n    let oldSelectedItem = Utils.assign({}, this.selectedItem);\r\n    if (!this.handleMouseMove(event.clientX, event.clientY)) {\r\n        this.selectedItem = {};\r\n    }\r\n\r\n    if (oldSelectedItem.categoryIndex !== this.selectedItem.categoryIndex || oldSelectedItem.seriesIndex !== this.selectedItem.seriesIndex) {\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.onWindowResize = function (event) {\r\n    this.tooltipElement.style.display = 'none';\r\n    this.initialise();\r\n    this.updateFonts();\r\n    this.calculatePlotArea();\r\n    this.calculateYAxisExtent();\r\n    this.finalisePlotArea();\r\n    this.redraw();\r\n};\r\n","(function () {\r\n    'use strict';\r\n    var Tayberry = require('./tayberry.base.js').Tayberry;\r\n    require('./tayberry.axes.js');\r\n    require('./tayberry.core.js');\r\n    require('./tayberry.drawing.js');\r\n    require('./tayberry.events.js');\r\n    require('./tayberry.defaults.js');\r\n    require('./tayberry.sizing.js');\r\n\r\n    module.exports = {\r\n        /**\r\n         * Creates a Tayberry chart\r\n         *\r\n         * @param element   ID of container div, or HTMLElement\r\n         * @param options   Options object\r\n         */\r\n        create: function (element, options) {\r\n            var chart = new Tayberry();\r\n            chart.create(element);\r\n            chart.setOptions(options);\r\n            chart.render();\r\n        }\r\n    };\r\n\r\n})();\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Utils = require('./utils');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.mapVerticalPosition = function (sign, position) {\r\n    switch (position) {\r\n        case \"outside\":\r\n            return sign > 0 ? \"bottom\" : \"top\";\r\n        case \"inside\":\r\n            return sign > 0 ? \"top\" : \"bottom\";\r\n        default:\r\n            return \"middle\";\r\n    }\r\n};\r\n\r\nTayberry.prototype.mapLogicalXUnit = function (x) {\r\n    return this.scaleFactorX * x;\r\n};\r\n\r\nTayberry.prototype.mapLogicalYUnit = function (x) {\r\n    return this.scaleFactorY * x;\r\n};\r\n\r\nTayberry.prototype.mapScreenUnit = function (x) {\r\n    return x / this.scaleFactor;\r\n};\r\n\r\nTayberry.prototype.getTextWidth = function (text) {\r\n    return this.ctx.measureText(text).width;\r\n};\r\n\r\nTayberry.prototype.calculatePlotArea = function () {\r\n    this.plotArea = new Rect(0, 0, this.canvas.width, this.canvas.height);\r\n    if (this.options.title.text) {\r\n        this.plotArea.top += this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.title.font.size);\r\n    }\r\n    if (this.options.yAxis.title) {\r\n        this.plotArea.left += this.mapLogicalXUnit(this.options.elementLargePadding + this.options.font.size);\r\n    }\r\n    if (this.options.xAxis.title) {\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementLargePadding + this.options.font.size);\r\n    }\r\n    this.plotArea.bottom -= this.mapLogicalYUnit(this.options.font.size);\r\n    if (this.options.legend.enabled)\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.elementLargePadding + this.options.legend.indicatorSize);\r\n};\r\n\r\nTayberry.prototype.finalisePlotArea = function () {\r\n    this.plotArea.left += Math.max(this.getTextWidth(this.options.yAxis.labelFormatter(this.yTickStart)), this.getTextWidth(this.options.yAxis.labelFormatter(this.yTickEnd))) + this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n    this.plotArea.left = Math.floor(this.plotArea.left);\r\n    this.plotArea.top = Math.floor(this.plotArea.top);\r\n    this.plotArea.right = Math.ceil(this.plotArea.right);\r\n    this.plotArea.bottom = Math.ceil(this.plotArea.bottom);\r\n};\r\n\r\nTayberry.prototype.getYHeight = function (value) {\r\n    return Math.round(value * this.plotArea.height / (this.yMax - this.yMin));\r\n};\r\n\r\nTayberry.prototype.hitTest = function (x, y) {\r\n    // TODO: Optimise\r\n    let ret = {\r\n        found: false,\r\n        categoryIndex: undefined,\r\n        seriesIndex: undefined,\r\n        rect: undefined\r\n    };\r\n\r\n    let matches = [];\r\n\r\n    const isOverlaid = this.options.barMode === 'overlaid';\r\n\r\n    this.enumerateBars(function (bar) {\r\n        if (bar.rect.containsPoint(x, y)) {\r\n            matches.push({\r\n                categoryIndex: bar.categoryIndex,\r\n                seriesIndex: bar.seriesIndex,\r\n                rect: bar.rect\r\n            });\r\n            if (!isOverlaid)\r\n                return true;\r\n        }\r\n    }.bind(this));\r\n\r\n    if (matches.length) {\r\n        ret.found = true;\r\n        let minMatchIndex = 0, minHeight = matches[0].rect.height;\r\n        for (let index = 1; index < matches.length; index++) {\r\n            const match = matches[index];\r\n            if (match.rect.height < minHeight) {\r\n                minMatchIndex = index;\r\n                minHeight = match.rect.height;\r\n            }\r\n        }\r\n        ret = Utils.assign(ret, matches[minMatchIndex]);\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.getYOrigin = function () {\r\n    return this.plotArea.bottom - this.getYHeight(0 - this.yMin);\r\n};\r\n\r\nTayberry.prototype.enumerateBars = function (callback) {\r\n    const categoryCount = this.renderedSeries[0].data.length;\r\n    if (categoryCount) {\r\n        const isStacked = this.options.barMode === 'stacked';\r\n        const isOverlaid = this.options.barMode === 'overlaid';\r\n        const isNormal = !isStacked && !isOverlaid;\r\n        const barCount = (isStacked || isOverlaid) ? 1 : this.series.length;\r\n        const categoryWidth = Math.floor(this.plotArea.width / categoryCount);\r\n        const barWidth = Math.floor(categoryWidth * (1 - this.options.categorySpacing) / barCount);\r\n        const yOrigin = this.getYOrigin();\r\n\r\n        for (let categoryIndex = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n            let x = this.plotArea.left + Math.floor(categoryIndex * categoryWidth + categoryWidth * this.options.categorySpacing / 2);\r\n            const cx = barWidth;\r\n            let yBottomPositive = yOrigin,\r\n                yBottomNegative = yOrigin,\r\n                yRunningTotalPositive = 0,\r\n                yRunningTotalNegative = 0;\r\n            for (let seriesIndex = 0; seriesIndex < this.renderedSeries.length; seriesIndex++) {\r\n                const value = this.renderedSeries[seriesIndex].data[categoryIndex];\r\n                if (Utils.isMissingValue(value))\r\n                    continue;\r\n                const yTop = yOrigin - this.getYHeight(value + (value > 0 ? yRunningTotalPositive : yRunningTotalNegative));\r\n                let rect = new Rect(x, yTop, x + cx, value > 0 ? yBottomPositive : yBottomNegative);\r\n                rect.left += Math.ceil(this.options.barPadding * this.scaleFactor / 2);\r\n                rect.right -= Math.floor(this.options.barPadding * this.scaleFactor / 2);\r\n                if (rect.right < rect.left)\r\n                    rect.right = rect.left;\r\n                rect.clip(this.plotArea);\r\n\r\n                const stopEnumerating = callback({\r\n                    seriesIndex: seriesIndex,\r\n                    categoryIndex: categoryIndex,\r\n                    series: this.renderedSeries[seriesIndex],\r\n                    renderedSeries: this.renderedSeries[seriesIndex],\r\n                    value: this.series[seriesIndex].data[categoryIndex],\r\n                    renderedValue: this.renderedSeries[seriesIndex].data[categoryIndex],\r\n                    rect: rect,\r\n                    selected: this.selectedItem.categoryIndex === categoryIndex && this.selectedItem.seriesIndex === seriesIndex\r\n                });\r\n                if (stopEnumerating)\r\n                    break;\r\n                if (isStacked) {\r\n                    if (value > 0) {\r\n                        yRunningTotalPositive += value;\r\n                        yBottomPositive = yTop;\r\n                    }\r\n                    else {\r\n                        yRunningTotalNegative += value;\r\n                        yBottomNegative = yTop;\r\n                    }\r\n                } else if (isNormal) {\r\n                    x += barWidth;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    exports.identity = function (obj) {\r\n        return obj;\r\n    };\r\n\r\n    exports.isMissingValue = function (n) {\r\n        return n === null || typeof n === 'undefined' || (isNaN(n) && typeof n === 'number');\r\n    };\r\n\r\n    exports.reduce = function (array, func, getter, ignoreMissing = false) {\r\n        var ret, i;\r\n        if (array.reduce && !getter && !ignoreMissing) {\r\n            ret = array.reduce(function (a, b) {\r\n                return func(a, b);\r\n            });\r\n        } else {\r\n            getter = getter || exports.identity;\r\n            if (array.length) {\r\n                ret = getter(array[0]);\r\n                for (i = 1; i < array.length; i++) {\r\n                    const value = getter(array[i]);\r\n                    if (!ignoreMissing || !exports.isMissingValue(value))\r\n                        ret = func(ret, value);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n\r\n    exports.sign = Math.sign || function (n) {\r\n            return n > 0 ? 1 : (n < 0 ? -1 : 0);\r\n        };\r\n\r\n    exports.now = (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') ? performance.now : function () {\r\n        return new Date().getTime();\r\n    };\r\n\r\n    var innerAssign = function (deepAssign, targetObject, sourceObjects) {\r\n        if (!Array.isArray(sourceObjects))\r\n            sourceObjects = [sourceObjects];\r\n        if (!deepAssign && Object.assign) {\r\n            return Object.assign.apply(Object, [targetObject].concat(sourceObjects));\r\n        } else {\r\n            if (targetObject === undefined || targetObject === null) {\r\n                throw new TypeError('Cannot convert first argument to object');\r\n            }\r\n\r\n            var to = Object(targetObject);\r\n            for (let i = 0; i < sourceObjects.length; i++) {\r\n                let currentSourceObject = sourceObjects[i];\r\n                if (currentSourceObject === undefined || currentSourceObject === null) {\r\n                    continue;\r\n                }\r\n                currentSourceObject = Object(currentSourceObject);\r\n\r\n                const keysArray = Object.keys(currentSourceObject);\r\n                for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                    const nextKey = keysArray[nextIndex];\r\n                    const nextValue = currentSourceObject[nextKey];\r\n                    const desc = Object.getOwnPropertyDescriptor(currentSourceObject, nextKey);\r\n                    if (desc !== undefined && desc.enumerable) {\r\n                        if (deepAssign && typeof to[nextKey] === \"object\" && !Array.isArray(nextValue) && typeof nextValue === 'object')\r\n                            innerAssign(true, to[nextKey], nextValue);\r\n                        else\r\n                            to[nextKey] = nextValue;\r\n                    }\r\n                }\r\n            }\r\n            return to;\r\n        }\r\n    };\r\n\r\n    exports.assign = function (targetObject, sourceObjects) {\r\n        return innerAssign(false, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.deepAssign = function (targetObject, sourceObjects) {\r\n        return innerAssign(true, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.formatString = function (formatString, formatValues, escapeAsHtml) {\r\n        return formatString.replace(/{(\\w+)}/g, function (match, placeholder) {\r\n            const value = formatValues[placeholder];\r\n            return typeof value !== 'undefined' ? (escapeAsHtml ? exports.stringToHtml(value) : value) : match;\r\n        });\r\n    };\r\n\r\n    exports.locateDecimalPoint = function (number) {\r\n        return Math.floor(Math.log(number) / Math.log(10));\r\n    };\r\n\r\n    exports.formatNumberThousands = function (number, decimalPlaces = 0) {\r\n        var parts = number.toFixed(decimalPlaces).split(\".\");\r\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        return parts.join(\".\");\r\n    };\r\n\r\n    exports.createAutoNumberFormatter = function (scale, prefix = '', suffix = '', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createFixedNumberFormatter = function (scale, prefix = '', suffix = '', decimalPlaces = 2) {\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createPercentageFormatter = function (scale, prefix = '', suffix = '%', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale * 100);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x * 100, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.stringToHtml = function (str) {\r\n        var div = document.createElement('div');\r\n        div.appendChild(document.createTextNode(str));\r\n        return div.innerHTML;\r\n    };\r\n\r\n    exports.throttle = function (fn, threshold) {\r\n        var last,\r\n            deferTimer;\r\n        return function () {\r\n            var context = this;\r\n\r\n            var now = Date.now(),\r\n                args = arguments;\r\n            if (last && now < last + threshold) {\r\n                clearTimeout(deferTimer);\r\n                deferTimer = setTimeout(function () {\r\n                    last = now;\r\n                    fn.apply(context, args);\r\n                }, threshold);\r\n            } else {\r\n                last = now;\r\n                fn.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}