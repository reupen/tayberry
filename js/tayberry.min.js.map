{"version":3,"sources":["/source/node_modules/browserify/node_modules/browser-pack/_prelude.js","tayberry.min.js","/source/src/colour.js","/source/src/easing.js","/source/src/rect.js","/source/src/tayberry.axes.js","/source/src/tayberry.base.js","/source/src/tayberry.core.js","/source/src/tayberry.defaults.js","/source/src/tayberry.drawing.js","/source/src/tayberry.events.js","/source/src/tayberry.js","/source/src/tayberry.sizing.js","/source/src/utils.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Tayberry","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Utils","Colour","arguments","arg1","parseString","b","value","str","regExHex","regExInt","groupsHex","exec","groupsInt","parseHex","ret","parseInt","RangeError","parseFloat","component","Math","round","min","max","clipComponent","number","clip","formatString","get","colour","multiplyBy","toString","./utils.js",2,"linear","time","duration","inQuad","factor","outQuad",3,"Rect","rect","left","top","right","bottom","x","y","containsX","containsY","clipRect","minX","maxX","minY","maxY","_ref","_ref2",4,"_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_get","_x5","_x6","_x7","_again","object","property","receiver","desc","parent","getter","Function","getOwnPropertyDescriptor","getPrototypeOf","Axis","tayberry","index","options","axisType","tickStep","tickStart","tickEnd","calculatedSize","titleFont","setPlacement","xYSwapped","type","LinearAxis","CategorialAxis","createFontString","title","font","validAndSpecificPlacements","indexOf","placement","isYAxis","_this","tb","ticks","getTicks","reduce","getTextWidth","labelFormatter","mapLogicalXUnit","mapLogicalYUnit","plotArea","fixedOnly","reset","size","fontHeight","getFontHeight","mapLogicalXOrYUnit","elementSmallPadding","text","maxLabelSize","lastTick","textWidth","lastTickXEnd","canvas","width","isPlacedAtStart","drawTicksAndLabels","drawTitle","labelPaddingX","labelPaddingY","ctx","save","fillStyle","textAlign","textBaseline","lastXEnd","enumerateTicks","tick","xStart","xEnd","formattedValue","fillText","gridLines","drawLine","x1","y1","x2","y2","bind","restore","height","translate","rotate","PI","startProperty","visibleOnly","_Axis","apply","callback","categoryCount","categories","clone","swapXY","categoryWidth","series","data","labelPosition","floor","identity","_Axis2","labelFormat","createPercentageFormatter","labelPrefix","labelSuffix","createFixedNumberFormatter","currencySymbol","createAutoNumberFormatter","start","end","endProperty","yValue","getValueDisplacement","targetTicks","approxStep","scale","targetStart","targetEnd","overriddenStart","isMissingValue","overriddenEnd","_tayberry$getDataMinMax","getDataMinMax","_tayberry$getDataMinMax2","dataMin","dataMax","dataRange","tickStepValue","targetRange","plotLength","mapLogicalYOrXUnit","pow","log","scaledStep","snapScaledValue","ceil","plotDisplacement","getOrigin","totalCategories","axisRange","abs",5,"selectedItem","containerElement","renderedSeries","scaleFactor",6,"currentAutoColourIndex","getAutoColour","defaultColours","document","getElementById","createElement","style","clientWidth","clientHeight","appendChild","getContext","yAxis","xAxis","initialise","destroy","remove","tooltipElement","removeEventListener","onMouseMoveReal","onMouseLeaveReal","onTouchStartReal","onWindowResizeReal","devicePixelRatio","scaleFactorX","scaleFactorY","forDom","autoScale","toFixed","face","updateFonts","setOptions","optionOverrides","defaultOptions","presets","deepAssign","setSeries","swapAxes","addEventListener","onMouseMove","onMouseLeave","onTouchStart","throttle","onWindowResize","calculateHighlightColour","newColour","increaseBy","sum","slice","actualSeries","highlightColour","elem","assign","setCategories","categoryIndex","seriesIndex","seriesPositiveTotals","seriesNegativeTotals","seriesMinima","seriesMaxima","barMode","createTooltip","className","position","zIndex","borderRadius","backgroundColor","border","padding","display","innerHTML","body","./colour","./tayberry.axes","./tayberry.base","./utils",7,"barPadding","elementLargePadding","categorySpacing","tooltips","shared","headerTemplate","valueTemplate","footerTemplate","legend","enabled","indicatorSize","labels","verticalAlignment","verticalPosition","histogram","./tayberry.base.js",8,"fontString","measureText","render","calculatePlotArea","animator","requestAnimationFrame","onAnimate","animatationStart","performance","now","animationLength","draw","clear","clearRect","drawLabel","sign","baseline","align","mapVerticalPosition","containsPoint","enumerateBars","bar","selected","fillRect","strokeStyle","beginPath","moveTo","lineTo","stroke","redraw","drawLegend","totalWidth","name",9,"Easing","timestamp","elapsed","yOrigin","event","currentTarget","relatedTarget","handleMouseMove","clientX","clientY","boundingRect","getBoundingClientRect","hitTestResult","hitTest","found","aboveZero","category","getCategoryLabel","tooltipHtml","tooltipRect","borderColor","pageXOffset","mapScreenUnit","pageYOffset","targetTouches","touch","preventDefault","oldSelectedItem","./easing.js","./rect",10,"element","chart","./tayberry.axes.js","./tayberry.core.js","./tayberry.defaults.js","./tayberry.drawing.js","./tayberry.events.js","./tayberry.sizing.js",11,"MAX_AXIS_CALC_SIZE_ATTEMPTS","adjustSize","calculateExtent","updateFormatter","matches","isOverlaid","minMatchIndex","minHeight","match","isStacked","isHorizontal","isNormal","barCount","categoryXStart","categoryXEnd","barXStart","barXEnd","yBottomPositive","yBottomNegative","yRunningTotalPositive","yRunningTotalNegative","barIndex","barWidth","yTop","stopEnumerating","renderedValue",12,"obj","isNaN","array","func","ignoreMissing","Date","getTime","innerAssign","targetObject","sourceObjects","concat","to","currentSourceObject","keysArray","keys","nextIndex","len","nextKey","nextValue","formatValues","escapeAsHtml","replace","placeholder","stringToHtml","locateDecimalPoint","formatNumberThousands","decimalPlaces","parts","split","join","prefix","suffix","precision","div","createTextNode","fn","threshold","last","deferTimer","context","args","clearTimeout","setTimeout"],"mappings":"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","file":"tayberry.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.Tayberry=t()}}(function(){return function t(e,i,s){function n(o,a){if(!i[o]){if(!e[o]){var l=\"function\"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error(\"Cannot find module '\"+o+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var c=i[o]={exports:{}};e[o][0].call(c.exports,function(t){var i=e[o][1][t];return n(i?i:t)},c,c.exports,t,e,i,s)}return i[o].exports}for(var r=\"function\"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=t(\"./utils.js\"),o=function(){function t(){if(s(this,t),1===arguments.length){var e=arguments[0];\"string\"==typeof e?this.parseString(e):(this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a)}}return n(t,[{key:\"parseString\",value:function(t){var e=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,i=/^rgba?\\((\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+))+\\)$/i,s=e.exec(t),n=i.exec(t);if(s){var r=function(t){var e=parseInt(t,16);return e=16*e+e};this.r=s[1]?parseInt(s[1],16):r(s[4]),this.g=s[2]?parseInt(s[2],16):r(s[5]),this.b=s[3]?parseInt(s[3],16):r(s[6]),this.a=null}else n?(this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3]),this.a=n[5]?parseFloat(n[5]):null):(this.r=null,this.g=null,this.b=null,this.a=null);return this}},{key:\"clipComponent\",value:function(t){return this[t]=Math.round(this[t]),this[t]=Math.min(this[t],255),this[t]=Math.max(this[t],0),this}},{key:\"clip\",value:function(){return this.clipComponent(\"r\"),this.clipComponent(\"g\"),this.clipComponent(\"b\"),this}},{key:\"multiplyBy\",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.clip(),this}},{key:\"increaseBy\",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this.clip(),this}},{key:\"toString\",value:function(){var t;return t=this.a?r.formatString(\"rgba({r},{g},{b},{a})\",this):r.formatString(\"rgb({r},{g},{b})\",this)}},{key:\"sum\",get:function(){return this.r+this.g+this.b}}],[{key:\"multiplyBy\",value:function(e,i){return new t(e).multiplyBy(i).toString()}}]),t}();i.Colour=o},{\"./utils.js\":12}],2:[function(t,e,i){\"use strict\";i.linear=function(t,e){return t/e},i.linear=function(t,e){return t/e},i.inQuad=function(t,e){var i=t/e;return i*i},i.outQuad=function(t,e){var i=t/e;return i*(2-i)}},{}],3:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(){function t(){s(this,t);var e;1===arguments.length?(e=arguments[0],this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom):4===arguments.length&&(this.left=arguments[0],this.top=arguments[1],this.right=arguments[2],this.bottom=arguments[3])}return n(t,[{key:\"containsPoint\",value:function(t,e){return this.containsX(t)&&this.containsY(e)}},{key:\"containsY\",value:function(t){return t>=this.minY&&t<this.maxY}},{key:\"containsX\",value:function(t){return t>=this.minX&&t<this.maxX}},{key:\"clip\",value:function(t){return this.left<t.minX?this.left=t.minX:this.left>t.maxX&&(this.left=t.maxX),this.right<t.minX?this.right=t.minX:this.right>t.maxX&&(this.right=t.maxX),this.top<t.minY?this.top=t.minY:this.top>t.maxY&&(this.top=t.maxY),this.bottom>t.maxY?this.bottom=t.maxY:this.bottom<t.minY&&(this.bottom=t.minY),this}},{key:\"clone\",value:function(){return new t(this)}},{key:\"swapXY\",value:function(){var t=[this.top,this.left];this.left=t[0],this.top=t[1];var e=[this.right,this.bottom];return this.bottom=e[0],this.right=e[1],this}},{key:\"width\",get:function(){return this.right-this.left}},{key:\"height\",get:function(){return this.bottom-this.top}},{key:\"maxY\",get:function(){return Math.max(this.bottom,this.top)}},{key:\"minY\",get:function(){return Math.min(this.bottom,this.top)}},{key:\"minX\",get:function(){return Math.min(this.left,this.right)}},{key:\"maxX\",get:function(){return Math.max(this.left,this.right)}}]),t}();i.Rect=r},{}],4:[function(t,e,i){\"use strict\";function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var r=function(){function t(t,e){var i=[],s=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(s=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);s=!0);}catch(l){n=!0,r=l}finally{try{!s&&a[\"return\"]&&a[\"return\"]()}finally{if(n)throw r}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),o=function(t,e,i){for(var s=!0;s;){var n=t,r=e,o=i;a=h=l=void 0,s=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,r);if(void 0!==a){if(\"value\"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(o)}var h=Object.getPrototypeOf(n);if(null===h)return void 0;t=h,e=r,i=o,s=!0}},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=t(\"./utils.js\"),h=function(){function t(e,i,s,r){n(this,t),this.tayberry=e,this.options=s,this.axisType=r,this.index=i,this.tickStep=null,this.min=null,this.max=null,this.tickStart=null,this.tickEnd=null,this.calculatedSize=0,this.setPlacement()}return a(t,null,[{key:\"create\",value:function(t,e,i,s,n){return n&&(s=\"y\"===s?\"x\":\"y\"),\"linear\"===e.type?new u(t,i,e,s):new c(t,i,e,s)}}]),a(t,[{key:\"setPlacement\",value:function(){var t=[\"left\",\"right\",\"top\",\"bottom\",\"start\",\"end\"];-1===t.indexOf(this.options.placement)&&(this.options.placement=this.isYAxis^this.index>0?\"start\":\"end\")}},{key:\"maxLabelSize\",value:function(){}},{key:\"mapLogicalXOrYUnit\",value:function(t){return this.isYAxis?this.tayberry.mapLogicalXUnit(t):this.tayberry.mapLogicalYUnit(t)}},{key:\"mapLogicalYOrXUnit\",value:function(t){return this.isYAxis?this.tayberry.mapLogicalYUnit(t):this.tayberry.mapLogicalXUnit(t)}},{key:\"adjustSize\",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],s=0,n=this.tayberry,r=void 0;return i&&(this.calculatedSize=0),s+=this.mapLogicalXOrYUnit(n.options.elementSmallPadding),this.options.title&&(s+=this.mapLogicalXOrYUnit(n.options.elementSmallPadding+n.options.font.size)),e||(s+=this.isYAxis?this.maxLabelSize():this.mapLogicalXOrYUnit(n.options.font.size)),this.isPlacedAtStart?this.isYAxis?t.left+=s-this.calculatedSize:t.top+=s-this.calculatedSize:(s*=-1,this.isYAxis?t.right+=s-this.calculatedSize:t.bottom+=s-this.calculatedSize),r=this.calculatedSize!==s,this.calculatedSize=s,r}},{key:\"calculateExtent\",value:function(){}},{key:\"draw\",value:function(){this.drawTicksAndLabels(),this.drawTitle()}},{key:\"drawTicksAndLabels\",value:function(){}},{key:\"drawTitle\",value:function(){var t=this.tayberry;if(t.ctx.save(),t.ctx.fillStyle=t.options.font.colour,t.ctx.textAlign=\"center\",t.ctx.textBaseline=this.isPlacedAtStart?\"top\":\"bottom\",this.isYAxis){var e=0,i=t.plotArea.top+t.plotArea.height/2;t.ctx.translate(e,i),t.ctx.rotate(-Math.PI/2),t.ctx.fillText(this.options.title,0,0)}else{var e=t.plotArea.left+t.plotArea.width/2,i=t.plotArea[this.startProperty]-this.calculatedSize;t.ctx.fillText(this.options.title,e,i)}t.ctx.restore()}},{key:\"getOrigin\",value:function(){}},{key:\"isPlacedAtStart\",get:function(){return\"left\"===this.options.placement||\"bottom\"===this.options.placement||\"start\"===this.options.placement}},{key:\"isYAxis\",get:function(){return\"y\"===this.axisType}},{key:\"startProperty\",get:function(){return this.isYAxis?this.isPlacedAtStart?\"left\":\"right\":this.isPlacedAtStart?\"top\":\"bottom\"}},{key:\"endProperty\",get:function(){return this.isYAxis?this.isPlacedAtStart?\"right\":\"left\":this.isPlacedAtStart?\"bottom\":\"top\"}},{key:\"plotDisplacement\",get:function(){return this.isYAxis?this.tayberry.plotArea.height:-this.tayberry.plotArea.width}},{key:\"plotLength\",get:function(){return Math.abs(this.plotDisplacement)}}]),t}(),c=function(t){function e(){n(this,e),o(Object.getPrototypeOf(e.prototype),\"constructor\",this).apply(this,arguments)}return s(e,t),a(e,[{key:\"drawTicksAndLabels\",value:function(){var t,e,i,s,n=this.tayberry,r=this.options.categories.length,o=n.plotArea.clone();this.isYAxis&&o.swapXY();var a=o.width/n.series[0].data.length;n.ctx.save(),n.ctx.fillStyle=n.options.font.colour,n.ctx.textAlign=this.isYAxis?\"right\":\"center\",n.ctx.textBaseline=(this.isYAxis,\"top\");var l=void 0;switch(this.options.labelPosition){case\"left\":l=0;break;case\"right\":l=1;break;default:l=.5}for(t=0;r>t;t++){e=o.left+Math.floor(t*a+a*l),i=(this.isPlacedAtStart?o.top:o.bottom)+this.mapLogicalXOrYUnit(n.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1);var h=n.getTextWidth(this.options.categories[t]),c=e-h/2,u=e+h/2;if(\"undefined\"==typeof s||c>s+1){if(this.isYAxis){var p=[i,e];e=p[0],i=p[1]}n.ctx.fillText(this.options.categories[t],e,i),s=u}}n.ctx.restore()}},{key:\"maxLabelSize\",value:function(){var t=this.tayberry;return l.reduce(this.options.categories,Math.max,t.getTextWidth.bind(t))}}]),e}(h),u=function(t){function e(){n(this,e),o(Object.getPrototypeOf(e.prototype),\"constructor\",this).apply(this,arguments)}return s(e,t),a(e,[{key:\"maxLabelSize\",value:function(){var t=this.tayberry;return Math.max(t.getTextWidth(this.options.labelFormatter(this.tickStart)),t.getTextWidth(this.options.labelFormatter(this.tickEnd)))}},{key:\"enumerateTicks\",value:function(t){var e,i,s,n=this.tayberry,r=this.startProperty,o=this.endProperty;for(e=this.tickStart;e<=this.tickEnd&&this.tickStep;){if(i=n.plotArea[r]+this.mapLogicalXOrYUnit(n.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1),s=this.getValueDisplacement(e),this.isYAxis){if(n.plotArea.containsY(s)&&t({value:e,x1:n.plotArea[r],y1:s,x2:n.plotArea[o],y2:s}))break}else if(n.plotArea.containsX(s)&&t({value:e,y1:n.plotArea[r],x1:s,y2:n.plotArea[o],x2:s}))break;e=this.tickStart+Math.round((e+this.tickStep-this.tickStart)/this.tickStep)*this.tickStep}}},{key:\"drawTicksAndLabels\",value:function(){var t=this.tayberry,e=this.isYAxis?this.mapLogicalXOrYUnit(t.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1):0,i=this.isYAxis?0:this.mapLogicalXOrYUnit(t.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1);t.ctx.save(),t.ctx.fillStyle=t.options.font.colour,t.ctx.textAlign=this.isYAxis?\"right\":\"center\",t.ctx.textBaseline=this.isYAxis?\"middle\":\"top\",this.enumerateTicks(function(s){t.ctx.fillText(this.options.labelFormatter(s.value),s.x1+e,s.y1+i),t.drawLine(s.x1,s.y1,s.x2,s.y2,this.options.gridLines.colour)}.bind(this)),t.ctx.restore()}},{key:\"calculateExtent\",value:function(){if(\"linear\"===this.options.type){var t=void 0,e=void 0,i=void 0,s=this.options.min,n=this.options.max,o=\"undefined\"!=typeof s,a=\"undefined\"!=typeof n;if(!o||!a){var l=this.tayberry.getDataMinMax(),h=r(l,2),c=h[0],u=h[1],p=u-c;o||(s=c-.1*p,c>=0&&0>s&&(s=0)),a||(n=u+.1*p,0>=u&&s>0&&(n=0))}var d=n-s;t=this.plotLength/this.mapLogicalYOrXUnit(this.options.tickStep),e=d/t,i=Math.pow(10,Math.floor(Math.log(e)/Math.log(10))),this.tickStep=Math.ceil(e/i)*i,this.min=s,this.max=n,o||(this.min=Math.floor(this.min/i)*i),a||(this.max=Math.ceil(this.max/i)*i),this.tickStart=Math.floor(this.min/this.tickStep)*this.tickStep,this.tickEnd=Math.ceil(this.max/this.tickStep)*this.tickStep}}},{key:\"getOrigin\",value:function(){var t=this.tayberry.plotArea[this.isYAxis?\"bottom\":\"left\"]-(0-this.min)*this.plotDisplacement/(this.max-this.min);return t=this.isYAxis?Math.floor(t):Math.ceil(t)}},{key:\"getValueDisplacement\",value:function(t){var e=this.getOrigin()-t*this.plotDisplacement/(this.max-this.min);return e=this.isYAxis?Math.floor(e):Math.ceil(e)}}]),e}(h);i.Axis=h},{\"./utils.js\":12}],5:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function(){function t(){s(this,t),this.selectedItem={},this.containerElement=null,this.canvas=null,this.ctx=null,this.renderedSeries=null,this.options=null,this.scaleFactor=null,this.titleFont=null,this.plotArea=null,this.series=[],this.categories=[]}return n(t,[{key:\"seriesCount\",get:function(){return this.series.length}},{key:\"categoryCount\",get:function(){return this.series.length?this.series[0].data.length:0}}]),t}();i.Tayberry=r},{}],6:[function(t,e,i){\"use strict\";var s=t(\"./colour\").Colour,n=t(\"./utils\"),r=t(\"./tayberry.base\").Tayberry,o=t(\"./tayberry.axes\").Axis;r.prototype.create=function(t){\"string\"==typeof t?this.containerElement=document.getElementById(t):this.containerElement=t,this.canvas=document.createElement(\"canvas\"),this.canvas.style.width=\"100%\",this.canvas.style.height=\"100%\",this.containerElement.appendChild(this.canvas),this.ctx=this.canvas.getContext(\"2d\"),this.renderedSeries=null,this.options={},this.yAxis=null,this.xAxis=null,this.initialise()},r.prototype.destroy=function(){this.canvas.remove(),this.tooltipElement.remove(),this.options={},this.series={},this.canvas.removeEventListener(\"mousemove\",this.onMouseMoveReal),this.canvas.removeEventListener(\"mouseleave\",this.onMouseLeaveReal),this.canvas.removeEventListener(\"touchstart\",this.onTouchStartReal),window.removeEventListener(\"resize\",this.onWindowResizeReal)},r.prototype.initialise=function(){this.scaleFactor=window.devicePixelRatio||1,this.canvas.width=Math.round(this.containerElement.clientWidth*this.scaleFactor),this.canvas.height=Math.round(this.containerElement.clientHeight*this.scaleFactor),this.scaleFactorX=this.canvas.width/this.containerElement.clientWidth,this.scaleFactorY=this.canvas.height/this.containerElement.clientHeight,this.selectedItem={},this.plotArea=null},r.prototype.updateFonts=function(){this.ctx.font=this.mapLogicalYUnit(this.options.font.size)+\"px \"+this.options.font.face,this.titleFont=this.mapLogicalYUnit(this.options.title.font.size)+\"px \"+this.options.font.face},r.prototype.updateYFormatter=function(){this.options.yAxis.labelFormatter||(\"percentage\"===this.options.yAxis.labelFormat?this.options.yAxis.labelFormatter=n.createPercentageFormatter(this.yAxis.max-this.yAxis.min,this.options.yAxis.labelPrefix,this.options.yAxis.labelSuffix):\"currency\"===this.options.yAxis.labelFormat?this.options.yAxis.labelFormatter=n.createFixedNumberFormatter(this.yAxis.max-this.yAxis.min,this.options.yAxis.labelPrefix||this.options.yAxis.currencySymbol,this.options.yAxis.labelSuffix):this.options.yAxis.labelFormatter=n.createAutoNumberFormatter(this.yAxis.max-this.yAxis.min,this.options.yAxis.labelPrefix,this.options.yAxis.labelSuffix))},r.prototype.setOptions=function(t){var e=[this.defaultOptions()];if(t.presets)for(var i=0;i<t.presets.length;i++)e.push(r.presets[t.presets[i]]);e.push(t),this.options=n.deepAssign({},e),this.setSeries(t.series),this.updateFonts(),this.yAxis=o.create(this,this.options.yAxis,0,\"y\",\"horizontal\"===this.options.barChart.orientation),this.xAxis=o.create(this,this.options.xAxis,0,\"x\",\"horizontal\"===this.options.barChart.orientation),this.canvas.addEventListener(\"mousemove\",this.onMouseMoveReal=this.onMouseMove.bind(this)),this.canvas.addEventListener(\"mouseleave\",this.onMouseLeaveReal=this.onMouseLeave.bind(this)),this.canvas.addEventListener(\"touchstart\",this.onTouchStartReal=this.onTouchStart.bind(this)),window.addEventListener(\"resize\",this.onWindowResizeReal=n.throttle(this.onWindowResize,50).bind(this))},r.calculateHighlightColour=function(t){var e=new s(t);return e.increaseBy(30*(e.sum>=540?-1:1)).toString()},r.prototype.setSeries=function(t){var e;for(Array.isArray(t)?this.series=t:this.series=[t],this.renderedSeries=t.slice(0),e=0;e<this.renderedSeries.length;e++){var i=this.series[e];i.colour=i.colour||this.options.defaultPalette[e],i.highlightColour=i.highlightColour||r.calculateHighlightColour(i.colour);var s=n.assign({},i);s.data=this.renderedSeries[e].data.slice(0),this.renderedSeries[e]=s}},r.prototype.setCategories=function(t){this.categories=t},r.prototype.getDataMinMax=function(){var t,e,i,s,r=[],o=[],a=[],l=[];if(this.series[0].data.length){for(t=0;t<this.series[0].data.length;t++)for(r[t]=0,o[t]=0,e=0;e<this.series.length;e++){var h=this.series[e].data[t];n.isMissingValue(h)||(0>h?o[t]+=h:r[t]+=h)}for(var c=0;c<this.series.length;c++){var u=this.series[c];a.push(n.reduce(u.data,Math.min,void 0,!0)),l.push(n.reduce(u.data,Math.max,void 0,!0))}\"stacked\"===this.options.barMode?(i=Math.min(0,n.reduce(o,Math.min,void 0,!0)),s=Math.max(n.reduce(r,Math.max,void 0,!0),0)):(i=n.reduce(a,Math.min,void 0,!0),s=n.reduce(l,Math.max,void 0,!0))}return[i,s]},r.prototype.createTooltip=function(){this.tooltipElement=document.createElement(\"div\"),this.tooltipElement.className=\"tayberry-tooltip\",this.tooltipElement.style.position=\"absolute\",this.tooltipElement.style.left=\"0px\",this.tooltipElement.style.top=\"0px\",this.tooltipElement.style.zIndex=\"99999\",this.tooltipElement.style.font=this.options.font.size+\"px \"+this.options.font.face,this.tooltipElement.style.borderRadius=\"3px\",this.tooltipElement.style.backgroundColor=\"white\",this.tooltipElement.style.border=\"2px solid black\",this.tooltipElement.style.padding=\"0.15em 0.4em\",this.tooltipElement.style.display=\"none\",this.tooltipElement.innerHTML=\"\",document.body.appendChild(this.tooltipElement),this.tooltipElement.addEventListener(\"mousemove\",this.onMouseMove.bind(this)),this.tooltipElement.addEventListener(\"mouseleave\",this.onMouseLeave.bind(this))}},{\"./colour\":1,\"./tayberry.axes\":4,\"./tayberry.base\":5,\"./utils\":12}],7:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.defaultOptions=function(){return{defaultPalette:[\"#6FE87B\",\"#FFAB51\",\"#51A8FF\",\"#B651FF\",\"#FF6051\",\"#636363\"],title:{text:\"\",font:{size:20}},font:{colour:\"#444\",size:12,face:\"sans-serif\"},xAxis:{title:\"\",type:\"categorial\",min:0,max:100,step:1,categories:[],labelPosition:\"middle\",placement:\"auto\"},yAxis:{title:\"\",gridLines:{colour:\"#ccc\"},min:void 0,max:void 0,tickStep:30,labelFormat:\"number\",labelFormatter:void 0,labelPrefix:void 0,labelSuffix:void 0,currencySymbol:\"\",placement:\"auto\",type:\"linear\"},series:[],barChart:{orientation:\"vertical\"},barMode:\"normal\",barPadding:2,elementSmallPadding:5,elementLargePadding:10,categorySpacing:.3,presets:[],tooltips:{shared:!1,headerTemplate:\"<strong>{category}</strong><table>\",valueTemplate:'<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\"></span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',footerTemplate:\"</table>\"},legend:{enabled:!0,indicatorSize:15},labels:{enabled:!1,verticalAlignment:\"top\",verticalPosition:\"outside\"}}},s.presets={histogram:{xAxis:{labelPosition:\"left\"},barMode:\"overlaid\",categorySpacing:0,barPadding:1}}},{\"./tayberry.base.js\":5}],8:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.render=function(){this.calculatePlotArea(),this.animator=requestAnimationFrame(this.onAnimate.bind(this)),this.animatationStart=performance.now(),this.animationLength=500,this.xAxis.draw(),this.yAxis.draw(),this.createTooltip()},s.prototype.clear=function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},s.prototype.drawTitle=function(){if(this.options.title.text){var t=this.canvas.width/2,e=0;this.ctx.save(),this.ctx.textAlign=\"center\",this.ctx.textBaseline=\"top\",this.ctx.font=this.titleFont,this.ctx.fillStyle=this.options.font.colour,this.ctx.fillText(this.options.title.text,t,e),this.ctx.restore()}},s.prototype.drawLabel=function(t,e,i){var n=(i.left+i.right)/2,r=void 0;r=\"top\"===this.options.labels.verticalAlignment?i.top:\"bottom\"===this.options.labels.verticalAlignment?i.bottom:(i.top+i.bottom)/2,this.plotArea.containsPoint(n,r)&&(this.ctx.save(),this.ctx.textAlign=\"center\",this.ctx.textBaseline=s.mapVerticalPosition(t,this.options.labels.verticalPosition),this.ctx.fillStyle=this.options.font.colour,this.ctx.fillText(e,n,r),this.ctx.restore())},s.prototype.draw=function(){this.ctx.save(),this.enumerateBars(function(t){this.ctx.fillStyle=t.selected?t.renderedSeries.highlightColour:t.renderedSeries.colour,this.ctx.fillRect(t.rect.left,t.rect.top,t.rect.width,t.rect.height)}.bind(this)),this.ctx.restore(),this.options.labels.enabled&&(this.ctx.save(),this.enumerateBars(function(t){this.drawLabel(t.value,this.options.yAxis.labelFormatter(t.value),t.rect)}.bind(this)),this.ctx.restore())},s.prototype.drawLine=function(t,e,i,s,n){this.ctx.save(),n&&(this.ctx.strokeStyle=n),this.ctx.beginPath(),this.ctx.moveTo(t+.5,e+.5),this.ctx.lineTo(i+.5,s+.5),this.ctx.stroke(),this.ctx.restore()},s.prototype.redraw=function(){this.clear(),this.drawTitle(),this.xAxis.draw(),this.yAxis.draw(),this.drawLegend(),this.draw()},s.prototype.drawLegend=function(){if(this.options.legend.enabled){for(var t=0,e=this.mapLogicalXUnit(this.options.legend.indicatorSize),i=0;i<this.series.length;i++){var s=this.series[i];s.name&&(t+=this.getTextWidth(s.name)+e+this.mapLogicalXUnit(this.options.elementSmallPadding+this.options.elementLargePadding))}for(var n=this.plotArea.left+this.plotArea.width/2-t/2,r=this.canvas.height-e,i=0;i<this.renderedSeries.length;i++){var s=this.renderedSeries[i];s.name&&(this.ctx.fillStyle=s.colour,this.ctx.fillRect(n,r,e,e),this.ctx.textBaseline=\"middle\",this.ctx.fillStyle=this.options.font.colour,n+=e+this.mapLogicalXUnit(this.options.elementSmallPadding),this.ctx.fillText(s.name,n,r+e/2),n+=this.getTextWidth(s.name)+this.mapLogicalXUnit(this.options.elementLargePadding))}}}},{\"./tayberry.base.js\":5}],9:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./easing.js\"),r=t(\"./utils.js\"),o=t(\"./tayberry.base.js\").Tayberry;o.prototype.onAnimate=function(t){var e,i;e=t-this.animatationStart,i=Math.min(n.inQuad(e,this.animationLength),1);for(var s=0;s<this.series[0].data.length;s++)for(var r=0;r<this.series.length;r++){var o=this.series[r].data[s],a=this.yAxis.min<=0&&0<=this.yAxis.max?0:this.yAxis.min>0?this.yAxis.min:this.yAxis.max;this.renderedSeries[r].data[s]=a+i*(o-a)}this.redraw(),1>i&&(this.animator=requestAnimationFrame(this.onAnimate.bind(this)))},o.prototype.onMouseLeave=function(t){(t.currentTarget==this.canvas&&t.relatedTarget!==this.tooltipElement||t.currentTarget==this.tooltipElement&&t.relatedTarget!==this.canvas)&&(this.selectedItem={},this.tooltipElement.style.display=\"none\",this.redraw())},o.prototype.handleMouseMove=function(t,e){var i=new s(this.canvas.getBoundingClientRect()),n=!1;if(i.containsPoint(t,e)){var o=t-i.left,a=e-i.top,l=this.hitTest(this.mapLogicalXUnit(o),this.mapLogicalYUnit(a));if(l.found){var h=l.rect.top<l.rect.bottom,c=this.xAxis.options.categories[l.categoryIndex];this.tooltipElement.style.display=\"block\";var u=r.formatString(this.options.tooltips.headerTemplate,{category:c},!0);if(this.options.tooltips.shared)for(var p=0;p<this.series.length;p++){var d=this.series[p],f=d.data[l.categoryIndex];u+=r.formatString(this.options.tooltips.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}else{var d=this.series[l.seriesIndex],f=d.data[l.categoryIndex];u+=r.formatString(this.options.tooltips.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}u+=this.options.tooltips.footerTemplate,this.tooltipElement.innerHTML=u;var m=this.tooltipElement.getBoundingClientRect();this.tooltipElement.style.borderColor=this.renderedSeries[l.seriesIndex].colour,this.tooltipElement.style.left=window.pageXOffset+i.left+this.mapScreenUnit(l.rect.width)/2+l.rect.left/this.scaleFactor-m.width/2+\"px\",this.tooltipElement.style.top=window.pageYOffset+i.top+this.mapScreenUnit(l.rect.top)-m.height*(h?1:0)-this.options.elementSmallPadding*(h?1:-1)+\"px\",this.selectedItem=l,n=!0}}return n},o.prototype.onTouchStart=function(t){for(var e=0;e<t.targetTouches.length;e++){var i=t.targetTouches[e];if(this.handleMouseMove(i.clientX,i.clientY)){t.preventDefault(),this.redraw();break}}},o.prototype.onMouseMove=function(t){var e=r.assign({},this.selectedItem);this.handleMouseMove(t.clientX,t.clientY)||(this.selectedItem={}),(e.categoryIndex!==this.selectedItem.categoryIndex||e.seriesIndex!==this.selectedItem.seriesIndex)&&this.redraw()},o.prototype.onWindowResize=function(){this.tooltipElement.style.display=\"none\",this.initialise(),this.updateFonts(),this.calculatePlotArea(),this.redraw()}},{\"./easing.js\":2,\"./rect\":3,\"./tayberry.base.js\":5,\"./utils.js\":12}],10:[function(t,e,i){\"use strict\";!function(){var i=t(\"./tayberry.base.js\").Tayberry;t(\"./tayberry.axes.js\"),t(\"./tayberry.core.js\"),t(\"./tayberry.drawing.js\"),t(\"./tayberry.events.js\"),t(\"./tayberry.defaults.js\"),t(\"./tayberry.sizing.js\"),e.exports={create:function(t,e){var s=new i;s.create(t),s.setOptions(e),s.render()}}}()},{\"./tayberry.axes.js\":4,\"./tayberry.base.js\":5,\"./tayberry.core.js\":6,\"./tayberry.defaults.js\":7,\"./tayberry.drawing.js\":8,\"./tayberry.events.js\":9,\"./tayberry.sizing.js\":11}],11:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./utils\"),r=t(\"./tayberry.base.js\").Tayberry;r.mapVerticalPosition=function(t,e){switch(e){case\"outside\":return t>0?\"bottom\":\"top\";case\"inside\":return t>0?\"top\":\"bottom\";default:return\"middle\"}},r.prototype.mapLogicalXUnit=function(t){return this.scaleFactorX*t},r.prototype.mapLogicalYUnit=function(t){return this.scaleFactorY*t},r.prototype.mapScreenUnit=function(t){return t/this.scaleFactor},r.prototype.getTextWidth=function(t){return this.ctx.measureText(t).width},r.prototype.calculatePlotArea=function(){var t=5;this.plotArea=new s(0,0,this.canvas.width,this.canvas.height),this.options.title.text&&(this.plotArea.top+=this.mapLogicalYUnit(this.options.elementSmallPadding+this.options.title.font.size)),this.options.legend.enabled&&(this.plotArea.bottom-=this.mapLogicalYUnit(this.options.elementSmallPadding+this.options.elementLargePadding+this.options.legend.indicatorSize)),this.yAxis.adjustSize(this.plotArea,!0,!0),this.xAxis.adjustSize(this.plotArea,!0,!0);for(var e=0;t>e&&(this.yAxis.calculateExtent(),this.updateYFormatter(),this.yAxis.adjustSize(this.plotArea)||this.xAxis.adjustSize(this.plotArea));e++);this.plotArea.left=Math.ceil(this.plotArea.left),this.plotArea.top=Math.ceil(this.plotArea.top),this.plotArea.right=Math.floor(this.plotArea.right),this.plotArea.bottom=Math.floor(this.plotArea.bottom)},r.prototype.hitTest=function(t,e){var i={found:!1,categoryIndex:void 0,seriesIndex:void 0,rect:void 0},s=[],r=\"overlaid\"===this.options.barMode;if(this.enumerateBars(function(i){return i.rect.containsPoint(t,e)&&(s.push({categoryIndex:i.categoryIndex,seriesIndex:i.seriesIndex,rect:i.rect}),!r)?!0:void 0}.bind(this)),s.length){i.found=!0;for(var o=0,a=s[0].rect.height,l=1;l<s.length;l++){var h=s[l];h.rect.height<a&&(o=l,a=h.rect.height)}i=n.assign(i,s[o])}return i},r.prototype.enumerateBars=function(t){var e=this.renderedSeries[0].data.length;if(e){var i=\"stacked\"===this.options.barMode,r=\"overlaid\"===this.options.barMode,o=\"horizontal\"===this.options.barChart.orientation,a=this.plotArea.clone();o&&a.swapXY();for(var l=!i&&!r,h=i||r?1:this.series.length,c=a.width/e,u=this.yAxis.getOrigin(),p=0;e>p;p++)for(var d=a.left+Math.floor(p*c),f=a.left+Math.floor((p+1)*c),m=d+Math.ceil(c*this.options.categorySpacing/2),g=f-Math.floor(c*this.options.categorySpacing/2),y=u,v=u,x=0,b=0,A=0,S=0;S<this.renderedSeries.length;S++){var w=this.renderedSeries[S].data[p],k=Math.floor((g-m)/h),M=Math.floor(m+A*k),T=Math.ceil(m+(A+1)*k);if(!n.isMissingValue(w)){var P=this.yAxis.getValueDisplacement(w+(w>0?x:b)),L=new s(M,P,T,w>0?y:v);L.left+=Math.ceil(this.options.barPadding*this.scaleFactor/2),L.right-=Math.floor(this.options.barPadding*this.scaleFactor/2),L.right<L.left&&(L.right=L.left),o&&L.swapXY(),L.clip(this.plotArea);var Y=t({seriesIndex:S,categoryIndex:p,series:this.renderedSeries[S],renderedSeries:this.renderedSeries[S],value:this.series[S].data[p],renderedValue:this.renderedSeries[S].data[p],rect:L,selected:this.selectedItem.categoryIndex===p&&this.selectedItem.seriesIndex===S});if(Y)break;i?w>0?(x+=w,y=P):(b+=w,v=P):l&&A++}}}}},{\"./rect\":3,\"./tayberry.base.js\":5,\"./utils\":12}],12:[function(t,e,i){\"use strict\";!function(){i.identity=function(t){return t},i.isMissingValue=function(t){return null===t||\"undefined\"==typeof t||isNaN(t)&&\"number\"==typeof t},i.reduce=function(t,e,s){var n,r,o=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(!t.reduce||s||o){if(s=s||i.identity,t.length)for(n=s(t[0]),r=1;r<t.length;r++){var a=s(t[r]);o&&i.isMissingValue(a)||(n=e(n,a))}}else n=t.reduce(function(t,i){return e(t,i)});return n},i.sign=Math.sign||function(t){return t>0?1:0>t?-1:0},i.now=\"undefined\"!=typeof performance&&\"undefined\"!=typeof performance.now?performance.now:function(){return(new Date).getTime()};var t=function e(t,i,s){if(Array.isArray(s)||(s=[s]),!t&&Object.assign)return Object.assign.apply(Object,[i].concat(s));if(void 0===i||null===i)throw new TypeError(\"Cannot convert first argument to object\");for(var n=Object(i),r=0;r<s.length;r++){var o=s[r];if(void 0!==o&&null!==o){o=Object(o);for(var a=Object.keys(o),l=0,h=a.length;h>l;l++){var c=a[l],u=o[c],p=Object.getOwnPropertyDescriptor(o,c);void 0!==p&&p.enumerable&&(t&&\"object\"==typeof n[c]&&!Array.isArray(u)&&\"object\"==typeof u?e(!0,n[c],u):n[c]=u)}}}return n};i.assign=function(e,i){return t(!1,e,i)},i.deepAssign=function(e,i){return t(!0,e,i)},i.formatString=function(t,e,s){return t.replace(/{(\\w+)}/g,function(t,n){var r=e[n];return\"undefined\"!=typeof r?s?i.stringToHtml(r):r:t})},i.locateDecimalPoint=function(t){return Math.floor(Math.log(t)/Math.log(10))},i.formatNumberThousands=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=t.toFixed(e).split(\".\");return i[0]=i[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),i.join(\".\")},i.createAutoNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],r=i.locateDecimalPoint(t);return r=0>r?-r+n-1:0,function(t){return e+i.formatNumberThousands(t,r)+s}},i.createFixedNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3];return function(t){return e+i.formatNumberThousands(t,n)+s}},i.createPercentageFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"%\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],r=i.locateDecimalPoint(100*t);return r=0>r?-r+n-1:0,function(t){return e+i.formatNumberThousands(100*t,r)+s}},i.stringToHtml=function(t){var e=document.createElement(\"div\");return e.appendChild(document.createTextNode(t)),\ne.innerHTML},i.throttle=function(t,e){var i,s;return function(){var n=this,r=Date.now(),o=arguments;i&&i+e>r?(clearTimeout(s),s=setTimeout(function(){i=r,t.apply(n,o)},e)):(i=r,t.apply(n,o))}}}()},{}]},{},[10])(10)});\n//# sourceMappingURL=tayberry.min.js.map\n","var Utils = require('./utils.js');\r\nclass Colour {\r\n    /**\r\n     * Constructs a Colour object.\r\n     *\r\n     * @param colourCode    an HTML colour code in hex or integer (rgb) form\r\n     */\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            let arg1 = arguments[0];\r\n            if (typeof arg1 === 'string')\r\n                this.parseString(arg1);\r\n            else {\r\n                this.r = arg1.r;\r\n                this.g = arg1.g;\r\n                this.b = arg1.b;\r\n                this.a = arg1.a;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses an HTML colour code\r\n     * @param str\r\n     * @returns {Colour}\r\n     */\r\n    parseString (str) {\r\n        let regExHex = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;\r\n        let regExInt = /^rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*)?\\)$/i;\r\n        const groupsHex = regExHex.exec(str);\r\n        const groupsInt = regExInt.exec(str);\r\n        if (groupsHex) {\r\n            let parseHex = function(value) {\r\n                let ret = parseInt(value, 16);\r\n                ret = ret*0x10 + ret;\r\n                return ret;\r\n            };\r\n            this.r = groupsHex[1] ? parseInt(groupsHex[1], 16) : parseHex(groupsHex[4]);\r\n            this.g = groupsHex[2] ? parseInt(groupsHex[2], 16) : parseHex(groupsHex[5]);\r\n            this.b = groupsHex[3] ? parseInt(groupsHex[3], 16) : parseHex(groupsHex[6]);\r\n            this.a = null;\r\n        }\r\n        else if (groupsInt) {\r\n            this.r = parseInt(groupsInt[1]);\r\n            this.g = parseInt(groupsInt[2]);\r\n            this.b = parseInt(groupsInt[3]);\r\n            this.a = groupsInt[5] ? parseFloat(groupsInt[5]) : null;\r\n        } else {\r\n            throw new RangeError(str + \" is not a valid HTML colour\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips a colour component to be in the range [0, 255], and round it them to\r\n     * the nearest integer\r\n     * @param component\r\n     * @returns {Colour}\r\n     */\r\n    clipComponent(component) {\r\n        this[component] = Math.round(this[component]);\r\n        this[component] = Math.min(this[component], 255);\r\n        this[component] = Math.max(this[component], 0);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips r,g,b colour components to be in the range [0, 255], and rounds them to\r\n     * the nearest integer\r\n     * @returns {Colour}\r\n     */\r\n    clip () {\r\n        this.clipComponent('r');\r\n        this.clipComponent('g');\r\n        this.clipComponent('b');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Multiplies each colour component by a number\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    multiplyBy (number) {\r\n        this.r *= number;\r\n        this.g *= number;\r\n        this.b *= number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a number to each colour component\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    increaseBy (number) {\r\n        this.r += number;\r\n        this.g += number;\r\n        this.b += number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    get sum() {\r\n        return this.r + this.g + this.b;\r\n    }\r\n\r\n    /**\r\n     * Formats this colour as a string\r\n     * @returns {String}\r\n     */\r\n    toString() {\r\n        var ret;\r\n        if (this.a) {\r\n            ret = Utils.formatString('rgba({r},{g},{b},{a})', this);\r\n        } else {\r\n            ret = Utils.formatString('rgb({r},{g},{b})', this);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    /**\r\n     * Multiplies each colour component of a colour code by a number\r\n     * @param colour\r\n     * @param number\r\n     * @returns {String}\r\n     */\r\n    static multiplyBy(colour, number) {\r\n        return (new Colour(colour)).multiplyBy(number).toString();\r\n    }\r\n\r\n}\r\n\r\nexports.Colour = Colour;","exports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.inQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * factor;\r\n};\r\n\r\nexports.outQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * (2 - factor);\r\n};\r\n","class Rect {\r\n    constructor() {\r\n        var rect;\r\n        if (arguments.length === 1) {\r\n            rect = arguments[0];\r\n            this.left = rect.left;\r\n            this.top = rect.top;\r\n            this.right = rect.right;\r\n            this.bottom = rect.bottom;\r\n        } else if (arguments.length === 4) {\r\n            this.left = arguments[0];\r\n            this.top = arguments[1];\r\n            this.right = arguments[2];\r\n            this.bottom = arguments[3];\r\n        }\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get maxY() {\r\n        return Math.max(this.bottom, this.top);\r\n    }\r\n\r\n    get minY() {\r\n        return Math.min(this.bottom, this.top);\r\n    }\r\n\r\n    get minX() {\r\n        return Math.min(this.left, this.right);\r\n    }\r\n\r\n    get maxX() {\r\n        return Math.max(this.left, this.right);\r\n    }\r\n\r\n    containsPoint(x, y) {\r\n        return this.containsX(x) && this.containsY(y);\r\n    }\r\n\r\n    containsY(y) {\r\n        return (y >= this.top && y < this.bottom) || (y >= this.bottom && y < this.top);\r\n    }\r\n\r\n    containsX(x) {\r\n        return (x >= this.left && x < this.right) || (x >= this.right && x < this.left);\r\n    }\r\n\r\n    clip(clipRect) {\r\n        //FIXME: In theory, we should be more careful about how we handle rects where right < left or bottom < top\r\n        if (this.left < clipRect.minX) this.left = clipRect.minX;\r\n        else if (this.left > clipRect.maxX) this.left = clipRect.maxX;\r\n\r\n        if (this.right < clipRect.minX) this.right = clipRect.minX;\r\n        else if (this.right > clipRect.maxX) this.right = clipRect.maxX;\r\n\r\n        if (this.top < clipRect.minY)\r\n            this.top = clipRect.minY;\r\n        else if (this.top > clipRect.maxY)\r\n            this.top = clipRect.maxY;\r\n\r\n        if (this.bottom > clipRect.maxY)\r\n            this.bottom = clipRect.maxY;\r\n        else if (this.bottom < clipRect.minY)\r\n            this.bottom = clipRect.minY;\r\n\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Rect(this);\r\n    }\r\n\r\n    swapXY() {\r\n        [this.left, this.top] = [this.top, this.left];\r\n        [this.bottom, this.right] = [this.right, this.bottom];\r\n        return this;\r\n    }\r\n}\r\n\r\nexports.Rect = Rect;","'use strict';\r\nvar Utils = require('./utils.js');\r\n\r\nclass Axis {\r\n    static create(tayberry, options, index, axisType, xYSwapped) {\r\n        if (xYSwapped) {\r\n            axisType = axisType === 'y' ? 'x' : 'y';\r\n        }\r\n        if (options.type === 'linear')\r\n            return new LinearAxis(tayberry, index, options, axisType);\r\n        else\r\n            return new CategorialAxis(tayberry, index, options, axisType);\r\n    }\r\n\r\n    constructor(tayberry, index, options, axisType) {\r\n        this.tayberry = tayberry;\r\n        this.options = options;\r\n        this.axisType = axisType;\r\n        this.index = index;\r\n        this.tickStep = null;\r\n        this.min = null;\r\n        this.max = null;\r\n        this.tickStart = null;\r\n        this.tickEnd = null;\r\n        this.calculatedSize = 0;\r\n        this.titleFont = null;\r\n\r\n        this.setPlacement();\r\n    }\r\n\r\n    updateFonts() {\r\n        this.titleFont = this.tayberry.createFontString(this.options.title.font);\r\n    }\r\n\r\n    setPlacement() {\r\n        const validAndSpecificPlacements = ['left', 'right', 'top', 'bottom', 'start', 'end'];\r\n        if (validAndSpecificPlacements.indexOf(this.options.placement) === -1) {\r\n            this.options.placement = this.isYAxis ^ (this.index > 0) ? 'start' : 'end';\r\n        }\r\n    }\r\n\r\n    get isPlacedAtStart() {\r\n        return this.options.placement === \"left\" || this.options.placement === \"bottom\" || this.options.placement === \"start\";\r\n    }\r\n\r\n    get isYAxis() {\r\n        return this.axisType === 'y';\r\n    }\r\n\r\n    maxLabelSize() {\r\n        let tb = this.tayberry;\r\n        let ticks = this.getTicks();\r\n        return Utils.reduce(ticks, Math.max, x => tb.getTextWidth(this.options.labelFormatter(x.value)));\r\n    }\r\n\r\n    mapLogicalXOrYUnit(x) {\r\n        return this.isYAxis ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    mapLogicalYOrXUnit(x) {\r\n        return !this.isYAxis ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    adjustSize(plotArea, fixedOnly = false, reset = false) {\r\n        let size = 0,\r\n            tb = this.tayberry,\r\n            ret;\r\n\r\n        const fontHeight = tb.getFontHeight(this.options.title.font);\r\n\r\n        if (reset)\r\n            this.calculatedSize = 0;\r\n\r\n        size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        if (this.options.title.text) {\r\n            size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) + fontHeight;\r\n        }\r\n\r\n        if (!fixedOnly) {\r\n            if (this.isYAxis) {\r\n                size += this.maxLabelSize()\r\n            } else {\r\n                // A bit hacky - need to generalise\r\n                let ticks = this.getTicks(false);\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const textWidth = tb.getTextWidth(this.options.labelFormatter(lastTick.value));\r\n                    const lastTickXEnd = lastTick.x + textWidth / 2;\r\n                    if (lastTickXEnd >= tb.canvas.width) {\r\n                        plotArea.right -= lastTickXEnd - tb.canvas.width + 1;\r\n                    }\r\n                }\r\n                size += fontHeight;\r\n            }\r\n        }\r\n\r\n        if (this.isPlacedAtStart) {\r\n            if (this.isYAxis) {\r\n                plotArea.left += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.top += size - this.calculatedSize;\r\n            }\r\n        } else {\r\n            size *= -1;\r\n            if (this.isYAxis) {\r\n                plotArea.right += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.bottom += size - this.calculatedSize;\r\n            }\r\n        }\r\n\r\n        ret = this.calculatedSize !== size;\r\n        this.calculatedSize = size;\r\n\r\n        return ret;\r\n    }\r\n\r\n    calculateExtent() {\r\n    }\r\n\r\n    getCategoryLabel() {\r\n    }\r\n\r\n    draw() {\r\n        this.drawTicksAndLabels();\r\n        this.drawTitle();\r\n    }\r\n\r\n    drawTicksAndLabels() {\r\n        let tb = this.tayberry;\r\n        const labelPaddingX = this.isYAxis ? this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const labelPaddingY = !this.isYAxis ? this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n\r\n        tb.ctx.save();\r\n        tb.ctx.fillStyle = tb.options.font.colour;\r\n        tb.ctx.textAlign = this.isYAxis ? (this.isPlacedAtStart ? 'right' : 'left') : 'center';\r\n        tb.ctx.textBaseline = this.isYAxis ? 'middle' : this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n        let lastXEnd;\r\n\r\n        this.enumerateTicks(function (tick) {\r\n            let textWidth, xStart, xEnd;\r\n            const formattedValue = this.options.labelFormatter(tick.value);\r\n            if (!this.isYAxis) {\r\n                textWidth = tb.getTextWidth(formattedValue);\r\n                xStart = tick.x - textWidth / 2;\r\n                xEnd = tick.x + textWidth / 2;\r\n            }\r\n\r\n            if (this.isYAxis || (typeof lastXEnd === 'undefined' || xStart > lastXEnd + 1) && xStart >= 0 && xEnd < tb.canvas.width) {\r\n                tb.ctx.fillText(formattedValue, tick.x + labelPaddingX, tick.y + labelPaddingY);\r\n                lastXEnd = xEnd;\r\n            }\r\n            if (this.options.gridLines.colour)\r\n                tb.drawLine(tick.x1, tick.y1, tick.x2, tick.y2, this.options.gridLines.colour);\r\n        }.bind(this));\r\n\r\n        tb.ctx.restore();\r\n    }\r\n\r\n    get startProperty() {\r\n        if (this.isYAxis)\r\n            return this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    get endProperty() {\r\n        if (this.isYAxis)\r\n            return !this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return !this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    drawTitle() {\r\n        if (this.options.title.text) {\r\n            let tb = this.tayberry;\r\n            tb.ctx.save();\r\n            tb.ctx.font = this.titleFont;\r\n            tb.ctx.fillStyle = this.options.title.font.colour;\r\n            tb.ctx.textAlign = 'center';\r\n            tb.ctx.textBaseline = !this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n            if (this.isYAxis) {\r\n                const x = 0;\r\n                const y = tb.plotArea.top + (tb.plotArea.height) / 2;\r\n                tb.ctx.translate(x, y);\r\n                tb.ctx.rotate(-Math.PI / 2);\r\n                tb.ctx.fillText(this.options.title.text, 0, 0);\r\n            } else {\r\n                const x = tb.plotArea.left + tb.plotArea.width / 2;\r\n                const y = tb.plotArea[this.startProperty] - this.calculatedSize;\r\n                //tb.mapLogicalYOrXUnit(tb.options.font.size * 2 + tb.options.elementSmallPadding + tb.options.elementLargePadding)\r\n                tb.ctx.fillText(this.options.title.text, x, y);\r\n            }\r\n            tb.ctx.restore();\r\n        }\r\n    }\r\n\r\n    getTicks(visibleOnly = true) {\r\n        let ret = [];\r\n        this.enumerateTicks(function (tick) {\r\n            ret.push(tick)\r\n        }, visibleOnly);\r\n        return ret;\r\n    }\r\n\r\n    getOrigin() {\r\n    }\r\n\r\n    updateFormatter() {\r\n    }\r\n}\r\n\r\nclass CategorialAxis extends Axis {\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const categoryCount = this.options.categories.length;\r\n        let plotArea = tb.plotArea.clone();\r\n        if (this.isYAxis)\r\n            plotArea.swapXY();\r\n        const categoryWidth = (plotArea.width / tb.series[0].data.length);\r\n        let factor = 0.5;\r\n\r\n        if (!this.isYAxis) {\r\n            switch (this.options.labelPosition) {\r\n                case 'left':\r\n                    factor = 0;\r\n                    break;\r\n                case 'right':\r\n                    factor = 1;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < categoryCount; i++) {\r\n            const value = this.options.categories[i];\r\n            let y1 = (this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let y2 = (!this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let x1 = plotArea.left + Math.floor(i * categoryWidth);\r\n            let x2 = x1;\r\n            let x = plotArea.left + Math.floor(i * categoryWidth + categoryWidth * factor);\r\n            let y = y1;\r\n            if (this.isYAxis)\r\n                [x1, y1, x2, y2, x, y] = [y1, x1, y2, x2, y, x];\r\n\r\n            callback({\r\n                value: value,\r\n                x1: x1,\r\n                y1: y1,\r\n                x2: x2,\r\n                y2: y2,\r\n                x: x,\r\n                y: y\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            this.options.labelFormatter = Utils.identity;\r\n        }\r\n    }\r\n\r\n    getCategoryLabel(index) {\r\n        return this.options.labelFormatter(this.options.categories[index]);\r\n    }\r\n}\r\n\r\nclass LinearAxis extends Axis {\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            if (this.options.labelFormat === 'percentage') {\r\n                this.options.labelFormatter = Utils.createPercentageFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n            else if (this.options.labelFormat === 'currency') {\r\n                this.options.labelFormatter = Utils.createFixedNumberFormatter(this.max - this.min, this.options.labelPrefix || this.options.currencySymbol, this.options.labelSuffix);\r\n            }\r\n            else {\r\n                this.options.labelFormatter = Utils.createAutoNumberFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n        }\r\n    }\r\n\r\n    enumerateTicks(callback, visibleOnly = true) {\r\n        let tb = this.tayberry;\r\n\r\n        const start = this.startProperty,\r\n            end = this.endProperty;\r\n\r\n        for (let yValue = this.tickStart; yValue <= this.tickEnd && this.tickStep;) {\r\n            let y = this.getValueDisplacement(yValue);\r\n            if (this.isYAxis) {\r\n                if (!visibleOnly || tb.plotArea.containsY(y)) {\r\n                    if (callback({\r\n                            value: yValue,\r\n                            x1: tb.plotArea[start],\r\n                            y1: y,\r\n                            x2: tb.plotArea[end],\r\n                            y2: y,\r\n                            x: tb.plotArea[start],\r\n                            y: y\r\n\r\n                        }))\r\n                        break;\r\n                }\r\n            } else {\r\n                if (!visibleOnly || tb.plotArea.containsX(y)) {\r\n                    if (callback({\r\n                            value: yValue,\r\n                            y1: tb.plotArea[start],\r\n                            x1: y,\r\n                            y2: tb.plotArea[end],\r\n                            x2: y,\r\n                            y: tb.plotArea[start],\r\n                            x: y\r\n                        }))\r\n                        break;\r\n                }\r\n            }\r\n            yValue = this.tickStart + Math.round((yValue + this.tickStep - this.tickStart) / this.tickStep) * this.tickStep;\r\n        }\r\n    }\r\n\r\n    static snapScaledValue(scaledStep) {\r\n        if (scaledStep < 1)\r\n            scaledStep = 1;\r\n        else if (scaledStep < 2)\r\n            scaledStep = 2;\r\n        else if (scaledStep < 2.5)\r\n            scaledStep = 2.5;\r\n        else if (scaledStep < 5)\r\n            scaledStep = 5;\r\n        else\r\n            scaledStep = 10;\r\n        return scaledStep;\r\n    }\r\n\r\n    calculateExtent() {\r\n        let targetTicks, approxStep, scale;\r\n\r\n        let targetStart = this.options.min;\r\n        let targetEnd = this.options.max;\r\n        const overriddenStart = !Utils.isMissingValue(targetStart);\r\n        const overriddenEnd = !Utils.isMissingValue(targetEnd);\r\n\r\n        if (!overriddenStart || !overriddenEnd) {\r\n            const [dataMin, dataMax] = this.tayberry.getDataMinMax(); //TODO: implement for x-axis\r\n            const dataRange = dataMax - dataMin;\r\n            if (!overriddenStart) {\r\n                targetStart = dataMin - dataRange * 0.1;\r\n                if (dataMin >= 0 && targetStart < 0)\r\n                    targetStart = 0;\r\n            }\r\n            if (!overriddenEnd) {\r\n                targetEnd = dataMax + dataRange * 0.1;\r\n                if (dataMax <= 0 && targetStart > 0)\r\n                    targetEnd = 0;\r\n            }\r\n        }\r\n\r\n        if (this.options.tickStepValue) {\r\n            this.tickStep = this.options.tickStepValue;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        } else {\r\n            const targetRange = targetEnd - targetStart;\r\n            targetTicks = this.plotLength / this.mapLogicalYOrXUnit(this.options.tickStep);\r\n            approxStep = targetRange / targetTicks;\r\n            scale = Math.pow(10, Math.floor(Math.log(approxStep) / Math.log(10)));\r\n            let scaledStep = LinearAxis.snapScaledValue(Math.ceil(approxStep / scale));\r\n            this.tickStep = scaledStep * scale;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        }\r\n        this.tickStart = this.options.tickStepValue && overriddenStart ? this.min : Math.floor(this.min / this.tickStep) * this.tickStep;\r\n        this.tickEnd = this.options.tickStepValue && overriddenEnd ? this.max : Math.ceil(this.max / this.tickStep) * this.tickStep;\r\n        if (!overriddenStart)\r\n            this.min = this.tickStart;\r\n        if (!overriddenEnd)\r\n            this.max = this.tickEnd;\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isYAxis ? (this.tayberry.plotArea.height - 1) : -(this.tayberry.plotArea.width - 1);\r\n    }\r\n\r\n    get plotLength() {\r\n        return Math.abs(this.plotDisplacement);\r\n    }\r\n\r\n    getOrigin() {\r\n        let ret = this.tayberry.plotArea[this.isYAxis ? 'bottom' : 'left'] - (0 - this.min) * this.plotDisplacement / (this.max - this.min);\r\n        if (this.isYAxis) ret--;\r\n        ret = this.isYAxis ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() - value * this.plotDisplacement / (this.max - this.min);\r\n        ret = this.isYAxis ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getCategoryLabel(index, totalCategories) {\r\n        const start = index / totalCategories;\r\n        const end = (index + 1) / totalCategories;\r\n        const axisRange = this.max - this.min;\r\n        return Utils.formatString('{0} \\u2264 x < {1}', [this.options.labelFormatter(this.min + start * axisRange), this.options.labelFormatter(this.min + end * axisRange)]);\r\n    }\r\n}\r\n\r\nexports.Axis = Axis;","class Tayberry {\r\n    constructor() {\r\n        this.selectedItem = {};\r\n        this.containerElement = null;\r\n        this.canvas = null;\r\n        this.ctx = null;\r\n        this.renderedSeries = null;\r\n        this.options = null;\r\n        this.scaleFactor = null;\r\n        this.titleFont = null;\r\n        this.plotArea = null;\r\n        this.series = [];\r\n        this.categories = [];\r\n    }\r\n\r\n    get seriesCount() {\r\n        return this.series.length;\r\n    }\r\n\r\n    get categoryCount() {\r\n        return this.series.length ? this.series[0].data.length : 0;\r\n    }\r\n}\r\n\r\nexports.Tayberry = Tayberry;\r\n\r\n\r\n","'use strict';\r\nvar Colour = require('./colour').Colour;\r\nvar Utils = require('./utils');\r\n\r\nvar Tayberry = require('./tayberry.base').Tayberry;\r\nvar Axis = require('./tayberry.axes').Axis;\r\n\r\nvar currentAutoColourIndex = 0;\r\n\r\nTayberry.getAutoColour = function() {\r\n    let ret = Tayberry.defaultColours[currentAutoColourIndex % Tayberry.defaultColours.length];\r\n    currentAutoColourIndex++;\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.create = function (containerElement) {\r\n    if (typeof containerElement == 'string') {\r\n        this.containerElement = document.getElementById(containerElement);\r\n    } else {\r\n        this.containerElement = containerElement;\r\n    }\r\n    this.canvas = document.createElement('canvas');\r\n    this.canvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.canvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.containerElement.appendChild(this.canvas);\r\n    this.ctx = this.canvas.getContext('2d');\r\n    this.renderedSeries = null;\r\n    this.options = {};\r\n    this.yAxis = null;\r\n    this.xAxis = null;\r\n    this.initialise();\r\n};\r\n\r\nTayberry.prototype.destroy = function () {\r\n    this.canvas.remove();\r\n    this.tooltipElement.remove();\r\n    this.options = {};\r\n    this.series = {};\r\n    this.canvas.removeEventListener('mousemove', this.onMouseMoveReal);\r\n    this.canvas.removeEventListener('mouseleave', this.onMouseLeaveReal);\r\n    this.canvas.removeEventListener('touchstart', this.onTouchStartReal);\r\n    window.removeEventListener('resize', this.onWindowResizeReal);\r\n};\r\n\r\nTayberry.prototype.initialise = function () {\r\n    this.scaleFactor = window.devicePixelRatio || 1.0;\r\n    this.canvas.width = Math.round(this.containerElement.clientWidth * this.scaleFactor);\r\n    this.canvas.height = Math.round(this.containerElement.clientHeight * this.scaleFactor);\r\n    this.scaleFactorX = this.canvas.width / this.containerElement.clientWidth;\r\n    this.scaleFactorY = this.canvas.height / this.containerElement.clientHeight;\r\n    this.selectedItem = {};\r\n    this.plotArea = null;\r\n};\r\n\r\nTayberry.prototype.getFontHeight = function (font, forDom = false) {\r\n    let ret = font.size;\r\n    if (font.autoScale)\r\n        ret *= Math.pow(this.canvas.width/800, 0.25);\r\n    if (!forDom) ret = this.mapLogicalYUnit(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.createFontString = function (font, forDom = false) {\r\n    return (font.style ? font.style + ' ' : '') + this.getFontHeight(font, forDom).toFixed(1) + 'px ' + font.face;\r\n};\r\n\r\nTayberry.prototype.updateFonts = function () {\r\n    this.ctx.font = this.createFontString(this.options.font);\r\n    this.titleFont = this.createFontString(this.options.title.font);\r\n    this.yAxis.updateFonts();\r\n    this.xAxis.updateFonts();\r\n};\r\n\r\nTayberry.prototype.setOptions = function (options) {\r\n    let optionOverrides = [this.defaultOptions()];\r\n    if (options.presets) {\r\n        for (let index = 0; index < options.presets.length; index++) {\r\n            optionOverrides.push(Tayberry.presets[options.presets[index]]);\r\n        }\r\n    }\r\n    optionOverrides.push(options);\r\n    this.options = Utils.deepAssign({}, optionOverrides);\r\n    this.options.title.font = Utils.deepAssign({}, [this.options.font, this.options.title.font]);\r\n    this.options.yAxis.title.font = Utils.deepAssign({}, [this.options.font, this.options.xAxis.title.font, this.options.yAxis.title.font]);\r\n    this.options.xAxis.title.font = Utils.deepAssign({}, [this.options.xAxis.title.font, this.options.yAxis.title.font]);\r\n    this.setSeries(options.series);\r\n    //this.setCategories(options.xAxis.categories);\r\n\r\n    this.yAxis = Axis.create(this, this.options.yAxis, 0, 'y', this.options.swapAxes);\r\n    this.xAxis = Axis.create(this, this.options.xAxis, 0, 'x', this.options.swapAxes);\r\n    this.updateFonts();\r\n    this.canvas.addEventListener('mousemove', this.onMouseMoveReal = this.onMouseMove.bind(this));\r\n    this.canvas.addEventListener('mouseleave', this.onMouseLeaveReal = this.onMouseLeave.bind(this));\r\n    this.canvas.addEventListener('touchstart', this.onTouchStartReal = this.onTouchStart.bind(this));\r\n    window.addEventListener('resize', this.onWindowResizeReal = Utils.throttle(this.onWindowResize, 50).bind(this));\r\n};\r\n\r\nTayberry.calculateHighlightColour = function (colour) {\r\n    let newColour = new Colour(colour);\r\n    return newColour.increaseBy(30 * (newColour.sum >= 180 * 3 ? -1 : 1)).toString();\r\n};\r\n\r\n/**\r\n * Format:\r\n * [{\r\n *   data: {array|object},\r\n *   name: {string}\r\n * },{\r\n *   data: {array|object},\r\n *   name: {string}\r\n * }]\r\n * @param series\r\n */\r\nTayberry.prototype.setSeries = function (series) {\r\n    var i;\r\n    if (!Array.isArray(series)) {\r\n        this.series = [series];\r\n    } else {\r\n        this.series = series;\r\n    }\r\n    this.renderedSeries = series.slice(0);\r\n    for (i = 0; i < this.renderedSeries.length; i++) {\r\n        let actualSeries = this.series[i];\r\n        actualSeries.colour = actualSeries.colour || Tayberry.getAutoColour();\r\n        actualSeries.highlightColour = actualSeries.highlightColour || Tayberry.calculateHighlightColour(actualSeries.colour);\r\n        let elem = Utils.assign({}, actualSeries);\r\n        elem.data = this.renderedSeries[i].data.slice(0);\r\n        this.renderedSeries[i] = elem;\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.setCategories = function (categories) {\r\n    this.categories = (categories);\r\n    //if (this.options.xAxis.type === 'numeric' || this.options.xAxis.type === 'numerical') {\r\n    //    this.categories = [];\r\n    //    for (let i = this.options.xAxis.min; i <= this.options.xAxis.max; i += this.options.xAxis.step) {\r\n    //        i = Math.round(i / this.options.xAxis.step) * this.options.xAxis.step;\r\n    //        this.categories.push(i);\r\n    //    }\r\n    //}\r\n};\r\n\r\nTayberry.prototype.getDataMinMax = function () {\r\n    var categoryIndex, seriesIndex, min, max;\r\n    let seriesPositiveTotals = [];\r\n    let seriesNegativeTotals = [];\r\n    const seriesMinima = [];\r\n    const seriesMaxima = [];\r\n    if (this.series[0].data.length) {\r\n        for (categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n            seriesPositiveTotals[categoryIndex] = 0;\r\n            seriesNegativeTotals[categoryIndex] = 0;\r\n            for (seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n                const value = this.series[seriesIndex].data[categoryIndex];\r\n                if (!Utils.isMissingValue(value)) {\r\n                    if (value < 0) {\r\n                        seriesNegativeTotals[categoryIndex] += value;\r\n                    } else {\r\n                        seriesPositiveTotals[categoryIndex] += value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            seriesMinima.push(Utils.reduce(series.data, Math.min, undefined, true));\r\n            seriesMaxima.push(Utils.reduce(series.data, Math.max, undefined, true));\r\n        }\r\n        if (this.options.barMode === 'stacked') {\r\n            min = Math.min(0, Utils.reduce(seriesNegativeTotals, Math.min, undefined, true));\r\n            max = Math.max(Utils.reduce(seriesPositiveTotals, Math.max, undefined, true), 0);\r\n        } else {\r\n            min = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n            max = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n        }\r\n    }\r\n    return [min, max];\r\n};\r\n\r\n\r\nTayberry.prototype.createTooltip = function () {\r\n    if (this.tooltipElement) {\r\n        this.tooltipElement.remove();\r\n        this.tooltipElement = null;\r\n    }\r\n    this.tooltipElement = document.createElement('div');\r\n    this.tooltipElement.className = 'tayberry-tooltip';\r\n    this.tooltipElement.style.position = 'absolute';\r\n    this.tooltipElement.style.left = '0px';\r\n    this.tooltipElement.style.top = '0px';\r\n    this.tooltipElement.style.zIndex = '99999';\r\n    this.tooltipElement.style.font = this.createFontString(this.options.font, true);\r\n    this.tooltipElement.style.borderRadius = '3px';\r\n    this.tooltipElement.style.backgroundColor = 'white';\r\n    this.tooltipElement.style.border = '2px solid black';\r\n    this.tooltipElement.style.padding = '0.15em 0.4em';\r\n    this.tooltipElement.style.display = 'none';\r\n    this.tooltipElement.innerHTML = '';\r\n    document.body.appendChild(this.tooltipElement);\r\n    this.tooltipElement.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.tooltipElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n};\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.defaultOptions = function () {\r\n    return {\r\n        title: {\r\n            text: '',\r\n            font: {\r\n                size: 20\r\n            }\r\n        },\r\n        font: {\r\n            colour: '#444',\r\n            size: 12,\r\n            face: 'sans-serif',\r\n            autoScale: true\r\n        },\r\n        xAxis: {\r\n            title: {\r\n                text: '',\r\n                font: {\r\n                }\r\n            },\r\n            type: 'categorial',\r\n            min: null,\r\n            max: null,\r\n            tickStep: 40,\r\n            tickStepValue: null,\r\n            categories: [],\r\n            labelPosition: 'middle', //left|middle|right\r\n            placement: 'auto',\r\n            gridLines: {}\r\n        },\r\n        yAxis: {\r\n            title: {\r\n                text: '',\r\n                font: {\r\n                }\r\n            },\r\n            gridLines: {\r\n                colour: '#ccc'\r\n            },\r\n            min: undefined,\r\n            max: undefined,\r\n            tickStep: 40,\r\n            tickStepValue: null,\r\n            labelFormat: 'number', //[number|percentage|currency],\r\n            labelFormatter: undefined,\r\n            labelPrefix: undefined,\r\n            labelSuffix: undefined,\r\n            currencySymbol: '',\r\n            placement: 'auto',\r\n            type: 'linear'\r\n        },\r\n        series: [],\r\n        swapAxes: false,\r\n        barMode: 'normal', //[normal|stacked|overlaid]\r\n        barPadding: 2,\r\n        elementSmallPadding: 5,\r\n        elementLargePadding: 10,\r\n        categorySpacing: 0.3,\r\n        presets: [],\r\n        tooltips: {\r\n            shared: false,\r\n            headerTemplate: '<strong>{category}</strong><table>',\r\n            valueTemplate: '<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">\\u25CF</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',\r\n            footerTemplate: '</table>'\r\n        },\r\n        legend: {\r\n            enabled: true,\r\n            indicatorSize: 15\r\n        },\r\n        labels: {\r\n            enabled: false,\r\n            verticalAlignment: 'top',\r\n            verticalPosition: 'outside'\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.presets = {\r\n    histogram: {\r\n        xAxis: {\r\n            labelPosition: 'left'\r\n        },\r\n        barMode: 'overlaid',\r\n        categorySpacing: 0,\r\n        barPadding: 1\r\n    }\r\n};\r\n\r\nTayberry.defaultColours = [\r\n    '#6FE87B', //green\r\n    '#FFAB51', //orange\r\n    '#51A8FF', //blue\r\n    '#B651FF', //purple\r\n    '#FF6051', //red\r\n    '#636363', //dark grey\r\n    '#FFE314', //yellow\r\n    '#A88572', //brown\r\n    '#B7B7B7' //light grey\r\n];\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.getTextWidth = function (text, fontString) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.ctx.save();\r\n        this.ctx.font = fontString;\r\n    }\r\n    ret = this.ctx.measureText(text).width;\r\n    if (fontString) {\r\n        this.ctx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.render = function () {\r\n    this.calculatePlotArea();\r\n    this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    this.animatationStart = performance.now();\r\n    this.animationLength = 500;\r\n    this.xAxis.draw();\r\n    this.yAxis.draw();\r\n    this.createTooltip();\r\n};\r\n\r\nTayberry.prototype.clear = function () {\r\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n};\r\n\r\nTayberry.prototype.drawTitle = function () {\r\n    if (this.options.title.text) {\r\n        const x = (this.canvas.width) / 2, y = 0;\r\n        this.ctx.save();\r\n        this.ctx.textAlign = 'center';\r\n        this.ctx.textBaseline = 'top';\r\n        this.ctx.font = this.titleFont;\r\n        this.ctx.fillStyle = this.options.title.font.colour;\r\n        this.ctx.fillText(this.options.title.text, x, y);\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLabel = function (sign, text, rect) {\r\n    if (this.options.swapAxes)\r\n        rect = rect.clone().swapXY();\r\n    let x = (rect.left + rect.right) / 2;\r\n    let y;\r\n    if (this.options.labels.verticalAlignment === 'top')\r\n        y = rect.top;\r\n    else if (this.options.labels.verticalAlignment === 'bottom')\r\n        y = rect.bottom;\r\n    else\r\n        y = (rect.top + rect.bottom) / 2;\r\n    let baseline = 'middle';\r\n    let align = 'center';\r\n    if (this.options.swapAxes) {\r\n        [x, y] = [y, x];\r\n        if (this.options.labels.verticalPosition === 'outside')\r\n            align = 'left';\r\n        else if (this.options.labels.verticalPosition === 'inside')\r\n            align = 'right';\r\n    } else {\r\n        baseline = Tayberry.mapVerticalPosition(sign, this.options.labels.verticalPosition);\r\n    }\r\n    if (this.plotArea.containsPoint(x, y)) {\r\n        this.ctx.save();\r\n        this.ctx.textAlign = align;\r\n        this.ctx.textBaseline = baseline;\r\n        this.ctx.fillStyle = this.options.font.colour;\r\n        this.ctx.fillText(text, x, y);\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.draw = function () {\r\n\r\n    this.ctx.save();\r\n    this.enumerateBars(function (bar) {\r\n        this.ctx.fillStyle = bar.selected ? bar.renderedSeries.highlightColour : bar.renderedSeries.colour;\r\n        this.ctx.fillRect(bar.rect.left, bar.rect.top, bar.rect.width, bar.rect.height);\r\n    }.bind(this));\r\n    this.ctx.restore();\r\n\r\n    if (this.options.labels.enabled) {\r\n        this.ctx.save();\r\n        this.enumerateBars(function (bar) {\r\n            this.drawLabel(bar.value, this.options.yAxis.labelFormatter(bar.value), bar.rect);\r\n        }.bind(this));\r\n        this.ctx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLine = function (x1, y1, x2, y2, colour) {\r\n    this.ctx.save();\r\n    if (colour) {\r\n        this.ctx.strokeStyle = colour;\r\n    }\r\n    this.ctx.beginPath();\r\n    this.ctx.moveTo(x1 + 0.5, y1 + 0.5);\r\n    this.ctx.lineTo(x2 + 0.5, y2 + 0.5);\r\n    this.ctx.stroke();\r\n    this.ctx.restore();\r\n};\r\n\r\nTayberry.prototype.redraw = function () {\r\n    this.clear();\r\n    this.drawTitle();\r\n    this.xAxis.draw();\r\n    this.yAxis.draw();\r\n    this.drawLegend();\r\n    this.draw();\r\n};\r\n\r\n\r\nTayberry.prototype.drawLegend = function () {\r\n    if (this.options.legend.enabled) {\r\n        let totalWidth = 0;\r\n        const indicatorSize = this.mapLogicalXUnit(this.options.legend.indicatorSize);\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            if (series.name) {\r\n                totalWidth += this.getTextWidth(series.name) + indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding + this.options.elementLargePadding);\r\n            }\r\n        }\r\n        let x = this.plotArea.left + this.plotArea.width / 2 - totalWidth / 2,\r\n            y = this.canvas.height - indicatorSize;\r\n\r\n        for (let index = 0; index < this.renderedSeries.length; index++) {\r\n            const series = this.renderedSeries[index];\r\n            if (series.name) {\r\n                this.ctx.fillStyle = series.colour;\r\n                this.ctx.fillRect(x, y, indicatorSize, indicatorSize);\r\n                this.ctx.textBaseline = 'middle';\r\n                this.ctx.fillStyle = this.options.font.colour;\r\n                x += indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n                this.ctx.fillText(series.name, x, y + indicatorSize / 2);\r\n                x += this.getTextWidth(series.name) + this.mapLogicalXUnit(this.options.elementLargePadding);\r\n            }\r\n        }\r\n    }\r\n};\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Easing = require('./easing.js');\r\nvar Utils = require('./utils.js');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.onAnimate = function (timestamp) {\r\n    var elapsed, scaleFactor;\r\n    elapsed = timestamp - this.animatationStart;\r\n    scaleFactor = Math.min(Easing.inQuad(elapsed, this.animationLength), 1);\r\n    for (let categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n        for (let seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n            const value = this.series[seriesIndex].data[categoryIndex];\r\n            const yOrigin = this.yAxis.min <= 0 && 0 <= this.yAxis.max ? 0 : (this.yAxis.min > 0 ? this.yAxis.min : this.yAxis.max);\r\n            this.renderedSeries[seriesIndex].data[categoryIndex] = yOrigin + scaleFactor * ((value - yOrigin));\r\n        }\r\n    }\r\n    this.redraw();\r\n    if (scaleFactor < 1) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    }\r\n};\r\n\r\nTayberry.prototype.onMouseLeave = function (event) {\r\n    if ((event.currentTarget == this.canvas && event.relatedTarget !== this.tooltipElement) || (event.currentTarget == this.tooltipElement && event.relatedTarget !== this.canvas)) {\r\n        this.selectedItem = {};\r\n        this.tooltipElement.style.display = 'none';\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.handleMouseMove = function (clientX, clientY) {\r\n    let boundingRect = new Rect(this.canvas.getBoundingClientRect());\r\n    let ret = false;\r\n    if (boundingRect.containsPoint(clientX, clientY)) {\r\n        let x = clientX - boundingRect.left;\r\n        let y = clientY - boundingRect.top;\r\n\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            const aboveZero = hitTestResult.rect.top < hitTestResult.rect.bottom;\r\n            const category = this.xAxis.getCategoryLabel(hitTestResult.categoryIndex, this.series[0].data.length);\r\n            this.tooltipElement.style.display = 'block';\r\n            let tooltipHtml = Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n            if (this.options.tooltips.shared) {\r\n                for (let index = 0; index<this.series.length; index++) {\r\n                    const series = this.series[index];\r\n                    const value = series.data[hitTestResult.categoryIndex];\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {value: this.options.yAxis.labelFormatter(value), name: series.name, colour: series.colour}, true);\r\n                }\r\n            } else {\r\n                const series = this.series[hitTestResult.seriesIndex];\r\n                const value = series.data[hitTestResult.categoryIndex];\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {value: this.options.yAxis.labelFormatter(value), name: series.name, colour: series.colour}, true);\r\n            }\r\n            tooltipHtml += this.options.tooltips.footerTemplate;\r\n            this.tooltipElement.innerHTML = tooltipHtml;\r\n            let tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n            this.tooltipElement.style.borderColor = this.renderedSeries[hitTestResult.seriesIndex].colour;\r\n            this.tooltipElement.style.left = window.pageXOffset + boundingRect.left + this.mapScreenUnit(hitTestResult.rect.width) / 2 + hitTestResult.rect.left / this.scaleFactor - tooltipRect.width / 2 + 'px';\r\n            this.tooltipElement.style.top = window.pageYOffset + boundingRect.top + this.mapScreenUnit(hitTestResult.rect.top) - tooltipRect.height * (aboveZero ? 1 : 0) - this.options.elementSmallPadding * (aboveZero ? 1 : -1) + 'px';\r\n            this.selectedItem = hitTestResult;\r\n            ret = true;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.onTouchStart = function (event) {\r\n    for (let index = 0; index < event.targetTouches.length; index++) {\r\n        let touch = event.targetTouches[index];\r\n        if (this.handleMouseMove(touch.clientX, touch.clientY)) {\r\n            event.preventDefault();\r\n            this.redraw();\r\n            break;\r\n        }\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.onMouseMove = function (event) {\r\n    let oldSelectedItem = Utils.assign({}, this.selectedItem);\r\n    if (!this.handleMouseMove(event.clientX, event.clientY)) {\r\n        this.selectedItem = {};\r\n    }\r\n\r\n    if (oldSelectedItem.categoryIndex !== this.selectedItem.categoryIndex || oldSelectedItem.seriesIndex !== this.selectedItem.seriesIndex) {\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.onWindowResize = function () {\r\n    this.tooltipElement.style.display = 'none';\r\n    this.canvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.canvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.initialise();\r\n    this.updateFonts();\r\n    this.calculatePlotArea();\r\n    this.createTooltip();\r\n    this.redraw();\r\n};\r\n","(function () {\r\n    'use strict';\r\n    var Tayberry = require('./tayberry.base.js').Tayberry;\r\n    require('./tayberry.axes.js');\r\n    require('./tayberry.core.js');\r\n    require('./tayberry.drawing.js');\r\n    require('./tayberry.events.js');\r\n    require('./tayberry.defaults.js');\r\n    require('./tayberry.sizing.js');\r\n\r\n    module.exports = {\r\n        /**\r\n         * Creates a Tayberry chart\r\n         *\r\n         * @param element   ID of container div, or HTMLElement\r\n         * @param options   Options object\r\n         */\r\n        create: function (element, options) {\r\n            var chart = new Tayberry();\r\n            chart.create(element);\r\n            chart.setOptions(options);\r\n            chart.render();\r\n        }\r\n    };\r\n\r\n})();\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Utils = require('./utils');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.mapVerticalPosition = function (sign, position) {\r\n    switch (position) {\r\n        case \"outside\":\r\n            return sign > 0 ? \"bottom\" : \"top\";\r\n        case \"inside\":\r\n            return sign > 0 ? \"top\" : \"bottom\";\r\n        default:\r\n            return \"middle\";\r\n    }\r\n};\r\n\r\nTayberry.prototype.mapLogicalXUnit = function (x) {\r\n    return this.scaleFactorX * x;\r\n};\r\n\r\nTayberry.prototype.mapLogicalYUnit = function (x) {\r\n    return this.scaleFactorY * x;\r\n};\r\n\r\nTayberry.prototype.mapScreenUnit = function (x) {\r\n    return x / this.scaleFactor;\r\n};\r\n\r\nTayberry.prototype.calculatePlotArea = function () {\r\n    const MAX_AXIS_CALC_SIZE_ATTEMPTS = 5;\r\n\r\n    this.plotArea = new Rect(0, 0, this.canvas.width, this.canvas.height);\r\n    if (this.options.title.text) {\r\n        this.plotArea.top += this.mapLogicalYUnit(this.options.elementSmallPadding) + this.getFontHeight(this.options.title.font);\r\n    }\r\n    if (this.options.legend.enabled)\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.elementLargePadding + this.options.legend.indicatorSize);\r\n\r\n    this.yAxis.adjustSize(this.plotArea, true, true);\r\n    this.xAxis.adjustSize(this.plotArea, true, true);\r\n\r\n    for (let i = 0; i < MAX_AXIS_CALC_SIZE_ATTEMPTS; i++) {\r\n        this.yAxis.calculateExtent();\r\n        this.xAxis.calculateExtent();\r\n        this.yAxis.updateFormatter();\r\n        this.xAxis.updateFormatter();\r\n        if (!this.yAxis.adjustSize(this.plotArea) && !this.xAxis.adjustSize(this.plotArea))\r\n            break;\r\n    }\r\n    this.plotArea.left = Math.ceil(this.plotArea.left);\r\n    this.plotArea.top = Math.ceil(this.plotArea.top);\r\n    this.plotArea.right = Math.floor(this.plotArea.right);\r\n    this.plotArea.bottom = Math.floor(this.plotArea.bottom);\r\n};\r\n\r\nTayberry.prototype.hitTest = function (x, y) {\r\n    // TODO: Optimise\r\n    let ret = {\r\n        found: false,\r\n        categoryIndex: undefined,\r\n        seriesIndex: undefined,\r\n        rect: undefined\r\n    };\r\n\r\n    let matches = [];\r\n\r\n    const isOverlaid = this.options.barMode === 'overlaid';\r\n\r\n    this.enumerateBars(function (bar) {\r\n        if (bar.rect.containsPoint(x, y)) {\r\n            matches.push({\r\n                categoryIndex: bar.categoryIndex,\r\n                seriesIndex: bar.seriesIndex,\r\n                rect: bar.rect\r\n            });\r\n            if (!isOverlaid)\r\n                return true;\r\n        }\r\n    }.bind(this));\r\n\r\n    if (matches.length) {\r\n        ret.found = true;\r\n        let minMatchIndex = 0, minHeight = matches[0].rect.height;\r\n        for (let index = 1; index < matches.length; index++) {\r\n            const match = matches[index];\r\n            if (match.rect.height < minHeight) {\r\n                minMatchIndex = index;\r\n                minHeight = match.rect.height;\r\n            }\r\n        }\r\n        ret = Utils.assign(ret, matches[minMatchIndex]);\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.enumerateBars = function (callback) {\r\n    const categoryCount = this.renderedSeries[0].data.length;\r\n    if (categoryCount) {\r\n        const isStacked = this.options.barMode === 'stacked';\r\n        const isOverlaid = this.options.barMode === 'overlaid';\r\n        const isHorizontal = this.options.swapAxes;\r\n        let plotArea = this.plotArea.clone();\r\n        if (isHorizontal)\r\n            plotArea.swapXY();\r\n        const isNormal = !isStacked && !isOverlaid;\r\n        const barCount = (isStacked || isOverlaid) ? 1 : this.series.length;\r\n        const categoryWidth = (plotArea.width / categoryCount);\r\n        // const barWidth = (categoryWidth * (1 - this.options.categorySpacing) / barCount);\r\n        const yOrigin = this.yAxis.getOrigin();\r\n\r\n        for (let categoryIndex = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n            let categoryXStart = plotArea.left + Math.floor(categoryIndex * categoryWidth);\r\n            let categoryXEnd = plotArea.left + Math.floor((categoryIndex + 1) * categoryWidth);\r\n            let barXStart = categoryXStart + Math.ceil(categoryWidth * this.options.categorySpacing / 2);\r\n            let barXEnd = categoryXEnd - Math.floor(categoryWidth * this.options.categorySpacing / 2);\r\n\r\n            let yBottomPositive = yOrigin,\r\n                yBottomNegative = yOrigin,\r\n                yRunningTotalPositive = 0,\r\n                yRunningTotalNegative = 0;\r\n            let barIndex = 0;\r\n            for (let seriesIndex = 0; seriesIndex < this.renderedSeries.length; seriesIndex++) {\r\n                const value = this.renderedSeries[seriesIndex].data[categoryIndex];\r\n                const barWidth = Math.floor((barXEnd - barXStart) / barCount);\r\n                const xStart = Math.floor(barXStart + barIndex*barWidth);\r\n                const xEnd = Math.ceil(barXStart + (barIndex+1)*barWidth);\r\n                if (Utils.isMissingValue(value))\r\n                    continue;\r\n                const yTop = this.yAxis.getValueDisplacement(value + (value > 0 ? yRunningTotalPositive : yRunningTotalNegative));\r\n                let rect = new Rect(xStart, yTop, xEnd, value > 0 ? yBottomPositive : yBottomNegative);\r\n                rect.left += Math.ceil(this.options.barPadding * this.scaleFactor / 2);\r\n                rect.right -= Math.floor(this.options.barPadding * this.scaleFactor / 2);\r\n                if (rect.right < rect.left)\r\n                    rect.right = rect.left;\r\n                if (isHorizontal)\r\n                    rect.swapXY();\r\n                rect.clip(this.plotArea);\r\n\r\n                const stopEnumerating = callback({\r\n                    seriesIndex: seriesIndex,\r\n                    categoryIndex: categoryIndex,\r\n                    series: this.renderedSeries[seriesIndex],\r\n                    renderedSeries: this.renderedSeries[seriesIndex],\r\n                    value: this.series[seriesIndex].data[categoryIndex],\r\n                    renderedValue: this.renderedSeries[seriesIndex].data[categoryIndex],\r\n                    rect: rect,\r\n                    selected: this.selectedItem.categoryIndex === categoryIndex && this.selectedItem.seriesIndex === seriesIndex\r\n                });\r\n                if (stopEnumerating)\r\n                    break;\r\n                if (isStacked) {\r\n                    if (value > 0) {\r\n                        yRunningTotalPositive += value;\r\n                        yBottomPositive = yTop;\r\n                    }\r\n                    else {\r\n                        yRunningTotalNegative += value;\r\n                        yBottomNegative = yTop;\r\n                    }\r\n                } else if (isNormal) {\r\n                    // x += barWidth;\r\n                    barIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    exports.identity = function (obj) {\r\n        return obj;\r\n    };\r\n\r\n    exports.isMissingValue = function (n) {\r\n        return n === null || typeof n === 'undefined' || (isNaN(n) && typeof n === 'number');\r\n    };\r\n\r\n    exports.reduce = function (array, func, getter, ignoreMissing = false) {\r\n        var ret, i;\r\n        if (array.reduce && !getter && !ignoreMissing) {\r\n            ret = array.reduce(function (a, b) {\r\n                return func(a, b);\r\n            });\r\n        } else {\r\n            getter = getter || exports.identity;\r\n            if (array.length) {\r\n                ret = getter(array[0]);\r\n                for (i = 1; i < array.length; i++) {\r\n                    const value = getter(array[i]);\r\n                    if (!ignoreMissing || !exports.isMissingValue(value))\r\n                        ret = func(ret, value);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n\r\n    exports.sign = Math.sign || function (n) {\r\n            return n > 0 ? 1 : (n < 0 ? -1 : 0);\r\n        };\r\n\r\n    exports.now = (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') ? performance.now : function () {\r\n        return new Date().getTime();\r\n    };\r\n\r\n    var innerAssign = function (deepAssign, targetObject, sourceObjects) {\r\n        if (!Array.isArray(sourceObjects))\r\n            sourceObjects = [sourceObjects];\r\n        if (!deepAssign && Object.assign) {\r\n            return Object.assign.apply(Object, [targetObject].concat(sourceObjects));\r\n        } else {\r\n            if (targetObject === undefined || targetObject === null) {\r\n                throw new TypeError('Cannot convert first argument to object');\r\n            }\r\n\r\n            var to = Object(targetObject);\r\n            for (let i = 0; i < sourceObjects.length; i++) {\r\n                let currentSourceObject = sourceObjects[i];\r\n                if (currentSourceObject === undefined || currentSourceObject === null) {\r\n                    continue;\r\n                }\r\n                currentSourceObject = Object(currentSourceObject);\r\n\r\n                const keysArray = Object.keys(currentSourceObject);\r\n                for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                    const nextKey = keysArray[nextIndex];\r\n                    const nextValue = currentSourceObject[nextKey];\r\n                    const desc = Object.getOwnPropertyDescriptor(currentSourceObject, nextKey);\r\n                    if (desc !== undefined && desc.enumerable) {\r\n                        if (deepAssign && typeof to[nextKey] === \"object\" && !Array.isArray(nextValue) && typeof nextValue === 'object')\r\n                            innerAssign(true, to[nextKey], nextValue);\r\n                        else\r\n                            to[nextKey] = nextValue;\r\n                    }\r\n                }\r\n            }\r\n            return to;\r\n        }\r\n    };\r\n\r\n    exports.assign = function (targetObject, sourceObjects) {\r\n        return innerAssign(false, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.deepAssign = function (targetObject, sourceObjects) {\r\n        return innerAssign(true, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.formatString = function (formatString, formatValues, escapeAsHtml) {\r\n        return formatString.replace(/{(\\w+)}/g, function (match, placeholder) {\r\n            const value = formatValues[placeholder];\r\n            return typeof value !== 'undefined' ? (escapeAsHtml ? exports.stringToHtml(value) : value) : match;\r\n        });\r\n    };\r\n\r\n    exports.locateDecimalPoint = function (number) {\r\n        return Math.floor(Math.log(number) / Math.log(10));\r\n    };\r\n\r\n    exports.formatNumberThousands = function (number, decimalPlaces = 0) {\r\n        var parts = number.toFixed(decimalPlaces).split(\".\");\r\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        return parts.join(\".\");\r\n    };\r\n\r\n    exports.createAutoNumberFormatter = function (scale, prefix = '', suffix = '', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createFixedNumberFormatter = function (scale, prefix = '', suffix = '', decimalPlaces = 2) {\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createPercentageFormatter = function (scale, prefix = '', suffix = '%', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale * 100);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x * 100, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.stringToHtml = function (str) {\r\n        var div = document.createElement('div');\r\n        div.appendChild(document.createTextNode(str));\r\n        return div.innerHTML;\r\n    };\r\n\r\n    exports.throttle = function (fn, threshold) {\r\n        var last,\r\n            deferTimer;\r\n        return function () {\r\n            var context = this;\r\n\r\n            var now = Date.now(),\r\n                args = arguments;\r\n            if (last && now < last + threshold) {\r\n                clearTimeout(deferTimer);\r\n                deferTimer = setTimeout(function () {\r\n                    last = now;\r\n                    fn.apply(context, args);\r\n                }, threshold);\r\n            } else {\r\n                last = now;\r\n                fn.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}