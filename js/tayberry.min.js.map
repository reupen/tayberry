{"version":3,"sources":["/source/node_modules/browserify/node_modules/browser-pack/_prelude.js","tayberry.min.js","/source/src/colour.js","/source/src/easing.js","/source/src/rect.js","/source/src/tayberry.axes.js","/source/src/tayberry.base.js","/source/src/tayberry.core.js","/source/src/tayberry.defaults.js","/source/src/tayberry.drawing.js","/source/src/tayberry.events.js","/source/src/tayberry.js","/source/src/tayberry.sizing.js","/source/src/utils.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","Tayberry","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Utils","Colour","arguments","arg1","parseString","b","value","str","regExHex","regExInt","groupsHex","exec","groupsInt","parseHex","ret","parseInt","RangeError","parseFloat","component","Math","round","min","max","clipComponent","number","clip","formatString","get","./utils.js",2,"linear","time","duration","inQuad","factor","outQuad",3,"Rect","rect","left","top","right","bottom","x","y","containsX","containsY","clipRect","minX","maxX","minY","maxY","_ref","_ref2",4,"_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_get","_x2","_x3","_x4","_again","object","property","receiver","desc","parent","getter","Function","getOwnPropertyDescriptor","getPrototypeOf","Axis","tayberry","index","options","axisType","tickStep","tickStart","tickEnd","calculatedSize","topAdjustment","rightAdjustment","titleFont","labelFont","numLabelLines","setPlacement","xYSwapped","type","LinearAxis","CategorialAxis","createFontString","font","title","validAndSpecificPlacements","indexOf","placement","isYAxis","_this","tb","ticks","getTicks","reduce","getTextWidth","labelFormatter","mapLogicalXUnit","mapLogicalYUnit","plotArea","fixedOnly","reset","size","titleFontHeight","getFontHeight","fontHeight","mapLogicalXOrYUnit","elementSmallPadding","text","lastTick","lastTickYStart","adjustment","maxLabelSize","lastXEnd","tick","textWidth","xStart","xEnd","lastTickXEnd","isPlacedAtStart","drawTicksAndLabels","drawTitle","labelPaddingX","labelPaddingY","labelsCtx","save","fillStyle","colour","textAlign","textBaseline","lastXEnds","tickIndex","enumerateTicks","formattedValue","row","rowOffset","labelsCanvas","width","fillText","gridLines","drawLine","x1","y1","x2","y2","bind","restore","height","translate","rotate","PI","startProperty","visibleOnly","_Axis","apply","callback","categoryCount","categories","clone","swapXY","categoryWidth","series","data","labelPosition","floor","identity","_Axis2","labelFormat","createPercentageFormatter","labelPrefix","labelSuffix","createFixedNumberFormatter","currencySymbol","createAutoNumberFormatter","start","end","endProperty","yValue","getValueDisplacement","targetTicks","approxStep","scale","targetStart","targetEnd","overriddenStart","isMissingValue","overriddenEnd","_tayberry$getDataMinMax","getDataMinMax","_tayberry$getDataMinMax2","dataMin","dataMax","dataRange","tickStepValue","targetRange","plotLength","mapLogicalYOrXUnit","pow","log","scaledStep","snapScaledValue","ceil","plotDisplacement","getOrigin","totalCategories","axisRange","abs",5,"selectedItem","containerElement","renderedSeries","scaleFactor","legendFont",6,"currentAutoColourIndex","getAutoColour","defaultColours","createCanvas","document","createElement","style","clientWidth","clientHeight","position","appendChild","getElementById","getContext","plotCanvas","plotCtx","yAxis","xAxis","initialise","destroy","parentNode","removeChild","tooltipElement","removeEventListener","onMouseMoveReal","onMouseLeaveReal","onWindowResizeReal","devicePixelRatio","scaleFactorX","scaleFactorY","forDom","autoScale","toFixed","face","updateFonts","labels","legend","setOptions","optionOverrides","defaultOptions","presets","deepAssign","tooltips","allAxes","setSeries","swapAxes","addEventListener","onMouseMove","onMouseLeave","throttle","onWindowResize","calculateHighlightColour","newColour","increaseBy","sum","toString","slice","actualSeries","highlightColour","elem","assign","categoryIndex","seriesIndex","seriesPositiveTotals","seriesNegativeTotals","seriesMinima","seriesMaxima","barMode","createTooltip","className","zIndex","borderRadius","backgroundColor","border","padding","display","innerHTML","body","./colour","./tayberry.axes","./tayberry.base","./utils",7,"animations","enabled","barPadding","elementLargePadding","categorySpacing","shared","headerTemplate","valueTemplate","footerTemplate","indicatorSize","verticalAlignment","verticalPosition","histogram","./tayberry.base.js",8,"fontString","measureText","getMultilineTextHeight","maxWidth","splitMultilineText","lines","lineWidth","lineText","spaceWidth","wordStart","wordEnd","word","substring","wordWidth","drawTextMultiline","lineHeight","line","render","calculatePlotArea","draw","drawLegend","animator","requestAnimationFrame","onAnimate","animatationStart","performance","now","animationLength","clear","plot","clearRect","drawLabel","sign","baseline","align","mapVerticalPosition","containsPoint","enumerateBars","bar","selected","fillRect","strokeStyle","beginPath","moveTo","lineTo","stroke","redraw","plotOnly","totalWidth","name",9,"Easing","timestamp","elapsed","yOrigin","event","currentTarget","relatedTarget","handleMouseMove","clientX","clientY","boundingRect","getBoundingClientRect","hitTestResult","hitTest","found","aboveZero","category","getCategoryLabel","tooltipHtml","tooltipRect","borderColor","pageXOffset","mapScreenUnit","pageYOffset","oldSelectedItem","./easing.js","./rect",10,"element","chart","./tayberry.axes.js","./tayberry.core.js","./tayberry.defaults.js","./tayberry.drawing.js","./tayberry.events.js","./tayberry.sizing.js",11,"MAX_AXIS_CALC_SIZE_ATTEMPTS","adjustSize","calculateExtent","updateFormatter","matches","isOverlaid","minMatchIndex","minHeight","match","isStacked","isHorizontal","isNormal","barCount","categoryXStart","categoryXEnd","barXStart","barXEnd","yBottomPositive","yBottomNegative","yRunningTotalPositive","yRunningTotalNegative","barIndex","barWidth","yTop","stopEnumerating","renderedValue",12,"obj","isNaN","array","func","ignoreMissing","Date","getTime","innerAssign","targetObject","sourceObjects","concat","to","currentSourceObject","keysArray","keys","nextIndex","len","nextKey","nextValue","formatValues","escapeAsHtml","replace","placeholder","stringToHtml","locateDecimalPoint","formatNumberThousands","decimalPlaces","parts","split","join","prefix","suffix","precision","div","createTextNode","fn","threshold","last","deferTimer","context","args","clearTimeout","setTimeout"],"mappings":"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","file":"tayberry.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var e;e=\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this,e.Tayberry=t()}}(function(){return function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var l=\"function\"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error(\"Cannot find module '\"+r+\"'\");throw h.code=\"MODULE_NOT_FOUND\",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){var i=e[r][1][t];return n(i?i:t)},u,u.exports,t,e,i,s)}return i[r].exports}for(var o=\"function\"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=t(\"./utils.js\"),r=function(){function t(){if(s(this,t),1===arguments.length){var e=arguments[0];\"string\"==typeof e?this.parseString(e):(this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a)}}return n(t,[{key:\"parseString\",value:function(t){var e=/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,i=/^rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*)?\\)$/i,s=e.exec(t),n=i.exec(t);if(s){var o=function(t){var e=parseInt(t,16);return e=16*e+e};this.r=s[1]?parseInt(s[1],16):o(s[4]),this.g=s[2]?parseInt(s[2],16):o(s[5]),this.b=s[3]?parseInt(s[3],16):o(s[6]),this.a=null}else{if(!n)throw new RangeError(t+\" is not a valid HTML colour\");this.r=parseInt(n[1]),this.g=parseInt(n[2]),this.b=parseInt(n[3]),this.a=n[5]?parseFloat(n[5]):null}return this}},{key:\"clipComponent\",value:function(t){return this[t]=Math.round(this[t]),this[t]=Math.min(this[t],255),this[t]=Math.max(this[t],0),this}},{key:\"clip\",value:function(){return this.clipComponent(\"r\"),this.clipComponent(\"g\"),this.clipComponent(\"b\"),this}},{key:\"multiplyBy\",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this.clip(),this}},{key:\"increaseBy\",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this.clip(),this}},{key:\"toString\",value:function(){var t;return t=this.a?o.formatString(\"rgba({r},{g},{b},{a})\",this):o.formatString(\"rgb({r},{g},{b})\",this)}},{key:\"sum\",get:function(){return this.r+this.g+this.b}}],[{key:\"multiplyBy\",value:function(e,i){return new t(e).multiplyBy(i).toString()}}]),t}();i.Colour=r},{\"./utils.js\":12}],2:[function(t,e,i){\"use strict\";i.linear=function(t,e){return t/e},i.linear=function(t,e){return t/e},i.inQuad=function(t,e){var i=t/e;return i*i},i.outQuad=function(t,e){var i=t/e;return i*(2-i)}},{}],3:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(){s(this,t);var e;1===arguments.length?(e=arguments[0],this.left=e.left,this.top=e.top,this.right=e.right,this.bottom=e.bottom):4===arguments.length&&(this.left=arguments[0],this.top=arguments[1],this.right=arguments[2],this.bottom=arguments[3])}return n(t,[{key:\"containsPoint\",value:function(t,e){return this.containsX(t)&&this.containsY(e)}},{key:\"containsY\",value:function(t){return t>=this.top&&t<this.bottom||t>=this.bottom&&t<this.top}},{key:\"containsX\",value:function(t){return t>=this.left&&t<this.right||t>=this.right&&t<this.left}},{key:\"clip\",value:function(t){return this.left<t.minX?this.left=t.minX:this.left>t.maxX&&(this.left=t.maxX),this.right<t.minX?this.right=t.minX:this.right>t.maxX&&(this.right=t.maxX),this.top<t.minY?this.top=t.minY:this.top>t.maxY&&(this.top=t.maxY),this.bottom>t.maxY?this.bottom=t.maxY:this.bottom<t.minY&&(this.bottom=t.minY),this}},{key:\"clone\",value:function(){return new t(this)}},{key:\"swapXY\",value:function(){var t=[this.top,this.left];this.left=t[0],this.top=t[1];var e=[this.right,this.bottom];return this.bottom=e[0],this.right=e[1],this}},{key:\"width\",get:function(){return this.right-this.left}},{key:\"height\",get:function(){return this.bottom-this.top}},{key:\"maxY\",get:function(){return Math.max(this.bottom,this.top)}},{key:\"minY\",get:function(){return Math.min(this.bottom,this.top)}},{key:\"minX\",get:function(){return Math.min(this.left,this.right)}},{key:\"maxX\",get:function(){return Math.max(this.left,this.right)}}]),t}();i.Rect=o},{}],4:[function(t,e,i){\"use strict\";function s(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var r,a=t[Symbol.iterator]();!(s=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);s=!0);}catch(l){n=!0,o=l}finally{try{!s&&a[\"return\"]&&a[\"return\"]()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),r=function(t,e,i){for(var s=!0;s;){var n=t,o=e,r=i;a=h=l=void 0,s=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if(\"value\"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(r)}var h=Object.getPrototypeOf(n);if(null===h)return void 0;t=h,e=o,i=r,s=!0}},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=t(\"./utils.js\"),h=function(){function t(e,i,s,o){n(this,t),this.tayberry=e,this.options=s,this.axisType=o,this.index=i,this.tickStep=null,this.min=null,this.max=null,this.tickStart=null,this.tickEnd=null,this.calculatedSize=0,this.topAdjustment=0,this.rightAdjustment=0,this.titleFont=null,this.labelFont=null,this.numLabelLines=1,this.setPlacement()}return a(t,null,[{key:\"create\",value:function(t,e,i,s,n){return n&&(s=\"y\"===s?\"x\":\"y\"),\"linear\"===e.type?new c(t,i,e,s):new u(t,i,e,s)}}]),a(t,[{key:\"updateFonts\",value:function(){this.labelFont=this.tayberry.createFontString(this.options.font),this.titleFont=this.tayberry.createFontString(this.options.title.font)}},{key:\"setPlacement\",value:function(){var t=[\"left\",\"right\",\"top\",\"bottom\",\"start\",\"end\"];-1===t.indexOf(this.options.placement)&&(this.options.placement=this.isYAxis^this.index>0?\"start\":\"end\")}},{key:\"maxLabelSize\",value:function(){var t=this,e=this.tayberry,i=this.getTicks();return l.reduce(i,Math.max,function(i){return e.getTextWidth(t.options.labelFormatter(i.value),t.labelFont)})}},{key:\"mapLogicalXOrYUnit\",value:function(t){return this.isYAxis?this.tayberry.mapLogicalXUnit(t):this.tayberry.mapLogicalYUnit(t)}},{key:\"mapLogicalYOrXUnit\",value:function(t){return this.isYAxis?this.tayberry.mapLogicalYUnit(t):this.tayberry.mapLogicalXUnit(t)}},{key:\"adjustSize\",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],s=0,n=this.tayberry,o=void 0,r=n.getFontHeight(this.options.title.font),a=n.getFontHeight(this.options.font);if(i&&(this.calculatedSize=0,this.topAdjustment=0,this.rightAdjustment=0,this.numLabelLines=1),s+=this.mapLogicalXOrYUnit(n.options.elementSmallPadding),this.options.title.text&&(s+=this.mapLogicalXOrYUnit(n.options.elementSmallPadding)+r),!e){var l=this.getTicks(!1);if(this.isYAxis){if(l.length){var h=l[l.length-1],u=h.y-a/2;if(u<t.top-this.topAdjustment){var c=t.top-u-this.topAdjustment+1;t.top+=c,this.topAdjustment+=c}}s+=this.maxLabelSize()}else{for(var p=void 0,d=0;d<l.length;d++){var f=l[d],g=n.getTextWidth(this.options.labelFormatter(f.value),this.labelFont),m=f.x-g/2,y=f.x+g/2;if(\"undefined\"!=typeof p&&p+1>=m){this.numLabelLines=2;break}p=y}if(l.length){var h=l[l.length-1],g=n.getTextWidth(this.options.labelFormatter(h.value),this.labelFont),v=h.x+g/2;if(v>=t.right+this.rightAdjustment){var c=v-t.right-this.rightAdjustment+1;t.right-=c,this.rightAdjustment+=c}}s+=a*this.numLabelLines}}return this.isPlacedAtStart?this.isYAxis?t.left+=s-this.calculatedSize:t.top+=s-this.calculatedSize:(s*=-1,this.isYAxis?t.right+=s-this.calculatedSize:t.bottom+=s-this.calculatedSize),o=this.calculatedSize!==s,this.calculatedSize=s,o}},{key:\"calculateExtent\",value:function(){}},{key:\"getCategoryLabel\",value:function(){}},{key:\"draw\",value:function(){this.drawTicksAndLabels(),this.drawTitle()}},{key:\"drawTicksAndLabels\",value:function(){var t=this.tayberry,e=this.isYAxis?this.mapLogicalXOrYUnit(t.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1):0,i=this.isYAxis?0:this.mapLogicalXOrYUnit(t.options.elementSmallPadding)*(this.isPlacedAtStart?-1:1),s=t.getFontHeight(this.options.font);t.labelsCtx.save(),t.labelsCtx.font=this.labelFont,t.labelsCtx.fillStyle=this.options.font.colour,t.labelsCtx.textAlign=this.isYAxis?this.isPlacedAtStart?\"right\":\"left\":\"center\",t.labelsCtx.textBaseline=this.isYAxis?\"middle\":this.isPlacedAtStart?\"bottom\":\"top\";var n=[],o=0;this.enumerateTicks(function(r){var a=void 0,l=void 0,h=void 0,u=this.options.labelFormatter(r.value),c=o%this.numLabelLines,p=this.isYAxis?0:s*c;this.isYAxis||(a=t.getTextWidth(u,this.labelFont),l=r.x-a/2,h=r.x+a/2),(this.isYAxis||(\"undefined\"==typeof n[c]||l>n[c]+1)&&l>=0&&h<t.labelsCanvas.width)&&(t.labelsCtx.fillText(u,r.x+e,r.y+i+p),n[c]=h),this.options.gridLines.colour&&t.drawLine(r.x1,r.y1,r.x2,r.y2,this.options.gridLines.colour),o++}.bind(this)),t.labelsCtx.restore()}},{key:\"drawTitle\",value:function(){if(this.options.title.text){var t=this.tayberry;if(t.labelsCtx.save(),t.labelsCtx.font=this.titleFont,t.labelsCtx.fillStyle=this.options.title.font.colour,t.labelsCtx.textAlign=\"center\",t.labelsCtx.textBaseline=this.isPlacedAtStart?\"top\":\"bottom\",this.isYAxis){var e=0,i=t.plotArea.top+t.plotArea.height/2;t.labelsCtx.translate(e,i),t.labelsCtx.rotate(-Math.PI/2),t.labelsCtx.fillText(this.options.title.text,0,0)}else{var e=t.plotArea.left+t.plotArea.width/2,i=t.plotArea[this.startProperty]-this.calculatedSize;t.labelsCtx.fillText(this.options.title.text,e,i)}t.labelsCtx.restore()}}},{key:\"getTicks\",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],e=[];return this.enumerateTicks(function(t){e.push(t)},t),e}},{key:\"getOrigin\",value:function(){}},{key:\"updateFormatter\",value:function(){}},{key:\"isPlacedAtStart\",get:function(){return\"left\"===this.options.placement||\"bottom\"===this.options.placement||\"start\"===this.options.placement}},{key:\"isYAxis\",get:function(){return\"y\"===this.axisType}},{key:\"startProperty\",get:function(){return this.isYAxis?this.isPlacedAtStart?\"left\":\"right\":this.isPlacedAtStart?\"top\":\"bottom\"}},{key:\"endProperty\",get:function(){return this.isYAxis?this.isPlacedAtStart?\"right\":\"left\":this.isPlacedAtStart?\"bottom\":\"top\"}}]),t}(),u=function(t){function e(){n(this,e),r(Object.getPrototypeOf(e.prototype),\"constructor\",this).apply(this,arguments)}return s(e,t),a(e,[{key:\"enumerateTicks\",value:function(t){var e=this.tayberry,i=this.options.categories.length,s=e.plotArea.clone();this.isYAxis&&s.swapXY();var n=s.width/e.series[0].data.length,o=.5;if(!this.isYAxis)switch(this.options.labelPosition){case\"left\":o=0;break;case\"right\":o=1}for(var r=0;i>r;r++){var a=this.options.categories[r],l=this.isPlacedAtStart?s.top:s.bottom,h=this.isPlacedAtStart?s.bottom:s.top,u=s.left+Math.floor(r*n),c=u,p=s.left+Math.floor(r*n+n*o),d=l;if(this.isYAxis){var f=[l,u,h,c,d,p];u=f[0],l=f[1],c=f[2],h=f[3],p=f[4],d=f[5]}t({value:a,x1:u,y1:l,x2:c,y2:h,x:p,y:d})}}},{key:\"updateFormatter\",value:function(){this.options.labelFormatter||(this.options.labelFormatter=l.identity)}},{key:\"getCategoryLabel\",value:function(t){return this.options.labelFormatter(this.options.categories[t])}}]),e}(h),c=function(t){function e(){n(this,e),r(Object.getPrototypeOf(e.prototype),\"constructor\",this).apply(this,arguments)}return s(e,t),a(e,[{key:\"updateFormatter\",value:function(){this.options.labelFormatter||(\"percentage\"===this.options.labelFormat?this.options.labelFormatter=l.createPercentageFormatter(this.max-this.min,this.options.labelPrefix,this.options.labelSuffix):\"currency\"===this.options.labelFormat?this.options.labelFormatter=l.createFixedNumberFormatter(this.max-this.min,this.options.labelPrefix||this.options.currencySymbol,this.options.labelSuffix):this.options.labelFormatter=l.createAutoNumberFormatter(this.max-this.min,this.options.labelPrefix,this.options.labelSuffix))}},{key:\"enumerateTicks\",value:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=this.tayberry,s=this.startProperty,n=this.endProperty,o=this.tickStart;o<=this.tickEnd&&this.tickStep;){var r=this.getValueDisplacement(o);if(this.isYAxis){if((!e||i.plotArea.containsY(r))&&t({value:o,x1:i.plotArea[s],y1:r,x2:i.plotArea[n],y2:r,x:i.plotArea[s],y:r}))break}else if((!e||i.plotArea.containsX(r))&&t({value:o,y1:i.plotArea[s],x1:r,y2:i.plotArea[n],x2:r,y:i.plotArea[s],x:r}))break;o=this.tickStart+Math.round((o+this.tickStep-this.tickStart)/this.tickStep)*this.tickStep}}},{key:\"calculateExtent\",value:function(){var t=void 0,i=void 0,s=void 0,n=this.options.min,r=this.options.max,a=!l.isMissingValue(n),h=!l.isMissingValue(r);if(!a||!h){var u=this.tayberry.getDataMinMax(),c=o(u,2),p=c[0],d=c[1],f=d-p;a||(n=p-.1*f,p>=0&&0>n&&(n=0)),h||(r=d+.1*f,0>=d&&n>0&&(r=0))}if(this.options.tickStepValue)this.tickStep=this.options.tickStepValue,this.min=n,this.max=r;else{var g=r-n;t=this.plotLength/this.mapLogicalYOrXUnit(this.options.tickStep),i=g/t,s=Math.pow(10,Math.floor(Math.log(i)/Math.log(10)));var m=e.snapScaledValue(Math.ceil(i/s));this.tickStep=m*s,this.min=n,this.max=r}this.tickStart=this.options.tickStepValue&&a?this.min:Math.floor(this.min/this.tickStep)*this.tickStep,this.tickEnd=this.options.tickStepValue&&h?this.max:Math.ceil(this.max/this.tickStep)*this.tickStep,a||(this.min=this.tickStart),h||(this.max=this.tickEnd)}},{key:\"getOrigin\",value:function(){var t=this.tayberry.plotArea[this.isYAxis?\"bottom\":\"left\"]-(0-this.min)*this.plotDisplacement/(this.max-this.min);return this.isYAxis&&t--,t=this.isYAxis?Math.floor(t):Math.ceil(t)}},{key:\"getValueDisplacement\",value:function(t){var e=this.getOrigin()-t*this.plotDisplacement/(this.max-this.min);return e=this.isYAxis?Math.floor(e):Math.ceil(e)}},{key:\"getCategoryLabel\",value:function(t,e){var i=t/e,s=(t+1)/e,n=this.max-this.min;return l.formatString(\"{0}  x < {1}\",[this.options.labelFormatter(this.min+i*n),this.options.labelFormatter(this.min+s*n)])}},{key:\"plotDisplacement\",get:function(){return this.isYAxis?this.tayberry.plotArea.height-1:-(this.tayberry.plotArea.width-1)}},{key:\"plotLength\",get:function(){return Math.abs(this.plotDisplacement)}}],[{key:\"snapScaledValue\",value:function(t){return t=1>t?1:2>t?2:2.5>t?2.5:5>t?5:10}}]),e}(h);i.Axis=h},{\"./utils.js\":12}],5:[function(t,e,i){\"use strict\";function s(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,\"value\"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=function(){function t(){s(this,t),this.selectedItem={},this.containerElement=null,this.labelsCanvas=null,this.labelsCtx=null,this.renderedSeries=null,this.options=null,this.scaleFactor=null,this.titleFont=null,this.plotArea=null,this.series=[],this.categories=[],this.titleFont=null,this.labelFont=null,this.legendFont=null}return n(t,[{key:\"seriesCount\",get:function(){return this.series.length}},{key:\"categoryCount\",get:function(){return this.series.length?this.series[0].data.length:0}}]),t}();i.Tayberry=o},{}],6:[function(t,e,i){\"use strict\";var s=t(\"./colour\").Colour,n=t(\"./utils\"),o=t(\"./tayberry.base\").Tayberry,r=t(\"./tayberry.axes\").Axis,a=0;o.getAutoColour=function(){var t=o.defaultColours[a%o.defaultColours.length];return a++,t},o.prototype.createCanvas=function(){var t=document.createElement(\"canvas\");return t.style.width=Math.floor(this.containerElement.clientWidth)+\"px\",t.style.width=Math.floor(this.containerElement.clientWidth)+\"px\",t.style.height=Math.floor(this.containerElement.clientHeight)+\"px\",t.style.position=\"absolute\",this.containerElement.appendChild(t),t},o.prototype.create=function(t){\"string\"==typeof t?this.containerElement=document.getElementById(t):this.containerElement=t,this.labelsCanvas=this.createCanvas(),this.labelsCtx=this.labelsCanvas.getContext(\"2d\"),this.plotCanvas=this.createCanvas(),this.plotCtx=this.plotCanvas.getContext(\"2d\"),this.renderedSeries=null,this.options={},this.yAxis=null,this.xAxis=null,this.initialise()},o.prototype.destroy=function(){this.labelsCanvas.parentNode.removeChild(this.labelsCanvas),this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.options={},this.series={},this.plotCanvas.removeEventListener(\"mousemove\",this.onMouseMoveReal),this.plotCanvas.removeEventListener(\"mouseleave\",this.onMouseLeaveReal),window.removeEventListener(\"resize\",this.onWindowResizeReal)},o.prototype.initialise=function(){this.scaleFactor=window.devicePixelRatio||1,this.labelsCanvas.width=Math.round(this.labelsCanvas.clientWidth*this.scaleFactor),this.labelsCanvas.height=Math.round(this.labelsCanvas.clientHeight*this.scaleFactor),this.plotCanvas.width=this.labelsCanvas.width,this.plotCanvas.height=this.labelsCanvas.height,this.scaleFactorX=this.labelsCanvas.width/this.labelsCanvas.clientWidth,this.scaleFactorY=this.labelsCanvas.height/this.labelsCanvas.clientHeight,this.selectedItem={},this.plotArea=null},o.prototype.getFontHeight=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],i=t.size;return t.autoScale&&(i*=Math.pow(this.labelsCanvas.width/800,.25)),e||(i=this.mapLogicalYUnit(i)),i},o.prototype.createFontString=function(t){var e=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return(t.style?t.style+\" \":\"\")+this.getFontHeight(t,e).toFixed(1)+\"px \"+t.face},o.prototype.updateFonts=function(){this.titleFont=this.createFontString(this.options.title.font),this.labelFont=this.createFontString(this.options.labels.font),this.legendFont=this.createFontString(this.options.legend.font),this.yAxis.updateFonts(),this.xAxis.updateFonts()},o.prototype.setOptions=function(t){var e=[this.defaultOptions()];if(t.presets)for(var i=0;i<t.presets.length;i++)e.push(o.presets[t.presets[i]]);e.push(t),this.options=n.deepAssign({},e),this.options.title.font=n.deepAssign({},[this.options.font,this.options.title.font]),this.options.tooltips.font=n.deepAssign({},[this.options.font,this.options.tooltips.font]),this.options.labels.font=n.deepAssign({},[this.options.font,this.options.labels.font]),this.options.legend.font=n.deepAssign({},[this.options.font,this.options.legend.font]),this.options.yAxis.title.font=n.deepAssign({},[this.options.font,this.options.allAxes.title.font,this.options.yAxis.title.font]),this.options.xAxis.title.font=n.deepAssign({},[this.options.font,this.options.allAxes.title.font,this.options.xAxis.title.font]),this.options.xAxis.font=n.deepAssign({},[this.options.font,this.options.allAxes.font,this.options.xAxis.font]),this.options.yAxis.font=n.deepAssign({},[this.options.font,this.options.allAxes.font,this.options.yAxis.font]),this.setSeries(t.series),this.yAxis=r.create(this,this.options.yAxis,0,\"y\",this.options.swapAxes),this.xAxis=r.create(this,this.options.xAxis,0,\"x\",this.options.swapAxes),this.updateFonts(),this.plotCanvas.addEventListener(\"mousemove\",this.onMouseMoveReal=this.onMouseMove.bind(this)),this.plotCanvas.addEventListener(\"mouseleave\",this.onMouseLeaveReal=this.onMouseLeave.bind(this)),window.addEventListener(\"resize\",this.onWindowResizeReal=n.throttle(this.onWindowResize,50).bind(this))},o.calculateHighlightColour=function(t){var e=new s(t);return e.increaseBy(30*(e.sum>=540?-1:1)).toString()},o.prototype.setSeries=function(t){var e;for(Array.isArray(t)?this.series=t:this.series=[t],this.renderedSeries=t.slice(0),e=0;e<this.renderedSeries.length;e++){var i=this.series[e];i.colour=i.colour||o.getAutoColour(),i.highlightColour=i.highlightColour||o.calculateHighlightColour(i.colour);var s=n.assign({},i);s.data=this.renderedSeries[e].data.slice(0),this.renderedSeries[e]=s}},o.prototype.getDataMinMax=function(){var t,e,i,s,o=[],r=[],a=[],l=[];if(this.series[0].data.length){for(t=0;t<this.series[0].data.length;t++)for(o[t]=0,r[t]=0,e=0;e<this.series.length;e++){var h=this.series[e].data[t];n.isMissingValue(h)||(0>h?r[t]+=h:o[t]+=h)}for(var u=0;u<this.series.length;u++){var c=this.series[u];a.push(n.reduce(c.data,Math.min,void 0,!0)),l.push(n.reduce(c.data,Math.max,void 0,!0))}\"stacked\"===this.options.barMode?(i=Math.min(0,n.reduce(r,Math.min,void 0,!0)),s=Math.max(n.reduce(o,Math.max,void 0,!0),0)):(i=n.reduce(a,Math.min,void 0,!0),s=n.reduce(l,Math.max,void 0,!0))}return[i,s]},o.prototype.createTooltip=function(){this.tooltipElement&&(this.tooltipElement.parentNode.removeChild(this.tooltipElement),this.tooltipElement=null),this.tooltipElement=document.createElement(\"div\"),this.tooltipElement.className=\"tayberry-tooltip\",this.tooltipElement.style.position=\"absolute\",this.tooltipElement.style.left=\"0px\",this.tooltipElement.style.top=\"0px\",this.tooltipElement.style.zIndex=\"99999\",this.tooltipElement.style.font=this.createFontString(this.options.tooltips.font,!0),this.tooltipElement.style.borderRadius=\"3px\",this.tooltipElement.style.backgroundColor=\"white\",this.tooltipElement.style.border=\"2px solid #bbb\",this.tooltipElement.style.padding=\"0.15em 0.4em\",this.tooltipElement.style.display=\"none\",this.tooltipElement.innerHTML=\"\",document.body.appendChild(this.tooltipElement),this.tooltipElement.addEventListener(\"mousemove\",this.onMouseMove.bind(this)),this.tooltipElement.addEventListener(\"mouseleave\",this.onMouseLeave.bind(this))}},{\"./colour\":1,\"./tayberry.axes\":4,\"./tayberry.base\":5,\"./utils\":12}],7:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.defaultOptions=function(){return{title:{text:\"\",font:{size:20}},font:{colour:\"#444\",size:12,face:\"sans-serif\",autoScale:!0},allAxes:{font:{},title:{font:{}}},xAxis:{title:{text:\"\",font:{}},type:\"categorial\",min:null,max:null,tickStep:40,tickStepValue:null,font:{},categories:[],labelPosition:\"middle\",placement:\"auto\",gridLines:{}},yAxis:{title:{text:\"\",font:{}},gridLines:{colour:\"#ccc\"},min:void 0,max:void 0,tickStep:40,tickStepValue:null,font:{},labelFormat:\"number\",labelFormatter:void 0,labelPrefix:void 0,labelSuffix:void 0,currencySymbol:\"\",placement:\"auto\",type:\"linear\"},animations:{enabled:!0},series:[],swapAxes:!1,barMode:\"normal\",barPadding:2,elementSmallPadding:5,elementLargePadding:10,categorySpacing:.3,presets:[],tooltips:{shared:!1,headerTemplate:\"<strong>{category}</strong><table>\",valueTemplate:'<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\"></span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',footerTemplate:\"</table>\",font:{}},legend:{enabled:!0,indicatorSize:15,font:{}},labels:{enabled:!1,verticalAlignment:\"top\",verticalPosition:\"outside\",font:{}}}},s.presets={histogram:{xAxis:{labelPosition:\"left\"},barMode:\"overlaid\",categorySpacing:0,barPadding:1}},s.defaultColours=[\"#6FE87B\",\"#FFAB51\",\"#51A8FF\",\"#B651FF\",\"#FF6051\",\"#636363\",\"#FFE314\",\"#A88572\",\"#B7B7B7\"]},{\"./tayberry.base.js\":5}],8:[function(t,e,i){\"use strict\";var s=t(\"./tayberry.base.js\").Tayberry;s.prototype.getTextWidth=function(t,e){var i=void 0;return e&&(this.labelsCtx.save(),this.labelsCtx.font=e),i=this.labelsCtx.measureText(t).width,e&&this.labelsCtx.restore(),i},s.prototype.getMultilineTextHeight=function(t,e,i){var s=void 0;return t&&(this.labelsCtx.save(),this.labelsCtx.font=t),s=this.splitMultilineText(e,i).length,t&&this.labelsCtx.restore(),s},s.prototype.splitMultilineText=function(t,e){for(var i=[],s=0,n=\"\",o=this.labelsCtx.measureText(\" \").width,r=0;r<e.length;){for(var a=r;r<e.length&&\" \"!==e[r]&&\"\\r\"!==e[r]&&\"\\n\"!==e[r];)r++;for(var l=r;r<e.length&&(\" \"===e[r]||\"\\r\"===e[r]||\"\\n\"===e[r]);)r++;if(l>a){var h=e.substring(a,l),u=this.labelsCtx.measureText(h).width;s+u>t?(s||(n=h),i.push(n),s&&(s=0,n=h)):(n+=(n?\" \":\"\")+h,s+=u+o)}}return n&&i.push(n),i},s.prototype.drawTextMultiline=function(t,e,i,s,n){for(var o=this.splitMultilineText(s,n),r=0;r<o.length;r++){var a=o[r];this.labelsCtx.fillText(a,e,i+t*r)}},s.prototype.render=function(){this.calculatePlotArea(),this.drawTitle(),this.xAxis.draw(),this.yAxis.draw(),this.drawLegend(),this.createTooltip(),this.options.animations.enabled?(this.animator=requestAnimationFrame(this.onAnimate.bind(this)),this.animatationStart=performance.now(),this.animationLength=500):this.draw()},s.prototype.clear=function(){var t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1];t&&this.plotCtx.clearRect(0,0,this.plotCanvas.width,this.plotCanvas.height),e&&this.labelsCtx.clearRect(0,0,this.labelsCanvas.width,this.labelsCanvas.height)},s.prototype.drawTitle=function(){if(this.options.title.text){var t=this.labelsCanvas.width/2,e=0;this.labelsCtx.save(),this.labelsCtx.textAlign=\"center\",this.labelsCtx.textBaseline=\"top\",this.labelsCtx.font=this.titleFont,this.labelsCtx.fillStyle=this.options.title.font.colour,this.drawTextMultiline(this.getFontHeight(this.options.title.font),t,e,this.labelsCanvas.width,this.options.title.text),this.labelsCtx.restore()}},s.prototype.drawLabel=function(t,e,i){this.options.swapAxes&&(i=i.clone().swapXY());var n=(i.left+i.right)/2,o=void 0;o=\"top\"===this.options.labels.verticalAlignment?i.top:\"bottom\"===this.options.labels.verticalAlignment?i.bottom:(i.top+i.bottom)/2;var r=\"middle\",a=\"center\";if(this.options.swapAxes){var l=[o,n];n=l[0],o=l[1],\"outside\"===this.options.labels.verticalPosition?a=\"left\":\"inside\"===this.options.labels.verticalPosition&&(a=\"right\")}else r=s.mapVerticalPosition(t,this.options.labels.verticalPosition);this.plotArea.containsPoint(n,o)&&(this.plotCtx.save(),this.plotCtx.textAlign=a,this.plotCtx.textBaseline=r,this.plotCtx.fillText(e,n,o),this.plotCtx.restore())},s.prototype.draw=function(){this.plotCtx.save(),this.enumerateBars(function(t){this.plotCtx.fillStyle=t.selected?t.renderedSeries.highlightColour:t.renderedSeries.colour,this.plotCtx.fillRect(t.rect.left,t.rect.top,t.rect.width,t.rect.height)}.bind(this)),this.plotCtx.restore(),this.options.labels.enabled&&(this.plotCtx.save(),this.enumerateBars(function(t){this.plotCtx.font=this.labelFont,this.plotCtx.fillStyle=this.options.labels.font.colour,this.drawLabel(t.value,this.options.yAxis.labelFormatter(t.value),t.rect)}.bind(this)),this.plotCtx.restore())},s.prototype.drawLine=function(t,e,i,s,n){this.labelsCtx.save(),n&&(this.labelsCtx.strokeStyle=n),this.labelsCtx.beginPath(),this.labelsCtx.moveTo(t+.5,e+.5),this.labelsCtx.lineTo(i+.5,s+.5),this.labelsCtx.stroke(),this.labelsCtx.restore()},s.prototype.redraw=function(t){this.clear(!0,!t),t||(this.drawTitle(),this.xAxis.draw(),this.yAxis.draw(),this.drawLegend()),this.draw()},s.prototype.drawLegend=function(){if(this.options.legend.enabled){this.labelsCtx.save(),this.labelsCtx.font=this.legendFont;for(var t=0,e=this.mapLogicalXUnit(this.options.legend.indicatorSize),i=0;i<this.series.length;i++){var s=this.series[i];s.name&&(t+=this.getTextWidth(s.name,this.legendFont)+e+this.mapLogicalXUnit(this.options.elementSmallPadding+this.options.elementLargePadding))}for(var n=this.plotArea.left+this.plotArea.width/2-t/2,o=this.labelsCanvas.height-e,i=0;i<this.renderedSeries.length;i++){var s=this.renderedSeries[i];s.name&&(this.labelsCtx.fillStyle=s.colour,this.labelsCtx.fillRect(n,o,e,e),this.labelsCtx.textBaseline=\"middle\",this.labelsCtx.fillStyle=this.options.legend.font.colour,n+=e+this.mapLogicalXUnit(this.options.elementSmallPadding),this.labelsCtx.fillText(s.name,n,o+e/2),n+=this.getTextWidth(s.name,this.legendFont)+this.mapLogicalXUnit(this.options.elementLargePadding))}this.labelsCtx.restore()}}},{\"./tayberry.base.js\":5}],9:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./easing.js\"),o=t(\"./utils.js\"),r=t(\"./tayberry.base.js\").Tayberry;r.prototype.onAnimate=function(t){var e,i;e=t-this.animatationStart,i=Math.min(n.inQuad(e,this.animationLength),1);for(var s=0;s<this.series[0].data.length;s++)for(var o=0;o<this.series.length;o++){var r=this.series[o].data[s],a=this.yAxis.min<=0&&0<=this.yAxis.max?0:this.yAxis.min>0?this.yAxis.min:this.yAxis.max;this.renderedSeries[o].data[s]=a+i*(r-a)}this.redraw(!0),1>i&&(this.animator=requestAnimationFrame(this.onAnimate.bind(this)))},r.prototype.onMouseLeave=function(t){(t.currentTarget==this.plotCanvas&&t.relatedTarget!==this.tooltipElement||t.currentTarget==this.tooltipElement&&t.relatedTarget!==this.plotCanvas)&&(this.selectedItem={},this.tooltipElement.style.display=\"none\",this.redraw())},r.prototype.handleMouseMove=function(t,e){var i=new s(this.plotCanvas.getBoundingClientRect()),n=!1;if(i.containsPoint(t,e)){var r=t-i.left,a=e-i.top,l=this.hitTest(this.mapLogicalXUnit(r),this.mapLogicalYUnit(a));if(l.found){var h=l.rect.top<l.rect.bottom,u=this.xAxis.getCategoryLabel(l.categoryIndex,this.series[0].data.length);this.tooltipElement.style.display=\"block\";var c=o.formatString(this.options.tooltips.headerTemplate,{category:u},!0);if(this.options.tooltips.shared)for(var p=0;p<this.series.length;p++){var d=this.series[p],f=d.data[l.categoryIndex];c+=o.formatString(this.options.tooltips.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}else{var d=this.series[l.seriesIndex],f=d.data[l.categoryIndex];c+=o.formatString(this.options.tooltips.valueTemplate,{value:this.options.yAxis.labelFormatter(f),name:d.name,colour:d.colour},!0)}c+=this.options.tooltips.footerTemplate,this.tooltipElement.innerHTML=c;var g=this.tooltipElement.getBoundingClientRect();this.options.tooltips.shared||(this.tooltipElement.style.borderColor=this.renderedSeries[l.seriesIndex].colour),this.tooltipElement.style.left=window.pageXOffset+i.left+this.mapScreenUnit(l.rect.width)/2+l.rect.left/this.scaleFactor-g.width/2+\"px\",this.tooltipElement.style.top=window.pageYOffset+i.top+this.mapScreenUnit(l.rect.top)-g.height*(h?1:0)-this.options.elementSmallPadding*(h?1:-1)+\"px\",this.selectedItem=l,n=!0}}return n},r.prototype.onTouchStart=function(t){for(var e=0;e<t.targetTouches.length;e++){var i=t.targetTouches[e];if(this.handleMouseMove(i.clientX,i.clientY)){this.redraw();break}}},r.prototype.onMouseMove=function(t){var e=o.assign({},this.selectedItem);this.handleMouseMove(t.clientX,t.clientY)||(this.selectedItem={}),(e.categoryIndex!==this.selectedItem.categoryIndex||e.seriesIndex!==this.selectedItem.seriesIndex)&&this.redraw()},r.prototype.onWindowResize=function(){this.tooltipElement.style.display=\"none\",this.labelsCanvas.style.width=Math.floor(this.containerElement.clientWidth)+\"px\",this.labelsCanvas.style.height=Math.floor(this.containerElement.clientHeight)+\"px\",this.plotCanvas.style.width=Math.floor(this.containerElement.clientWidth)+\"px\",this.plotCanvas.style.height=Math.floor(this.containerElement.clientHeight)+\"px\",this.initialise(),this.updateFonts(),this.calculatePlotArea(),this.createTooltip(),this.redraw()}},{\"./easing.js\":2,\"./rect\":3,\"./tayberry.base.js\":5,\"./utils.js\":12}],10:[function(t,e,i){\"use strict\";\n!function(){var i=t(\"./tayberry.base.js\").Tayberry;t(\"./tayberry.axes.js\"),t(\"./tayberry.core.js\"),t(\"./tayberry.drawing.js\"),t(\"./tayberry.events.js\"),t(\"./tayberry.defaults.js\"),t(\"./tayberry.sizing.js\"),e.exports={create:function(t,e){var s=new i;s.create(t),s.setOptions(e),s.render()}}}()},{\"./tayberry.axes.js\":4,\"./tayberry.base.js\":5,\"./tayberry.core.js\":6,\"./tayberry.defaults.js\":7,\"./tayberry.drawing.js\":8,\"./tayberry.events.js\":9,\"./tayberry.sizing.js\":11}],11:[function(t,e,i){\"use strict\";var s=t(\"./rect\").Rect,n=t(\"./utils\"),o=t(\"./tayberry.base.js\").Tayberry;o.mapVerticalPosition=function(t,e){switch(e){case\"outside\":return t>0?\"bottom\":\"top\";case\"inside\":return t>0?\"top\":\"bottom\";default:return\"middle\"}},o.prototype.mapLogicalXUnit=function(t){return this.scaleFactorX*t},o.prototype.mapLogicalYUnit=function(t){return this.scaleFactorY*t},o.prototype.mapScreenUnit=function(t){return t/this.scaleFactor},o.prototype.calculatePlotArea=function(){var t=5;this.plotArea=new s(0,0,this.labelsCanvas.width,this.labelsCanvas.height),this.options.title.text&&(this.plotArea.top+=this.mapLogicalYUnit(this.options.elementSmallPadding),this.plotArea.top+=this.getFontHeight(this.options.title.font)*this.getMultilineTextHeight(this.titleFont,this.labelsCanvas.width,this.options.title.text)),this.options.legend.enabled&&(this.plotArea.bottom-=this.mapLogicalYUnit(this.options.elementSmallPadding+this.options.elementLargePadding+this.options.legend.indicatorSize)),this.yAxis.adjustSize(this.plotArea,!0,!0),this.xAxis.adjustSize(this.plotArea,!0,!0);for(var e=0;t>e&&(this.yAxis.calculateExtent(),this.xAxis.calculateExtent(),this.yAxis.updateFormatter(),this.xAxis.updateFormatter(),this.yAxis.adjustSize(this.plotArea)||this.xAxis.adjustSize(this.plotArea));e++);this.plotArea.left=Math.ceil(this.plotArea.left),this.plotArea.top=Math.ceil(this.plotArea.top),this.plotArea.right=Math.floor(this.plotArea.right),this.plotArea.bottom=Math.floor(this.plotArea.bottom)},o.prototype.hitTest=function(t,e){var i={found:!1,categoryIndex:void 0,seriesIndex:void 0,rect:void 0},s=[],o=\"overlaid\"===this.options.barMode;if(this.enumerateBars(function(i){return i.rect.containsPoint(t,e)&&(s.push({categoryIndex:i.categoryIndex,seriesIndex:i.seriesIndex,rect:i.rect}),!o)?!0:void 0}.bind(this)),s.length){i.found=!0;for(var r=0,a=s[0].rect.height,l=1;l<s.length;l++){var h=s[l];h.rect.height<a&&(r=l,a=h.rect.height)}i=n.assign(i,s[r])}return i},o.prototype.enumerateBars=function(t){var e=this.renderedSeries[0].data.length;if(e){var i=\"stacked\"===this.options.barMode,o=\"overlaid\"===this.options.barMode,r=this.options.swapAxes,a=this.plotArea.clone();r&&a.swapXY();for(var l=!i&&!o,h=i||o?1:this.series.length,u=a.width/e,c=this.yAxis.getOrigin(),p=0;e>p;p++)for(var d=a.left+Math.floor(p*u),f=a.left+Math.floor((p+1)*u),g=d+Math.ceil(u*this.options.categorySpacing/2),m=f-Math.floor(u*this.options.categorySpacing/2),y=c,v=c,b=0,x=0,A=0,C=0;C<this.renderedSeries.length;C++){var S=this.renderedSeries[C].data[p],w=Math.floor((m-g)/h),F=Math.floor(g+A*w),k=Math.ceil(g+(A+1)*w);if(!n.isMissingValue(S)){var M=this.yAxis.getValueDisplacement(S+(S>0?b:x)),T=new s(F,M,k,S>0?y:v);T.left+=Math.ceil(this.options.barPadding*this.scaleFactor/2),T.right-=Math.floor(this.options.barPadding*this.scaleFactor/2),T.right<T.left&&(T.right=T.left),r&&T.swapXY(),T.clip(this.plotArea);var L=t({seriesIndex:C,categoryIndex:p,series:this.renderedSeries[C],renderedSeries:this.renderedSeries[C],value:this.series[C].data[p],renderedValue:this.renderedSeries[C].data[p],rect:T,selected:this.selectedItem.categoryIndex===p&&(this.options.tooltips.shared||this.selectedItem.seriesIndex===C)});if(L)break;i?S>0?(b+=S,y=M):(x+=S,v=M):l&&A++}}}}},{\"./rect\":3,\"./tayberry.base.js\":5,\"./utils\":12}],12:[function(t,e,i){\"use strict\";!function(){i.identity=function(t){return t},i.isMissingValue=function(t){return null===t||\"undefined\"==typeof t||isNaN(t)&&\"number\"==typeof t},i.reduce=function(t,e,s){var n,o,r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];if(!t.reduce||s||r){if(s=s||i.identity,t.length)for(n=s(t[0]),o=1;o<t.length;o++){var a=s(t[o]);r&&i.isMissingValue(a)||(n=e(n,a))}}else n=t.reduce(function(t,i){return e(t,i)});return n},i.sign=Math.sign||function(t){return t>0?1:0>t?-1:0},i.now=\"undefined\"!=typeof performance&&\"undefined\"!=typeof performance.now?performance.now:function(){return(new Date).getTime()};var t=function e(t,i,s){if(Array.isArray(s)||(s=[s]),!t&&Object.assign)return Object.assign.apply(Object,[i].concat(s));if(void 0===i||null===i)throw new TypeError(\"Cannot convert first argument to object\");for(var n=Object(i),o=0;o<s.length;o++){var r=s[o];if(void 0!==r&&null!==r){r=Object(r);for(var a=Object.keys(r),l=0,h=a.length;h>l;l++){var u=a[l],c=r[u],p=Object.getOwnPropertyDescriptor(r,u);void 0!==p&&p.enumerable&&(t&&\"object\"==typeof n[u]&&!Array.isArray(c)&&\"object\"==typeof c?e(!0,n[u],c):n[u]=c)}}}return n};i.assign=function(e,i){return t(!1,e,i)},i.deepAssign=function(e,i){return t(!0,e,i)},i.formatString=function(t,e,s){return t.replace(/{(\\w+)}/g,function(t,n){var o=e[n];return\"undefined\"!=typeof o?s?i.stringToHtml(o):o:t})},i.locateDecimalPoint=function(t){return Math.floor(Math.log(t)/Math.log(10))},i.formatNumberThousands=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],i=t.toFixed(e).split(\".\");return i[0]=i[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\"),i.join(\".\")},i.createAutoNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],o=i.locateDecimalPoint(t);return o=0>o?-o+n-1:0,function(t){return e+i.formatNumberThousands(t,o)+s}},i.createFixedNumberFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3];return function(t){return e+i.formatNumberThousands(t,n)+s}},i.createPercentageFormatter=function(t){var e=arguments.length<=1||void 0===arguments[1]?\"\":arguments[1],s=arguments.length<=2||void 0===arguments[2]?\"%\":arguments[2],n=arguments.length<=3||void 0===arguments[3]?2:arguments[3],o=i.locateDecimalPoint(100*t);return o=0>o?-o+n-1:0,function(t){return e+i.formatNumberThousands(100*t,o)+s}},i.stringToHtml=function(t){var e=document.createElement(\"div\");return e.appendChild(document.createTextNode(t)),e.innerHTML},i.throttle=function(t,e){var i,s;return function(){var n=this,o=Date.now(),r=arguments;i&&i+e>o?(clearTimeout(s),s=setTimeout(function(){i=o,t.apply(n,r)},e)):(i=o,t.apply(n,r))}}}()},{}]},{},[10])(10)});\n//# sourceMappingURL=tayberry.min.js.map\n","var Utils = require('./utils.js');\r\nclass Colour {\r\n    /**\r\n     * Constructs a Colour object.\r\n     *\r\n     * @param colourCode    an HTML colour code in hex or integer (rgb) form\r\n     */\r\n    constructor() {\r\n        if (arguments.length === 1) {\r\n            let arg1 = arguments[0];\r\n            if (typeof arg1 === 'string')\r\n                this.parseString(arg1);\r\n            else {\r\n                this.r = arg1.r;\r\n                this.g = arg1.g;\r\n                this.b = arg1.b;\r\n                this.a = arg1.a;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Parses an HTML colour code\r\n     * @param str\r\n     * @returns {Colour}\r\n     */\r\n    parseString(str) {\r\n        let regExHex = /^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})|^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i;\r\n        let regExInt = /^rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})(\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*)?\\)$/i;\r\n        const groupsHex = regExHex.exec(str);\r\n        const groupsInt = regExInt.exec(str);\r\n        if (groupsHex) {\r\n            let parseHex = function (value) {\r\n                let ret = parseInt(value, 16);\r\n                ret = ret * 0x10 + ret;\r\n                return ret;\r\n            };\r\n            this.r = groupsHex[1] ? parseInt(groupsHex[1], 16) : parseHex(groupsHex[4]);\r\n            this.g = groupsHex[2] ? parseInt(groupsHex[2], 16) : parseHex(groupsHex[5]);\r\n            this.b = groupsHex[3] ? parseInt(groupsHex[3], 16) : parseHex(groupsHex[6]);\r\n            this.a = null;\r\n        }\r\n        else if (groupsInt) {\r\n            this.r = parseInt(groupsInt[1]);\r\n            this.g = parseInt(groupsInt[2]);\r\n            this.b = parseInt(groupsInt[3]);\r\n            this.a = groupsInt[5] ? parseFloat(groupsInt[5]) : null;\r\n        } else {\r\n            throw new RangeError(str + \" is not a valid HTML colour\");\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips a colour component to be in the range [0, 255], and round it them to\r\n     * the nearest integer\r\n     * @param component\r\n     * @returns {Colour}\r\n     */\r\n    clipComponent(component) {\r\n        this[component] = Math.round(this[component]);\r\n        this[component] = Math.min(this[component], 255);\r\n        this[component] = Math.max(this[component], 0);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Clips r,g,b colour components to be in the range [0, 255], and rounds them to\r\n     * the nearest integer\r\n     * @returns {Colour}\r\n     */\r\n    clip() {\r\n        this.clipComponent('r');\r\n        this.clipComponent('g');\r\n        this.clipComponent('b');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Adds a number to each colour component\r\n     * @param number\r\n     * @returns {Colour}\r\n     */\r\n    increaseBy(number) {\r\n        this.r += number;\r\n        this.g += number;\r\n        this.b += number;\r\n        this.clip();\r\n        return this;\r\n    }\r\n\r\n    get sum() {\r\n        return this.r + this.g + this.b;\r\n    }\r\n\r\n    /**\r\n     * Formats this colour as a string\r\n     * @returns {String}\r\n     */\r\n    toString() {\r\n        var ret;\r\n        if (this.a) {\r\n            ret = Utils.formatString('rgba({r},{g},{b},{a})', this);\r\n        } else {\r\n            ret = Utils.formatString('rgb({r},{g},{b})', this);\r\n        }\r\n        return ret;\r\n    }\r\n\r\n}\r\n\r\nexports.Colour = Colour;","exports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.linear = function (time, duration) {\r\n    return (time / duration);\r\n};\r\n\r\nexports.inQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * factor;\r\n};\r\n\r\nexports.outQuad = function (time, duration) {\r\n    var factor = time / duration;\r\n    return factor * (2 - factor);\r\n};\r\n","class Rect {\r\n    constructor() {\r\n        var rect;\r\n        if (arguments.length === 1) {\r\n            rect = arguments[0];\r\n            this.left = rect.left;\r\n            this.top = rect.top;\r\n            this.right = rect.right;\r\n            this.bottom = rect.bottom;\r\n        } else if (arguments.length === 4) {\r\n            this.left = arguments[0];\r\n            this.top = arguments[1];\r\n            this.right = arguments[2];\r\n            this.bottom = arguments[3];\r\n        }\r\n    }\r\n\r\n    get width() {\r\n        return this.right - this.left;\r\n    }\r\n\r\n    get height() {\r\n        return this.bottom - this.top;\r\n    }\r\n\r\n    get maxY() {\r\n        return Math.max(this.bottom, this.top);\r\n    }\r\n\r\n    get minY() {\r\n        return Math.min(this.bottom, this.top);\r\n    }\r\n\r\n    get minX() {\r\n        return Math.min(this.left, this.right);\r\n    }\r\n\r\n    get maxX() {\r\n        return Math.max(this.left, this.right);\r\n    }\r\n\r\n    containsPoint(x, y) {\r\n        return this.containsX(x) && this.containsY(y);\r\n    }\r\n\r\n    containsY(y) {\r\n        return (y >= this.top && y < this.bottom) || (y >= this.bottom && y < this.top);\r\n    }\r\n\r\n    containsX(x) {\r\n        return (x >= this.left && x < this.right) || (x >= this.right && x < this.left);\r\n    }\r\n\r\n    clip(clipRect) {\r\n        //FIXME: In theory, we should be more careful about how we handle rects where right < left or bottom < top\r\n        if (this.left < clipRect.minX) this.left = clipRect.minX;\r\n        else if (this.left > clipRect.maxX) this.left = clipRect.maxX;\r\n\r\n        if (this.right < clipRect.minX) this.right = clipRect.minX;\r\n        else if (this.right > clipRect.maxX) this.right = clipRect.maxX;\r\n\r\n        if (this.top < clipRect.minY)\r\n            this.top = clipRect.minY;\r\n        else if (this.top > clipRect.maxY)\r\n            this.top = clipRect.maxY;\r\n\r\n        if (this.bottom > clipRect.maxY)\r\n            this.bottom = clipRect.maxY;\r\n        else if (this.bottom < clipRect.minY)\r\n            this.bottom = clipRect.minY;\r\n\r\n        return this;\r\n    }\r\n\r\n    clone() {\r\n        return new Rect(this);\r\n    }\r\n\r\n    swapXY() {\r\n        [this.left, this.top] = [this.top, this.left];\r\n        [this.bottom, this.right] = [this.right, this.bottom];\r\n        return this;\r\n    }\r\n}\r\n\r\nexports.Rect = Rect;","'use strict';\r\nvar Utils = require('./utils.js');\r\n\r\nclass Axis {\r\n    static create(tayberry, options, index, axisType, xYSwapped) {\r\n        if (xYSwapped) {\r\n            axisType = axisType === 'y' ? 'x' : 'y';\r\n        }\r\n        if (options.type === 'linear')\r\n            return new LinearAxis(tayberry, index, options, axisType);\r\n        else\r\n            return new CategorialAxis(tayberry, index, options, axisType);\r\n    }\r\n\r\n    constructor(tayberry, index, options, axisType) {\r\n        this.tayberry = tayberry;\r\n        this.options = options;\r\n        this.axisType = axisType;\r\n        this.index = index;\r\n        this.tickStep = null;\r\n        this.min = null;\r\n        this.max = null;\r\n        this.tickStart = null;\r\n        this.tickEnd = null;\r\n        this.calculatedSize = 0;\r\n        this.topAdjustment = 0;\r\n        this.rightAdjustment = 0;\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.numLabelLines = 1;\r\n\r\n        this.setPlacement();\r\n    }\r\n\r\n    updateFonts() {\r\n        this.labelFont = this.tayberry.createFontString(this.options.font);\r\n        this.titleFont = this.tayberry.createFontString(this.options.title.font);\r\n    }\r\n\r\n    setPlacement() {\r\n        const validAndSpecificPlacements = ['left', 'right', 'top', 'bottom', 'start', 'end'];\r\n        if (validAndSpecificPlacements.indexOf(this.options.placement) === -1) {\r\n            this.options.placement = this.isYAxis ^ (this.index > 0) ? 'start' : 'end';\r\n        }\r\n    }\r\n\r\n    get isPlacedAtStart() {\r\n        return this.options.placement === \"left\" || this.options.placement === \"bottom\" || this.options.placement === \"start\";\r\n    }\r\n\r\n    get isYAxis() {\r\n        return this.axisType === 'y';\r\n    }\r\n\r\n    maxLabelSize() {\r\n        let tb = this.tayberry;\r\n        let ticks = this.getTicks();\r\n        return Utils.reduce(ticks, Math.max, x => tb.getTextWidth(this.options.labelFormatter(x.value), this.labelFont));\r\n    }\r\n\r\n    mapLogicalXOrYUnit(x) {\r\n        return this.isYAxis ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    mapLogicalYOrXUnit(x) {\r\n        return !this.isYAxis ? this.tayberry.mapLogicalXUnit(x) : this.tayberry.mapLogicalYUnit(x);\r\n    }\r\n\r\n    adjustSize(plotArea, fixedOnly, reset) {\r\n        let size = 0,\r\n            tb = this.tayberry,\r\n            ret;\r\n\r\n        const titleFontHeight = tb.getFontHeight(this.options.title.font);\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n\r\n        if (reset) {\r\n            this.calculatedSize = 0;\r\n            this.topAdjustment = 0;\r\n            this.rightAdjustment = 0;\r\n            this.numLabelLines = 1;\r\n        }\r\n\r\n        size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding);\r\n        if (this.options.title.text) {\r\n            size += this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) + titleFontHeight;\r\n        }\r\n\r\n        if (!fixedOnly) {\r\n            let ticks = this.getTicks(false);\r\n            if (this.isYAxis) {\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const lastTickYStart = lastTick.y - fontHeight / 2;\r\n                    if (lastTickYStart < plotArea.top - this.topAdjustment) {\r\n                        const adjustment = plotArea.top - lastTickYStart - this.topAdjustment + 1;\r\n                        plotArea.top += adjustment;\r\n                        this.topAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += this.maxLabelSize()\r\n            } else {\r\n                {\r\n                    let lastXEnd;\r\n                    for (let i = 0; i < ticks.length; i++) {\r\n                        let tick = ticks[i];\r\n                        const textWidth = tb.getTextWidth(this.options.labelFormatter(tick.value), this.labelFont);\r\n                        const xStart = tick.x - textWidth / 2;\r\n                        const xEnd = tick.x + textWidth / 2;\r\n                        if (typeof lastXEnd !== 'undefined' && xStart <= lastXEnd + 1) {\r\n                            this.numLabelLines = 2;\r\n                            break;\r\n                        }\r\n                        lastXEnd = xEnd;\r\n                    }\r\n                }\r\n                if (ticks.length) {\r\n                    const lastTick = ticks[ticks.length - 1];\r\n                    const textWidth = tb.getTextWidth(this.options.labelFormatter(lastTick.value), this.labelFont);\r\n                    const lastTickXEnd = lastTick.x + textWidth / 2;\r\n                    if (lastTickXEnd >= plotArea.right + this.rightAdjustment) {\r\n                        const adjustment = lastTickXEnd - plotArea.right - this.rightAdjustment + 1;\r\n                        plotArea.right -= adjustment;\r\n                        this.rightAdjustment += adjustment;\r\n                    }\r\n                }\r\n                size += fontHeight * this.numLabelLines;\r\n            }\r\n        }\r\n\r\n        if (this.isPlacedAtStart) {\r\n            if (this.isYAxis) {\r\n                plotArea.left += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.top += size - this.calculatedSize;\r\n            }\r\n        } else {\r\n            size *= -1;\r\n            if (this.isYAxis) {\r\n                plotArea.right += size - this.calculatedSize;\r\n            } else {\r\n                plotArea.bottom += size - this.calculatedSize;\r\n            }\r\n        }\r\n\r\n        ret = this.calculatedSize !== size;\r\n        this.calculatedSize = size;\r\n\r\n        return ret;\r\n    }\r\n\r\n    calculateExtent() {\r\n    }\r\n\r\n    getCategoryLabel() {\r\n    }\r\n\r\n    draw() {\r\n        this.drawTicksAndLabels();\r\n        this.drawTitle();\r\n    }\r\n\r\n    drawTicksAndLabels() {\r\n        let tb = this.tayberry;\r\n        const labelPaddingX = this.isYAxis ? this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const labelPaddingY = !this.isYAxis ? this.mapLogicalXOrYUnit(tb.options.elementSmallPadding) * (this.isPlacedAtStart ? -1 : 1) : 0;\r\n        const fontHeight = tb.getFontHeight(this.options.font);\r\n\r\n        tb.labelsCtx.save();\r\n        tb.labelsCtx.font = this.labelFont;\r\n        tb.labelsCtx.fillStyle = this.options.font.colour;\r\n        tb.labelsCtx.textAlign = this.isYAxis ? (this.isPlacedAtStart ? 'right' : 'left') : 'center';\r\n        tb.labelsCtx.textBaseline = this.isYAxis ? 'middle' : this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n        let lastXEnds = [], tickIndex = 0;\r\n\r\n        this.enumerateTicks(function (tick) {\r\n            let textWidth, xStart, xEnd;\r\n            const formattedValue = this.options.labelFormatter(tick.value);\r\n            const row = tickIndex % this.numLabelLines;\r\n            const rowOffset = this.isYAxis ? 0 : fontHeight * row;\r\n            if (!this.isYAxis) {\r\n                textWidth = tb.getTextWidth(formattedValue, this.labelFont);\r\n                xStart = tick.x - textWidth / 2;\r\n                xEnd = tick.x + textWidth / 2;\r\n            }\r\n\r\n            if (this.isYAxis || (typeof lastXEnds[row] === 'undefined' || xStart > lastXEnds[row] + 1) && xStart >= 0 && xEnd < tb.labelsCanvas.width) {\r\n                tb.labelsCtx.fillText(formattedValue, tick.x + labelPaddingX, tick.y + labelPaddingY + rowOffset);\r\n                lastXEnds[row] = xEnd;\r\n            }\r\n            if (this.options.gridLines.colour)\r\n                tb.drawLine(tick.x1, tick.y1, tick.x2, tick.y2, this.options.gridLines.colour);\r\n            tickIndex++;\r\n        }.bind(this));\r\n\r\n        tb.labelsCtx.restore();\r\n    }\r\n\r\n    get startProperty() {\r\n        if (this.isYAxis)\r\n            return this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    get endProperty() {\r\n        if (this.isYAxis)\r\n            return !this.isPlacedAtStart ? 'left' : 'right';\r\n        else\r\n            return !this.isPlacedAtStart ? 'top' : 'bottom';\r\n    }\r\n\r\n    drawTitle() {\r\n        if (this.options.title.text) {\r\n            let tb = this.tayberry;\r\n            tb.labelsCtx.save();\r\n            tb.labelsCtx.font = this.titleFont;\r\n            tb.labelsCtx.fillStyle = this.options.title.font.colour;\r\n            tb.labelsCtx.textAlign = 'center';\r\n            tb.labelsCtx.textBaseline = !this.isPlacedAtStart ? 'bottom' : 'top';\r\n\r\n            if (this.isYAxis) {\r\n                const x = 0;\r\n                const y = tb.plotArea.top + (tb.plotArea.height) / 2;\r\n                tb.labelsCtx.translate(x, y);\r\n                tb.labelsCtx.rotate(-Math.PI / 2);\r\n                tb.labelsCtx.fillText(this.options.title.text, 0, 0);\r\n            } else {\r\n                const x = tb.plotArea.left + tb.plotArea.width / 2;\r\n                const y = tb.plotArea[this.startProperty] - this.calculatedSize;\r\n                //tb.mapLogicalYOrXUnit(tb.options.font.size * 2 + tb.options.elementSmallPadding + tb.options.elementLargePadding)\r\n                tb.labelsCtx.fillText(this.options.title.text, x, y);\r\n            }\r\n            tb.labelsCtx.restore();\r\n        }\r\n    }\r\n\r\n    getTicks(visibleOnly = true) {\r\n        let ret = [];\r\n        this.enumerateTicks(function (tick) {\r\n            ret.push(tick)\r\n        }, visibleOnly);\r\n        return ret;\r\n    }\r\n\r\n    getOrigin() {\r\n    }\r\n\r\n    updateFormatter() {\r\n    }\r\n}\r\n\r\nclass CategorialAxis extends Axis {\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const categoryCount = this.options.categories.length;\r\n        let plotArea = tb.plotArea.clone();\r\n        if (this.isYAxis)\r\n            plotArea.swapXY();\r\n        const categoryWidth = (plotArea.width / tb.series[0].data.length);\r\n        let factor = 0.5;\r\n\r\n        if (!this.isYAxis) {\r\n            switch (this.options.labelPosition) {\r\n                case 'left':\r\n                    factor = 0;\r\n                    break;\r\n                case 'right':\r\n                    factor = 1;\r\n                    break;\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < categoryCount; i++) {\r\n            const value = this.options.categories[i];\r\n            let y1 = (this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let y2 = (!this.isPlacedAtStart ? plotArea.top : plotArea.bottom);\r\n            let x1 = plotArea.left + Math.floor(i * categoryWidth);\r\n            let x2 = x1;\r\n            let x = plotArea.left + Math.floor(i * categoryWidth + categoryWidth * factor);\r\n            let y = y1;\r\n            if (this.isYAxis)\r\n                [x1, y1, x2, y2, x, y] = [y1, x1, y2, x2, y, x];\r\n\r\n            callback({\r\n                value: value,\r\n                x1: x1,\r\n                y1: y1,\r\n                x2: x2,\r\n                y2: y2,\r\n                x: x,\r\n                y: y\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            this.options.labelFormatter = Utils.identity;\r\n        }\r\n    }\r\n\r\n    getCategoryLabel(index) {\r\n        return this.options.labelFormatter(this.options.categories[index]);\r\n    }\r\n}\r\n\r\nclass LinearAxis extends Axis {\r\n    updateFormatter() {\r\n        if (!this.options.labelFormatter) {\r\n            if (this.options.labelFormat === 'percentage') {\r\n                this.options.labelFormatter = Utils.createPercentageFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n            else if (this.options.labelFormat === 'currency') {\r\n                this.options.labelFormatter = Utils.createFixedNumberFormatter(this.max - this.min, this.options.labelPrefix || this.options.currencySymbol, this.options.labelSuffix);\r\n            }\r\n            else {\r\n                this.options.labelFormatter = Utils.createAutoNumberFormatter(this.max - this.min, this.options.labelPrefix, this.options.labelSuffix);\r\n            }\r\n        }\r\n    }\r\n\r\n    enumerateTicks(callback) {\r\n        let tb = this.tayberry;\r\n\r\n        const start = this.startProperty,\r\n            end = this.endProperty;\r\n\r\n        for (let yValue = this.tickStart; yValue <= this.tickEnd && this.tickStep;) {\r\n            let y = this.getValueDisplacement(yValue);\r\n            if (this.isYAxis) {\r\n                if (callback({\r\n                        value: yValue,\r\n                        x1: tb.plotArea[start],\r\n                        y1: y,\r\n                        x2: tb.plotArea[end],\r\n                        y2: y,\r\n                        x: tb.plotArea[start],\r\n                        y: y\r\n\r\n                    }))\r\n                    break;\r\n            } else {\r\n                if (callback({\r\n                        value: yValue,\r\n                        y1: tb.plotArea[start],\r\n                        x1: y,\r\n                        y2: tb.plotArea[end],\r\n                        x2: y,\r\n                        y: tb.plotArea[start],\r\n                        x: y\r\n                    }))\r\n                    break;\r\n            }\r\n            yValue = this.tickStart + Math.round((yValue + this.tickStep - this.tickStart) / this.tickStep) * this.tickStep;\r\n        }\r\n    }\r\n\r\n    static snapScaledValue(scaledStep) {\r\n        if (scaledStep < 1)\r\n            scaledStep = 1;\r\n        else if (scaledStep < 2)\r\n            scaledStep = 2;\r\n        else if (scaledStep < 2.5)\r\n            scaledStep = 2.5;\r\n        else if (scaledStep < 5)\r\n            scaledStep = 5;\r\n        else\r\n            scaledStep = 10;\r\n        return scaledStep;\r\n    }\r\n\r\n    calculateExtent() {\r\n        let targetTicks, approxStep, scale;\r\n\r\n        let targetStart = this.options.min;\r\n        let targetEnd = this.options.max;\r\n        const overriddenStart = !Utils.isMissingValue(targetStart);\r\n        const overriddenEnd = !Utils.isMissingValue(targetEnd);\r\n\r\n        if (!overriddenStart || !overriddenEnd) {\r\n            const [dataMin, dataMax] = this.tayberry.getDataMinMax(); //TODO: implement for x-axis\r\n            const dataRange = dataMax - dataMin;\r\n            if (!overriddenStart) {\r\n                targetStart = dataMin - dataRange * 0.1;\r\n                if (dataMin >= 0 && targetStart < 0)\r\n                    targetStart = 0;\r\n            }\r\n            if (!overriddenEnd) {\r\n                targetEnd = dataMax + dataRange * 0.1;\r\n                if (dataMax <= 0 && targetStart > 0)\r\n                    targetEnd = 0;\r\n            }\r\n        }\r\n\r\n        if (this.options.tickStepValue) {\r\n            this.tickStep = this.options.tickStepValue;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        } else {\r\n            const targetRange = targetEnd - targetStart;\r\n            targetTicks = this.plotLength / this.mapLogicalYOrXUnit(this.options.tickStep);\r\n            approxStep = targetRange / targetTicks;\r\n            scale = Math.pow(10, Math.floor(Math.log(approxStep) / Math.log(10)));\r\n            let scaledStep = LinearAxis.snapScaledValue(Math.ceil(approxStep / scale));\r\n            this.tickStep = scaledStep * scale;\r\n            this.min = targetStart;\r\n            this.max = targetEnd;\r\n        }\r\n        this.tickStart = this.options.tickStepValue && overriddenStart ? this.min : Math.floor(this.min / this.tickStep) * this.tickStep;\r\n        this.tickEnd = this.options.tickStepValue && overriddenEnd ? this.max : Math.ceil(this.max / this.tickStep) * this.tickStep;\r\n        if (!overriddenStart)\r\n            this.min = this.tickStart;\r\n        if (!overriddenEnd)\r\n            this.max = this.tickEnd;\r\n    }\r\n\r\n    get plotDisplacement() {\r\n        return this.isYAxis ? (this.tayberry.plotArea.height - 1) : -(this.tayberry.plotArea.width - 1);\r\n    }\r\n\r\n    get plotLength() {\r\n        return Math.abs(this.plotDisplacement);\r\n    }\r\n\r\n    getOrigin() {\r\n        let ret = this.tayberry.plotArea[this.isYAxis ? 'bottom' : 'left'] - (0 - this.min) * this.plotDisplacement / (this.max - this.min);\r\n        if (this.isYAxis) ret--;\r\n        ret = this.isYAxis ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getValueDisplacement(value) {\r\n        let ret = this.getOrigin() - value * this.plotDisplacement / (this.max - this.min);\r\n        ret = this.isYAxis ? Math.floor(ret) : Math.ceil(ret);\r\n        return ret;\r\n    }\r\n\r\n    getCategoryLabel(index, totalCategories) {\r\n        const start = index / totalCategories;\r\n        const end = (index + 1) / totalCategories;\r\n        const axisRange = this.max - this.min;\r\n        return Utils.formatString('{0} \\u2264 x < {1}', [this.options.labelFormatter(this.min + start * axisRange), this.options.labelFormatter(this.min + end * axisRange)]);\r\n    }\r\n}\r\n\r\nexports.Axis = Axis;","class Tayberry {\r\n    constructor() {\r\n        this.selectedItem = {};\r\n        this.containerElement = null;\r\n        this.labelsCanvas = null;\r\n        this.labelsCtx = null;\r\n        this.renderedSeries = null;\r\n        this.options = null;\r\n        this.scaleFactor = null;\r\n        this.titleFont = null;\r\n        this.plotArea = null;\r\n        this.series = [];\r\n        this.categories = [];\r\n        this.titleFont = null;\r\n        this.labelFont = null;\r\n        this.legendFont = null;\r\n    }\r\n\r\n    get seriesCount() {\r\n        return this.series.length;\r\n    }\r\n\r\n    get categoryCount() {\r\n        return this.series.length ? this.series[0].data.length : 0;\r\n    }\r\n}\r\n\r\nexports.Tayberry = Tayberry;\r\n\r\n\r\n","'use strict';\r\nvar Colour = require('./colour').Colour;\r\nvar Utils = require('./utils');\r\n\r\nvar Tayberry = require('./tayberry.base').Tayberry;\r\nvar Axis = require('./tayberry.axes').Axis;\r\n\r\nvar currentAutoColourIndex = 0;\r\n\r\nTayberry.getAutoColour = function () {\r\n    let ret = Tayberry.defaultColours[currentAutoColourIndex % Tayberry.defaultColours.length];\r\n    currentAutoColourIndex++;\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.createCanvas = function () {\r\n    let ret = document.createElement('canvas');\r\n    // IE11 hack-fix - clientWidth sometimes incorrect on first access\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    ret.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    ret.style.position = 'absolute';\r\n    this.containerElement.appendChild(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.create = function (containerElement) {\r\n    if (typeof containerElement == 'string') {\r\n        this.containerElement = document.getElementById(containerElement);\r\n    } else {\r\n        this.containerElement = containerElement;\r\n    }\r\n    this.labelsCanvas = this.createCanvas();\r\n    this.labelsCtx = this.labelsCanvas.getContext('2d');\r\n    this.plotCanvas = this.createCanvas();\r\n    this.plotCtx = this.plotCanvas.getContext('2d');\r\n    this.renderedSeries = null;\r\n    this.options = {};\r\n    this.yAxis = null;\r\n    this.xAxis = null;\r\n    this.initialise();\r\n};\r\n\r\nTayberry.prototype.destroy = function () {\r\n    this.labelsCanvas.parentNode.removeChild(this.labelsCanvas);\r\n    this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n    this.options = {};\r\n    this.series = {};\r\n    this.plotCanvas.removeEventListener('mousemove', this.onMouseMoveReal);\r\n    this.plotCanvas.removeEventListener('mouseleave', this.onMouseLeaveReal);\r\n    // this.plotCanvas.removeEventListener('touchstart', this.onTouchStartReal);\r\n    window.removeEventListener('resize', this.onWindowResizeReal);\r\n};\r\n\r\nTayberry.prototype.initialise = function () {\r\n    this.scaleFactor = window.devicePixelRatio || 1.0;\r\n    this.labelsCanvas.width = Math.round(this.labelsCanvas.clientWidth * this.scaleFactor);\r\n    this.labelsCanvas.height = Math.round(this.labelsCanvas.clientHeight * this.scaleFactor);\r\n    this.plotCanvas.width = this.labelsCanvas.width;\r\n    this.plotCanvas.height = this.labelsCanvas.height;\r\n    this.scaleFactorX = this.labelsCanvas.width / this.labelsCanvas.clientWidth;\r\n    this.scaleFactorY = this.labelsCanvas.height / this.labelsCanvas.clientHeight;\r\n    this.selectedItem = {};\r\n    this.plotArea = null;\r\n};\r\n\r\nTayberry.prototype.getFontHeight = function (font, forDom) {\r\n    let ret = font.size;\r\n    if (font.autoScale)\r\n        ret *= Math.pow(this.labelsCanvas.width / 800, 0.25);\r\n    if (!forDom) ret = this.mapLogicalYUnit(ret);\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.createFontString = function (font, forDom) {\r\n    return (font.style ? font.style + ' ' : '') + this.getFontHeight(font, forDom).toFixed(1) + 'px ' + font.face;\r\n};\r\n\r\nTayberry.prototype.updateFonts = function () {\r\n    //this.labelsCtx.font = this.createFontString(this.options.font);\r\n    this.titleFont = this.createFontString(this.options.title.font);\r\n    this.labelFont = this.createFontString(this.options.labels.font);\r\n    this.legendFont = this.createFontString(this.options.legend.font);\r\n    this.yAxis.updateFonts();\r\n    this.xAxis.updateFonts();\r\n};\r\n\r\nTayberry.prototype.setOptions = function (options) {\r\n    let optionOverrides = [this.defaultOptions()];\r\n    if (options.presets) {\r\n        for (let index = 0; index < options.presets.length; index++) {\r\n            optionOverrides.push(Tayberry.presets[options.presets[index]]);\r\n        }\r\n    }\r\n    optionOverrides.push(options);\r\n    this.options = Utils.deepAssign({}, optionOverrides);\r\n    this.options.title.font = Utils.deepAssign({}, [this.options.font, this.options.title.font]);\r\n    this.options.tooltips.font = Utils.deepAssign({}, [this.options.font, this.options.tooltips.font]);\r\n    this.options.labels.font = Utils.deepAssign({}, [this.options.font, this.options.labels.font]);\r\n    this.options.legend.font = Utils.deepAssign({}, [this.options.font, this.options.legend.font]);\r\n    this.options.yAxis.title.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.title.font, this.options.yAxis.title.font]);\r\n    this.options.xAxis.title.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.title.font, this.options.xAxis.title.font]);\r\n    this.options.xAxis.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.font, this.options.xAxis.font]);\r\n    this.options.yAxis.font = Utils.deepAssign({}, [this.options.font, this.options.allAxes.font, this.options.yAxis.font]);\r\n    this.setSeries(options.series);\r\n    //this.setCategories(options.xAxis.categories);\r\n\r\n    this.yAxis = Axis.create(this, this.options.yAxis, 0, 'y', this.options.swapAxes);\r\n    this.xAxis = Axis.create(this, this.options.xAxis, 0, 'x', this.options.swapAxes);\r\n    this.updateFonts();\r\n    this.plotCanvas.addEventListener('mousemove', this.onMouseMoveReal = this.onMouseMove.bind(this));\r\n    this.plotCanvas.addEventListener('mouseleave', this.onMouseLeaveReal = this.onMouseLeave.bind(this));\r\n    //this.plotCanvas.addEventListener('touchstart', this.onTouchStartReal = this.onTouchStart.bind(this));\r\n    window.addEventListener('resize', this.onWindowResizeReal = Utils.throttle(this.onWindowResize, 50).bind(this));\r\n};\r\n\r\nTayberry.calculateHighlightColour = function (colour) {\r\n    let newColour = new Colour(colour);\r\n    return newColour.increaseBy(30 * (newColour.sum >= 180 * 3 ? -1 : 1)).toString();\r\n};\r\n\r\nTayberry.prototype.setSeries = function (series) {\r\n    var i;\r\n    if (!Array.isArray(series)) {\r\n        this.series = [series];\r\n    } else {\r\n        this.series = series;\r\n    }\r\n    this.renderedSeries = series.slice(0);\r\n    for (i = 0; i < this.renderedSeries.length; i++) {\r\n        let actualSeries = this.series[i];\r\n        actualSeries.colour = actualSeries.colour || Tayberry.getAutoColour();\r\n        actualSeries.highlightColour = actualSeries.highlightColour || Tayberry.calculateHighlightColour(actualSeries.colour);\r\n        let elem = Utils.assign({}, actualSeries);\r\n        elem.data = this.renderedSeries[i].data.slice(0);\r\n        this.renderedSeries[i] = elem;\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.getDataMinMax = function () {\r\n    var categoryIndex, seriesIndex, min, max;\r\n    let seriesPositiveTotals = [];\r\n    let seriesNegativeTotals = [];\r\n    const seriesMinima = [];\r\n    const seriesMaxima = [];\r\n    if (this.series[0].data.length) {\r\n        for (categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n            seriesPositiveTotals[categoryIndex] = 0;\r\n            seriesNegativeTotals[categoryIndex] = 0;\r\n            for (seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n                const value = this.series[seriesIndex].data[categoryIndex];\r\n                if (!Utils.isMissingValue(value)) {\r\n                    if (value < 0) {\r\n                        seriesNegativeTotals[categoryIndex] += value;\r\n                    } else {\r\n                        seriesPositiveTotals[categoryIndex] += value;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            seriesMinima.push(Utils.reduce(series.data, Math.min, undefined, true));\r\n            seriesMaxima.push(Utils.reduce(series.data, Math.max, undefined, true));\r\n        }\r\n        if (this.options.barMode === 'stacked') {\r\n            min = Math.min(0, Utils.reduce(seriesNegativeTotals, Math.min, undefined, true));\r\n            max = Math.max(Utils.reduce(seriesPositiveTotals, Math.max, undefined, true), 0);\r\n        } else {\r\n            min = Utils.reduce(seriesMinima, Math.min, undefined, true);\r\n            max = Utils.reduce(seriesMaxima, Math.max, undefined, true);\r\n        }\r\n    }\r\n    return [min, max];\r\n};\r\n\r\n\r\nTayberry.prototype.createTooltip = function () {\r\n    if (this.tooltipElement) {\r\n        this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n        this.tooltipElement = null;\r\n    }\r\n    this.tooltipElement = document.createElement('div');\r\n    this.tooltipElement.className = 'tayberry-tooltip';\r\n    this.tooltipElement.style.position = 'absolute';\r\n    this.tooltipElement.style.left = '0px';\r\n    this.tooltipElement.style.top = '0px';\r\n    this.tooltipElement.style.zIndex = '99999';\r\n    this.tooltipElement.style.font = this.createFontString(this.options.tooltips.font, true);\r\n    this.tooltipElement.style.borderRadius = '3px';\r\n    this.tooltipElement.style.backgroundColor = 'white';\r\n    this.tooltipElement.style.border = '2px solid #bbb';\r\n    this.tooltipElement.style.padding = '0.15em 0.4em';\r\n    this.tooltipElement.style.display = 'none';\r\n    this.tooltipElement.innerHTML = '';\r\n    document.body.appendChild(this.tooltipElement);\r\n    this.tooltipElement.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    this.tooltipElement.addEventListener('mouseleave', this.onMouseLeave.bind(this));\r\n};\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.defaultOptions = function () {\r\n    return {\r\n        title: {\r\n            text: '',\r\n            font: {\r\n                size: 20\r\n            }\r\n        },\r\n        font: {\r\n            colour: '#444',\r\n            size: 12,\r\n            face: 'sans-serif',\r\n            style: '',\r\n            autoScale: true\r\n        },\r\n        allAxes: {\r\n            font: {},\r\n            title: {\r\n                font: {}\r\n            }\r\n        },\r\n        xAxis: {\r\n            title: {\r\n                text: '',\r\n                font: {}\r\n            },\r\n            type: 'categorial',\r\n            min: null,\r\n            max: null,\r\n            tickStep: 40,\r\n            tickStepValue: null,\r\n            font: {},\r\n            categories: [],\r\n            labelPosition: 'middle', //left|middle|right\r\n            placement: 'auto',\r\n            gridLines: {}\r\n        },\r\n        yAxis: {\r\n            title: {\r\n                text: '',\r\n                font: {}\r\n            },\r\n            gridLines: {\r\n                colour: '#ccc'\r\n            },\r\n            min: undefined,\r\n            max: undefined,\r\n            tickStep: 40,\r\n            tickStepValue: null,\r\n            font: {},\r\n            labelFormat: 'number', //[number|percentage|currency],\r\n            labelFormatter: undefined,\r\n            labelPrefix: undefined,\r\n            labelSuffix: undefined,\r\n            currencySymbol: '',\r\n            placement: 'auto',\r\n            type: 'linear'\r\n        },\r\n        animations: {\r\n            enabled: true\r\n        },\r\n        series: [],\r\n        swapAxes: false,\r\n        barMode: 'normal', //[normal|stacked|overlaid]\r\n        barPadding: 2,\r\n        elementSmallPadding: 5,\r\n        elementLargePadding: 10,\r\n        categorySpacing: 0.3,\r\n        presets: [],\r\n        tooltips: {\r\n            shared: false,\r\n            headerTemplate: '<strong>{category}</strong><table>',\r\n            valueTemplate: '<tr><td style=\"padding-right: 0.5em\"><span style=\"color: {colour}\">\\u25CF</span> {name}</td><td style=\"text-align: right\">{value}</td></tr>',\r\n            footerTemplate: '</table>',\r\n            font: {}\r\n        },\r\n        legend: {\r\n            enabled: true,\r\n            indicatorSize: 15,\r\n            font: {}\r\n        },\r\n        labels: {\r\n            enabled: false,\r\n            verticalAlignment: 'top',\r\n            verticalPosition: 'outside',\r\n            font: {}\r\n        }\r\n    }\r\n};\r\n\r\nTayberry.presets = {\r\n    histogram: {\r\n        xAxis: {\r\n            labelPosition: 'left'\r\n        },\r\n        barMode: 'overlaid',\r\n        categorySpacing: 0,\r\n        barPadding: 1\r\n    }\r\n};\r\n\r\nTayberry.defaultColours = [\r\n    '#6FE87B', //green\r\n    '#FFAB51', //orange\r\n    '#51A8FF', //blue\r\n    '#B651FF', //purple\r\n    '#FF6051', //red\r\n    '#636363', //dark grey\r\n    '#FFE314', //yellow\r\n    '#A88572', //brown\r\n    '#B7B7B7' //light grey\r\n];\r\n","'use strict';\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.getTextWidth = function (text, fontString) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.labelsCtx.measureText(text).width;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.getMultilineTextHeight = function (fontString, maxWidth, text) {\r\n    let ret;\r\n    if (fontString) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = fontString;\r\n    }\r\n    ret = this.splitMultilineText(maxWidth, text).length;\r\n    if (fontString) {\r\n        this.labelsCtx.restore();\r\n    }\r\n    return ret;\r\n};\r\n\r\n\r\nTayberry.prototype.splitMultilineText = function (maxWidth, text) {\r\n    let lines = [];\r\n    let lineWidth = 0;\r\n    let lineText = '';\r\n    const spaceWidth = this.labelsCtx.measureText(' ').width;\r\n    for (let i = 0; i < text.length;) {\r\n        const wordStart = i;\r\n        while (i < text.length && text[i] !== ' ' && text[i] !== '\\r' && text[i] !== '\\n') i++;\r\n        const wordEnd = i;\r\n        while (i < text.length && (text[i] === ' ' || text[i] === '\\r' || text[i] === '\\n')) i++;\r\n        if (wordEnd > wordStart) {\r\n            const word = text.substring(wordStart, wordEnd);\r\n            const wordWidth = this.labelsCtx.measureText(word).width;\r\n            if (lineWidth + wordWidth > maxWidth) {\r\n                if (!lineWidth) {\r\n                    lineText = word;\r\n                }\r\n                lines.push(lineText);\r\n                if (lineWidth) {\r\n                    lineWidth = 0;\r\n                    lineText = word;\r\n                }\r\n            } else {\r\n                lineText += (lineText ? ' ' : '') + word;\r\n                lineWidth += wordWidth + spaceWidth;\r\n            }\r\n        }\r\n    }\r\n    if (lineText) {\r\n        lines.push(lineText);\r\n    }\r\n    return lines;\r\n};\r\n\r\nTayberry.prototype.drawTextMultiline = function (lineHeight, x, y, maxWidth, text) {\r\n    let lines = this.splitMultilineText(maxWidth, text);\r\n\r\n    for (let i = 0; i < lines.length; i++) {\r\n        let line = lines[i];\r\n        this.labelsCtx.fillText(line, x, y + lineHeight * i);\r\n    }\r\n};\r\n\r\nTayberry.prototype.render = function () {\r\n    this.calculatePlotArea();\r\n    this.drawTitle();\r\n    this.xAxis.draw();\r\n    this.yAxis.draw();\r\n    this.drawLegend();\r\n    this.createTooltip();\r\n    if (this.options.animations.enabled) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n        this.animatationStart = performance.now();\r\n        this.animationLength = 500;\r\n    } else {\r\n        this.draw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.clear = function (plot = true, labels = true) {\r\n    if (plot) this.plotCtx.clearRect(0, 0, this.plotCanvas.width, this.plotCanvas.height);\r\n    if (labels) this.labelsCtx.clearRect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n};\r\n\r\nTayberry.prototype.drawTitle = function () {\r\n    if (this.options.title.text) {\r\n        const x = (this.labelsCanvas.width) / 2, y = 0;\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.textAlign = 'center';\r\n        this.labelsCtx.textBaseline = 'top';\r\n        this.labelsCtx.font = this.titleFont;\r\n        this.labelsCtx.fillStyle = this.options.title.font.colour;\r\n        this.drawTextMultiline(this.getFontHeight(this.options.title.font), x, y, this.labelsCanvas.width, this.options.title.text);\r\n        // this.labelsCtx.fillText(this.options.title.text, x, y);\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLabel = function (sign, text, rect) {\r\n    if (this.options.swapAxes)\r\n        rect = rect.clone().swapXY();\r\n    let x = (rect.left + rect.right) / 2;\r\n    let y;\r\n    if (this.options.labels.verticalAlignment === 'top')\r\n        y = rect.top;\r\n    else if (this.options.labels.verticalAlignment === 'bottom')\r\n        y = rect.bottom;\r\n    else\r\n        y = (rect.top + rect.bottom) / 2;\r\n    let baseline = 'middle';\r\n    let align = 'center';\r\n    if (this.options.swapAxes) {\r\n        [x, y] = [y, x];\r\n        if (this.options.labels.verticalPosition === 'outside')\r\n            align = 'left';\r\n        else if (this.options.labels.verticalPosition === 'inside')\r\n            align = 'right';\r\n    } else {\r\n        baseline = Tayberry.mapVerticalPosition(sign, this.options.labels.verticalPosition);\r\n    }\r\n    if (this.plotArea.containsPoint(x, y)) {\r\n        this.plotCtx.save();\r\n        this.plotCtx.textAlign = align;\r\n        this.plotCtx.textBaseline = baseline;\r\n        this.plotCtx.fillText(text, x, y);\r\n        this.plotCtx.restore();\r\n    }\r\n};\r\n\r\n\r\nTayberry.prototype.draw = function () {\r\n\r\n    this.plotCtx.save();\r\n    this.enumerateBars(function (bar) {\r\n        this.plotCtx.fillStyle = bar.selected ? bar.renderedSeries.highlightColour : bar.renderedSeries.colour;\r\n        this.plotCtx.fillRect(bar.rect.left, bar.rect.top, bar.rect.width, bar.rect.height);\r\n    }.bind(this));\r\n    this.plotCtx.restore();\r\n\r\n    if (this.options.labels.enabled) {\r\n        this.plotCtx.save();\r\n        this.enumerateBars(function (bar) {\r\n            this.plotCtx.font = this.labelFont;\r\n            this.plotCtx.fillStyle = this.options.labels.font.colour;\r\n            this.drawLabel(bar.value, this.options.yAxis.labelFormatter(bar.value), bar.rect);\r\n        }.bind(this));\r\n        this.plotCtx.restore();\r\n    }\r\n};\r\n\r\nTayberry.prototype.drawLine = function (x1, y1, x2, y2, colour) {\r\n    this.labelsCtx.save();\r\n    if (colour) {\r\n        this.labelsCtx.strokeStyle = colour;\r\n    }\r\n    this.labelsCtx.beginPath();\r\n    this.labelsCtx.moveTo(x1 + 0.5, y1 + 0.5);\r\n    this.labelsCtx.lineTo(x2 + 0.5, y2 + 0.5);\r\n    this.labelsCtx.stroke();\r\n    this.labelsCtx.restore();\r\n};\r\n\r\nTayberry.prototype.redraw = function (plotOnly) {\r\n    this.clear(true, !plotOnly);\r\n    if (!plotOnly) {\r\n        this.drawTitle();\r\n        this.xAxis.draw();\r\n        this.yAxis.draw();\r\n        this.drawLegend();\r\n    }\r\n    this.draw();\r\n};\r\n\r\n\r\nTayberry.prototype.drawLegend = function () {\r\n    if (this.options.legend.enabled) {\r\n        this.labelsCtx.save();\r\n        this.labelsCtx.font = this.legendFont;\r\n        let totalWidth = 0;\r\n        const indicatorSize = this.mapLogicalXUnit(this.options.legend.indicatorSize);\r\n        for (let index = 0; index < this.series.length; index++) {\r\n            const series = this.series[index];\r\n            if (series.name) {\r\n                totalWidth += this.getTextWidth(series.name, this.legendFont) + indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding + this.options.elementLargePadding);\r\n            }\r\n        }\r\n        let x = this.plotArea.left + this.plotArea.width / 2 - totalWidth / 2,\r\n            y = this.labelsCanvas.height - indicatorSize;\r\n\r\n        for (let index = 0; index < this.renderedSeries.length; index++) {\r\n            const series = this.renderedSeries[index];\r\n            if (series.name) {\r\n                this.labelsCtx.fillStyle = series.colour;\r\n                this.labelsCtx.fillRect(x, y, indicatorSize, indicatorSize);\r\n                this.labelsCtx.textBaseline = 'middle';\r\n                this.labelsCtx.fillStyle = this.options.legend.font.colour;\r\n                x += indicatorSize + this.mapLogicalXUnit(this.options.elementSmallPadding);\r\n                this.labelsCtx.fillText(series.name, x, y + indicatorSize / 2);\r\n                x += this.getTextWidth(series.name, this.legendFont) + this.mapLogicalXUnit(this.options.elementLargePadding);\r\n            }\r\n        }\r\n        this.labelsCtx.restore();\r\n    }\r\n};\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Easing = require('./easing.js');\r\nvar Utils = require('./utils.js');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.prototype.onAnimate = function (timestamp) {\r\n    var elapsed, scaleFactor;\r\n    elapsed = timestamp - this.animatationStart;\r\n    scaleFactor = Math.min(Easing.inQuad(elapsed, this.animationLength), 1);\r\n    for (let categoryIndex = 0; categoryIndex < this.series[0].data.length; categoryIndex++) {\r\n        for (let seriesIndex = 0; seriesIndex < this.series.length; seriesIndex++) {\r\n            const value = this.series[seriesIndex].data[categoryIndex];\r\n            const yOrigin = this.yAxis.min <= 0 && 0 <= this.yAxis.max ? 0 : (this.yAxis.min > 0 ? this.yAxis.min : this.yAxis.max);\r\n            this.renderedSeries[seriesIndex].data[categoryIndex] = yOrigin + scaleFactor * ((value - yOrigin));\r\n        }\r\n    }\r\n    this.redraw(true);\r\n    if (scaleFactor < 1) {\r\n        this.animator = requestAnimationFrame(this.onAnimate.bind(this));\r\n    }\r\n};\r\n\r\nTayberry.prototype.onMouseLeave = function (event) {\r\n    if ((event.currentTarget == this.plotCanvas && event.relatedTarget !== this.tooltipElement) || (event.currentTarget == this.tooltipElement && event.relatedTarget !== this.plotCanvas)) {\r\n        this.selectedItem = {};\r\n        this.tooltipElement.style.display = 'none';\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.handleMouseMove = function (clientX, clientY) {\r\n    let boundingRect = new Rect(this.plotCanvas.getBoundingClientRect());\r\n    let ret = false;\r\n    if (boundingRect.containsPoint(clientX, clientY)) {\r\n        let x = clientX - boundingRect.left;\r\n        let y = clientY - boundingRect.top;\r\n\r\n        let hitTestResult = this.hitTest(this.mapLogicalXUnit(x), this.mapLogicalYUnit(y));\r\n        if (hitTestResult.found) {\r\n            const aboveZero = hitTestResult.rect.top < hitTestResult.rect.bottom;\r\n            const category = this.xAxis.getCategoryLabel(hitTestResult.categoryIndex, this.series[0].data.length);\r\n            this.tooltipElement.style.display = 'block';\r\n            let tooltipHtml = Utils.formatString(this.options.tooltips.headerTemplate, {category: category}, true);\r\n            if (this.options.tooltips.shared) {\r\n                for (let index = 0; index < this.series.length; index++) {\r\n                    const series = this.series[index];\r\n                    const value = series.data[hitTestResult.categoryIndex];\r\n                    tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                        value: this.options.yAxis.labelFormatter(value),\r\n                        name: series.name,\r\n                        colour: series.colour\r\n                    }, true);\r\n                }\r\n            } else {\r\n                const series = this.series[hitTestResult.seriesIndex];\r\n                const value = series.data[hitTestResult.categoryIndex];\r\n                tooltipHtml += Utils.formatString(this.options.tooltips.valueTemplate, {\r\n                    value: this.options.yAxis.labelFormatter(value),\r\n                    name: series.name,\r\n                    colour: series.colour\r\n                }, true);\r\n            }\r\n            tooltipHtml += this.options.tooltips.footerTemplate;\r\n            this.tooltipElement.innerHTML = tooltipHtml;\r\n            let tooltipRect = this.tooltipElement.getBoundingClientRect();\r\n            if (!this.options.tooltips.shared) {\r\n                this.tooltipElement.style.borderColor = this.renderedSeries[hitTestResult.seriesIndex].colour;\r\n            }\r\n            this.tooltipElement.style.left = window.pageXOffset + boundingRect.left + this.mapScreenUnit(hitTestResult.rect.width) / 2 + hitTestResult.rect.left / this.scaleFactor - tooltipRect.width / 2 + 'px';\r\n            this.tooltipElement.style.top = window.pageYOffset + boundingRect.top + this.mapScreenUnit(hitTestResult.rect.top) - tooltipRect.height * (aboveZero ? 1 : 0) - this.options.elementSmallPadding * (aboveZero ? 1 : -1) + 'px';\r\n            this.selectedItem = hitTestResult;\r\n            ret = true;\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\n\r\n//Tayberry.prototype.onTouchStart = function (event) {\r\n//    for (let index = 0; index < event.targetTouches.length; index++) {\r\n//        let touch = event.targetTouches[index];\r\n//        if (this.handleMouseMove(touch.clientX, touch.clientY)) {\r\n//            // event.preventDefault();\r\n//            this.redraw();\r\n//            break;\r\n//        }\r\n//    }\r\n//};\r\n\r\n\r\nTayberry.prototype.onMouseMove = function (event) {\r\n    let oldSelectedItem = Utils.assign({}, this.selectedItem);\r\n    if (!this.handleMouseMove(event.clientX, event.clientY)) {\r\n        this.selectedItem = {};\r\n    }\r\n\r\n    if (oldSelectedItem.categoryIndex !== this.selectedItem.categoryIndex || oldSelectedItem.seriesIndex !== this.selectedItem.seriesIndex) {\r\n        this.redraw();\r\n    }\r\n};\r\n\r\nTayberry.prototype.onWindowResize = function () {\r\n    this.tooltipElement.style.display = 'none';\r\n    this.labelsCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.labelsCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.plotCanvas.style.width = Math.floor(this.containerElement.clientWidth) + 'px';\r\n    this.plotCanvas.style.height = Math.floor(this.containerElement.clientHeight) + 'px';\r\n    this.initialise();\r\n    this.updateFonts();\r\n    this.calculatePlotArea();\r\n    this.createTooltip();\r\n    this.redraw();\r\n};\r\n","(function () {\r\n    'use strict';\r\n    var Tayberry = require('./tayberry.base.js').Tayberry;\r\n    require('./tayberry.axes.js');\r\n    require('./tayberry.core.js');\r\n    require('./tayberry.drawing.js');\r\n    require('./tayberry.events.js');\r\n    require('./tayberry.defaults.js');\r\n    require('./tayberry.sizing.js');\r\n\r\n    module.exports = {\r\n        /**\r\n         * Creates a Tayberry chart\r\n         *\r\n         * @param element   ID of container div, or HTMLElement\r\n         * @param options   Options object\r\n         */\r\n        create: function (element, options) {\r\n            var chart = new Tayberry();\r\n            chart.create(element);\r\n            chart.setOptions(options);\r\n            chart.render();\r\n        }\r\n    };\r\n\r\n})();\r\n","'use strict';\r\nvar Rect = require('./rect').Rect;\r\nvar Utils = require('./utils');\r\n\r\nvar Tayberry = require('./tayberry.base.js').Tayberry;\r\n\r\nTayberry.mapVerticalPosition = function (sign, position) {\r\n    switch (position) {\r\n        case \"outside\":\r\n            return sign > 0 ? \"bottom\" : \"top\";\r\n        case \"inside\":\r\n            return sign > 0 ? \"top\" : \"bottom\";\r\n        default:\r\n            return \"middle\";\r\n    }\r\n};\r\n\r\nTayberry.prototype.mapLogicalXUnit = function (x) {\r\n    return this.scaleFactorX * x;\r\n};\r\n\r\nTayberry.prototype.mapLogicalYUnit = function (x) {\r\n    return this.scaleFactorY * x;\r\n};\r\n\r\nTayberry.prototype.mapScreenUnit = function (x) {\r\n    return x / this.scaleFactor;\r\n};\r\n\r\nTayberry.prototype.calculatePlotArea = function () {\r\n    const MAX_AXIS_CALC_SIZE_ATTEMPTS = 5;\r\n\r\n    this.plotArea = new Rect(0, 0, this.labelsCanvas.width, this.labelsCanvas.height);\r\n    if (this.options.title.text) {\r\n        this.plotArea.top += this.mapLogicalYUnit(this.options.elementSmallPadding);\r\n        this.plotArea.top += this.getFontHeight(this.options.title.font) * this.getMultilineTextHeight(this.titleFont, this.labelsCanvas.width, this.options.title.text);\r\n    }\r\n    if (this.options.legend.enabled)\r\n        this.plotArea.bottom -= this.mapLogicalYUnit(this.options.elementSmallPadding + this.options.elementLargePadding + this.options.legend.indicatorSize);\r\n\r\n    this.yAxis.adjustSize(this.plotArea, true, true);\r\n    this.xAxis.adjustSize(this.plotArea, true, true);\r\n\r\n    for (let i = 0; i < MAX_AXIS_CALC_SIZE_ATTEMPTS; i++) {\r\n        this.yAxis.calculateExtent();\r\n        this.xAxis.calculateExtent();\r\n        this.yAxis.updateFormatter();\r\n        this.xAxis.updateFormatter();\r\n        if (!this.yAxis.adjustSize(this.plotArea) && !this.xAxis.adjustSize(this.plotArea))\r\n            break;\r\n    }\r\n    this.plotArea.left = Math.ceil(this.plotArea.left);\r\n    this.plotArea.top = Math.ceil(this.plotArea.top);\r\n    this.plotArea.right = Math.floor(this.plotArea.right);\r\n    this.plotArea.bottom = Math.floor(this.plotArea.bottom);\r\n};\r\n\r\nTayberry.prototype.hitTest = function (x, y) {\r\n    // TODO: Optimise\r\n    let ret = {\r\n        found: false,\r\n        categoryIndex: undefined,\r\n        seriesIndex: undefined,\r\n        rect: undefined\r\n    };\r\n\r\n    let matches = [];\r\n\r\n    const isOverlaid = this.options.barMode === 'overlaid';\r\n\r\n    this.enumerateBars(function (bar) {\r\n        if (bar.rect.containsPoint(x, y)) {\r\n            matches.push({\r\n                categoryIndex: bar.categoryIndex,\r\n                seriesIndex: bar.seriesIndex,\r\n                rect: bar.rect\r\n            });\r\n            if (!isOverlaid)\r\n                return true;\r\n        }\r\n    }.bind(this));\r\n\r\n    if (matches.length) {\r\n        ret.found = true;\r\n        let minMatchIndex = 0, minHeight = matches[0].rect.height;\r\n        for (let index = 1; index < matches.length; index++) {\r\n            const match = matches[index];\r\n            if (match.rect.height < minHeight) {\r\n                minMatchIndex = index;\r\n                minHeight = match.rect.height;\r\n            }\r\n        }\r\n        ret = Utils.assign(ret, matches[minMatchIndex]);\r\n    }\r\n    return ret;\r\n};\r\n\r\nTayberry.prototype.enumerateBars = function (callback) {\r\n    const categoryCount = this.renderedSeries[0].data.length;\r\n    if (categoryCount) {\r\n        const isStacked = this.options.barMode === 'stacked';\r\n        const isOverlaid = this.options.barMode === 'overlaid';\r\n        const isHorizontal = this.options.swapAxes;\r\n        let plotArea = this.plotArea.clone();\r\n        if (isHorizontal)\r\n            plotArea.swapXY();\r\n        const isNormal = !isStacked && !isOverlaid;\r\n        const barCount = (isStacked || isOverlaid) ? 1 : this.series.length;\r\n        const categoryWidth = (plotArea.width / categoryCount);\r\n        // const barWidth = (categoryWidth * (1 - this.options.categorySpacing) / barCount);\r\n        const yOrigin = this.yAxis.getOrigin();\r\n\r\n        for (let categoryIndex = 0; categoryIndex < categoryCount; categoryIndex++) {\r\n            let categoryXStart = plotArea.left + Math.floor(categoryIndex * categoryWidth);\r\n            let categoryXEnd = plotArea.left + Math.floor((categoryIndex + 1) * categoryWidth);\r\n            let barXStart = categoryXStart + Math.ceil(categoryWidth * this.options.categorySpacing / 2);\r\n            let barXEnd = categoryXEnd - Math.floor(categoryWidth * this.options.categorySpacing / 2);\r\n\r\n            let yBottomPositive = yOrigin,\r\n                yBottomNegative = yOrigin,\r\n                yRunningTotalPositive = 0,\r\n                yRunningTotalNegative = 0;\r\n            let barIndex = 0;\r\n            for (let seriesIndex = 0; seriesIndex < this.renderedSeries.length; seriesIndex++) {\r\n                const value = this.renderedSeries[seriesIndex].data[categoryIndex];\r\n                const barWidth = Math.floor((barXEnd - barXStart) / barCount);\r\n                const xStart = Math.floor(barXStart + barIndex * barWidth);\r\n                const xEnd = Math.ceil(barXStart + (barIndex + 1) * barWidth);\r\n                if (Utils.isMissingValue(value))\r\n                    continue;\r\n                const yTop = this.yAxis.getValueDisplacement(value + (value > 0 ? yRunningTotalPositive : yRunningTotalNegative));\r\n                let rect = new Rect(xStart, yTop, xEnd, value > 0 ? yBottomPositive : yBottomNegative);\r\n                rect.left += Math.ceil(this.options.barPadding * this.scaleFactor / 2);\r\n                rect.right -= Math.floor(this.options.barPadding * this.scaleFactor / 2);\r\n                if (rect.right < rect.left)\r\n                    rect.right = rect.left;\r\n                if (isHorizontal)\r\n                    rect.swapXY();\r\n                rect.clip(this.plotArea);\r\n\r\n                const stopEnumerating = callback({\r\n                    seriesIndex: seriesIndex,\r\n                    categoryIndex: categoryIndex,\r\n                    series: this.renderedSeries[seriesIndex],\r\n                    renderedSeries: this.renderedSeries[seriesIndex],\r\n                    value: this.series[seriesIndex].data[categoryIndex],\r\n                    renderedValue: this.renderedSeries[seriesIndex].data[categoryIndex],\r\n                    rect: rect,\r\n                    selected: this.selectedItem.categoryIndex === categoryIndex && (this.options.tooltips.shared || this.selectedItem.seriesIndex === seriesIndex)\r\n                });\r\n                if (stopEnumerating)\r\n                    break;\r\n                if (isStacked) {\r\n                    if (value > 0) {\r\n                        yRunningTotalPositive += value;\r\n                        yBottomPositive = yTop;\r\n                    }\r\n                    else {\r\n                        yRunningTotalNegative += value;\r\n                        yBottomNegative = yTop;\r\n                    }\r\n                } else if (isNormal) {\r\n                    // x += barWidth;\r\n                    barIndex++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n","(function () {\r\n    \"use strict\";\r\n\r\n    exports.identity = function (obj) {\r\n        return obj;\r\n    };\r\n\r\n    exports.isMissingValue = function (n) {\r\n        return n === null || typeof n === 'undefined' || (isNaN(n) && typeof n === 'number');\r\n    };\r\n\r\n    exports.reduce = function (array, func, getter, ignoreMissing = false) {\r\n        var ret, i;\r\n        if (array.reduce && !getter && !ignoreMissing) {\r\n            ret = array.reduce(function (a, b) {\r\n                return func(a, b);\r\n            });\r\n        } else {\r\n            getter = getter || exports.identity;\r\n            if (array.length) {\r\n                ret = getter(array[0]);\r\n                for (i = 1; i < array.length; i++) {\r\n                    const value = getter(array[i]);\r\n                    if (!ignoreMissing || !exports.isMissingValue(value))\r\n                        ret = func(ret, value);\r\n                }\r\n            }\r\n        }\r\n        return ret;\r\n    };\r\n\r\n    exports.sign = Math.sign || function (n) {\r\n            return n > 0 ? 1 : (n < 0 ? -1 : 0);\r\n        };\r\n\r\n    exports.now = (typeof performance !== 'undefined' && typeof performance.now !== 'undefined') ? performance.now : function () {\r\n        return new Date().getTime();\r\n    };\r\n\r\n    var innerAssign = function (deepAssign, targetObject, sourceObjects) {\r\n        if (!Array.isArray(sourceObjects))\r\n            sourceObjects = [sourceObjects];\r\n        if (!deepAssign && Object.assign) {\r\n            return Object.assign.apply(Object, [targetObject].concat(sourceObjects));\r\n        } else {\r\n            if (targetObject === undefined || targetObject === null) {\r\n                throw new TypeError('Cannot convert first argument to object');\r\n            }\r\n\r\n            var to = Object(targetObject);\r\n            for (let i = 0; i < sourceObjects.length; i++) {\r\n                let currentSourceObject = sourceObjects[i];\r\n                if (currentSourceObject === undefined || currentSourceObject === null) {\r\n                    continue;\r\n                }\r\n                currentSourceObject = Object(currentSourceObject);\r\n\r\n                const keysArray = Object.keys(currentSourceObject);\r\n                for (let nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {\r\n                    const nextKey = keysArray[nextIndex];\r\n                    const nextValue = currentSourceObject[nextKey];\r\n                    const desc = Object.getOwnPropertyDescriptor(currentSourceObject, nextKey);\r\n                    if (desc !== undefined && desc.enumerable) {\r\n                        if (deepAssign && typeof to[nextKey] === \"object\" && !Array.isArray(nextValue) && typeof nextValue === 'object')\r\n                            innerAssign(true, to[nextKey], nextValue);\r\n                        else\r\n                            to[nextKey] = nextValue;\r\n                    }\r\n                }\r\n            }\r\n            return to;\r\n        }\r\n    };\r\n\r\n    exports.assign = function (targetObject, sourceObjects) {\r\n        return innerAssign(false, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.deepAssign = function (targetObject, sourceObjects) {\r\n        return innerAssign(true, targetObject, sourceObjects);\r\n    };\r\n\r\n    exports.formatString = function (formatString, formatValues, escapeAsHtml) {\r\n        return formatString.replace(/{(\\w+)}/g, function (match, placeholder) {\r\n            const value = formatValues[placeholder];\r\n            return typeof value !== 'undefined' ? (escapeAsHtml ? exports.stringToHtml(value) : value) : match;\r\n        });\r\n    };\r\n\r\n    exports.locateDecimalPoint = function (number) {\r\n        return Math.floor(Math.log(number) / Math.log(10));\r\n    };\r\n\r\n    exports.formatNumberThousands = function (number, decimalPlaces = 0) {\r\n        var parts = number.toFixed(decimalPlaces).split(\".\");\r\n        parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n        return parts.join(\".\");\r\n    };\r\n\r\n    exports.createAutoNumberFormatter = function (scale, prefix = '', suffix = '', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createFixedNumberFormatter = function (scale, prefix = '', suffix = '', decimalPlaces = 2) {\r\n        return x => prefix + exports.formatNumberThousands(x, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.createPercentageFormatter = function (scale, prefix = '', suffix = '%', precision = 2) {\r\n        let decimalPlaces = exports.locateDecimalPoint(scale * 100);\r\n        decimalPlaces = decimalPlaces < 0 ? -decimalPlaces + precision - 1 : 0;\r\n        return x => prefix + exports.formatNumberThousands(x * 100, decimalPlaces) + suffix;\r\n    };\r\n\r\n    exports.stringToHtml = function (str) {\r\n        var div = document.createElement('div');\r\n        div.appendChild(document.createTextNode(str));\r\n        return div.innerHTML;\r\n    };\r\n\r\n    exports.throttle = function (fn, threshold) {\r\n        var last,\r\n            deferTimer;\r\n        return function () {\r\n            var context = this;\r\n\r\n            var now = Date.now(),\r\n                args = arguments;\r\n            if (last && now < last + threshold) {\r\n                clearTimeout(deferTimer);\r\n                deferTimer = setTimeout(function () {\r\n                    last = now;\r\n                    fn.apply(context, args);\r\n                }, threshold);\r\n            } else {\r\n                last = now;\r\n                fn.apply(context, args);\r\n            }\r\n        };\r\n    }\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}